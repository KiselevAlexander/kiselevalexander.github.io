/*! For license information please see main.js.LICENSE.txt */
(()=>{var e={676:function(e,t){!function(e){"use strict";function t(e){return Array.prototype.slice.call(e)}function n(e){return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function r(e,t,r){var i,o=new Promise((function(o,s){n(i=e[t].apply(e,r)).then(o,s)}));return o.request=i,o}function i(e,t,n){var i=r(e,t,n);return i.then((function(e){if(e)return new l(e,i.request)}))}function o(e,t,n){n.forEach((function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})}))}function s(e,t,n,i){i.forEach((function(i){i in n.prototype&&(e.prototype[i]=function(){return r(this[t],i,arguments)})}))}function a(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})}))}function c(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return i(this[t],r,arguments)})}))}function u(e){this._index=e}function l(e,t){this._cursor=e,this._request=t}function f(e){this._store=e}function p(e){this._tx=e,this.complete=new Promise((function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}}))}function h(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new p(n)}function d(e){this._db=e}o(u,"_index",["name","keyPath","multiEntry","unique"]),s(u,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),c(u,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),s(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(e){e in IDBCursor.prototype&&(l.prototype[e]=function(){var t=this,r=arguments;return Promise.resolve().then((function(){return t._cursor[e].apply(t._cursor,r),n(t._request).then((function(e){if(e)return new l(e,t._request)}))}))})})),f.prototype.createIndex=function(){return new u(this._store.createIndex.apply(this._store,arguments))},f.prototype.index=function(){return new u(this._store.index.apply(this._store,arguments))},o(f,"_store",["name","keyPath","indexNames","autoIncrement"]),s(f,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),c(f,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(f,"_store",IDBObjectStore,["deleteIndex"]),p.prototype.objectStore=function(){return new f(this._tx.objectStore.apply(this._tx,arguments))},o(p,"_tx",["objectStoreNames","mode"]),a(p,"_tx",IDBTransaction,["abort"]),h.prototype.createObjectStore=function(){return new f(this._db.createObjectStore.apply(this._db,arguments))},o(h,"_db",["name","version","objectStoreNames"]),a(h,"_db",IDBDatabase,["deleteObjectStore","close"]),d.prototype.transaction=function(){return new p(this._db.transaction.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),a(d,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(e){[f,u].forEach((function(n){e in n.prototype&&(n.prototype[e.replace("open","iterate")]=function(){var n=t(arguments),r=n[n.length-1],i=this._store||this._index,o=i[e].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[u,f].forEach((function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise((function(i){n.iterateCursor(e,(function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():i(r)):i(r)}))}))})})),e.openDb=function(e,t,n){var i=r(indexedDB,"open",[e,t]),o=i.request;return o&&(o.onupgradeneeded=function(e){n&&n(new h(o.result,e.oldVersion,o.transaction))}),i.then((function(e){return new d(e)}))},e.deleteDb=function(e){return r(indexedDB,"deleteDatabase",[e])},Object.defineProperty(e,"__esModule",{value:!0})}(t)}},t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{"use strict";var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)},t=function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function r(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}function i(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function o(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function s(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function a(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e}function c(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=c(e[n],t[n]));return e}var u=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},e}();function l(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}var f=function(t){function n(e,r,i){var o=t.call(this,r)||this;return o.code=e,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,p.prototype.create),o}return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}(n,t),n}(Error),p=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],s=o?h(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",c=new f(i,a,r);return c},e}();function h(e,t){return e.replace(d,(function(e,n){var r=t[n];return null!=r?String(r):"<"+n+"?>"}))}var d=/\{\$([^}]+)}/g;function v(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function g(e,t){var n=new b(e,t);return n.subscribe.bind(n)}!function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],c=this.chain_[1],u=this.chain_[2],l=this.chain_[3],f=this.chain_[4];for(r=0;r<80;r++)r<40?r<20?(o=l^c&(u^l),s=1518500249):(o=c^u^l,s=1859775393):r<60?(o=c&u|l&(c|u),s=2400959708):(o=c^u^l,s=3395469782),i=(a<<5|a>>>27)+o+f+s+n[r]&4294967295,f=l,l=u,u=4294967295&(c<<30|c>>>2),c=a,a=i;this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e}}();var b=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}return e.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},e.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},e.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e)?e:{next:e,error:t,complete:n}).next&&(r.next=y),void 0===r.error&&(r.error=y),void 0===r.complete&&(r.complete=y);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},e}();function y(){}var m,w=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e}(),_="[DEFAULT]",k=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return e.prototype.get=function(e){void 0===e&&(e=_);var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new u;this.instancesDeferred.set(t,n);try{var r=this.getOrInitializeService(t);r&&n.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var n=t({identifier:_,optional:!1},e),r=n.identifier,i=n.optional,o=this.normalizeInstanceIdentifier(r);try{var s=this.getOrInitializeService(o);if(!s){if(i)return null;throw Error("Service "+this.name+" is not available")}return s}catch(e){if(i)return null;throw e}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService(_)}catch(e){}try{for(var r=o(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var a=s(i.value,2),c=a[0],u=a[1],l=this.normalizeInstanceIdentifier(c);try{var f=this.getOrInitializeService(l);u.resolve(f)}catch(e){}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},e.prototype.clearInstance=function(e){void 0===e&&(e=_),this.instancesDeferred.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return r(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(a(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})),e.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()}))))];case 1:return t.sent(),[2]}}))}))},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.getOrInitializeService=function(e){var t=this.instances.get(e);return!t&&this.component&&(t=this.component.instanceFactory(this.container,function(e){return e===_?void 0:e}(e)),this.instances.set(e,t)),t||null},e.prototype.normalizeInstanceIdentifier=function(e){return this.component?this.component.multipleInstances?e:_:e},e}(),S=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new k(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();function I(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var E,O=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(E||(E={}));var C,T={debug:E.DEBUG,verbose:E.VERBOSE,info:E.INFO,warn:E.WARN,error:E.ERROR,silent:E.SILENT},D=E.INFO,P=((m={})[E.DEBUG]="log",m[E.VERBOSE]="log",m[E.INFO]="info",m[E.WARN]="warn",m[E.ERROR]="error",m),N=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var i=(new Date).toISOString(),o=P[t];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[o].apply(console,I(["["+i+"]  "+e.name+":"],n))}},j=function(){function e(e){this.name=e,this._logLevel=D,this._logHandler=N,this._userLogHandler=null,O.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in E))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?T[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,I([this,E.DEBUG],e)),this._logHandler.apply(this,I([this,E.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,I([this,E.VERBOSE],e)),this._logHandler.apply(this,I([this,E.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,I([this,E.INFO],e)),this._logHandler.apply(this,I([this,E.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,I([this,E.WARN],e)),this._logHandler.apply(this,I([this,E.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,I([this,E.ERROR],e)),this._logHandler.apply(this,I([this,E.ERROR],e))},e}();function A(e){O.forEach((function(t){t.setLogLevel(e)}))}var R,x=((C={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",C["bad-app-name"]="Illegal App name: '{$appName}",C["duplicate-app"]="Firebase App named '{$appName}' already exists",C["app-deleted"]="Firebase App named '{$appName}' already deleted",C["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",C["invalid-log-argument"]="First argument to `onLog` must be null or a function.",C),L=new p("app","Firebase",x),M="@firebase/app",K="[DEFAULT]",F=((R={})[M]="fire-core",R["@firebase/analytics"]="fire-analytics",R["@firebase/auth"]="fire-auth",R["@firebase/database"]="fire-rtdb",R["@firebase/functions"]="fire-fn",R["@firebase/installations"]="fire-iid",R["@firebase/messaging"]="fire-fcm",R["@firebase/performance"]="fire-perf",R["@firebase/remote-config"]="fire-rc",R["@firebase/storage"]="fire-gcs",R["@firebase/firestore"]="fire-fst",R["fire-js"]="fire-js",R["firebase-wrapper"]="fire-js-all",R),B=new j("@firebase/app"),H=function(){function e(e,t,n){var r,i,s=this;this.firebase_=n,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=c(void 0,e),this.container=new S(t.name),this._addComponent(new w("app",(function(){return s}),"PUBLIC"));try{for(var a=o(this.firebase_.INTERNAL.components.values()),u=a.next();!u.done;u=a.next()){var l=u.value;this._addComponent(l)}}catch(e){r={error:e}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map((function(e){return e.delete()})))})).then((function(){e.isDeleted_=!0}))},e.prototype._getService=function(e,t){return void 0===t&&(t=K),this.checkDestroyed_(),this.container.getProvider(e).getImmediate({identifier:t})},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=K),this.container.getProvider(e).clearInstance(t)},e.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){B.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},e.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw L.create("app-deleted",{appName:this.name_})},e}();H.prototype.name&&H.prototype.options||H.prototype.delete||console.log("dc");var V=function e(){var n=function(e){var t={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=K);var s=o.name;if("string"!=typeof s||!s)throw L.create("bad-app-name",{appName:String(s)});if(v(t,s))throw L.create("duplicate-app",{appName:s});var a=new e(n,o,r);return t[s]=a,a},app:i,registerVersion:function(e,t,n){var r,i=null!==(r=F[e])&&void 0!==r?r:e;n&&(i+="-"+n);var o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){var c=['Unable to register library "'+i+'" with version "'+t+'":'];return o&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&a&&c.push("and"),a&&c.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void B.warn(c.join(" "))}s(new w(i+"-version",(function(){return{library:i,version:t}}),"VERSION"))},setLogLevel:A,onLog:function(e,t){if(null!==e&&"function"!=typeof e)throw L.create("invalid-log-argument",{appName:name});!function(e,t){for(var n=function(n){var r=null;t&&t.level&&(r=T[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}})).filter((function(e){return e})).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:E[n].toLowerCase(),message:s,args:i,type:t.name})}},r=0,i=O;r<i.length;r++)n(i[r])}(e,t)},apps:null,SDK_VERSION:"8.0.1",INTERNAL:{registerComponent:s,removeApp:function(e){delete t[e]},components:n,useAsService:function(e,t){return"serverAuth"===t?null:t}}};function i(e){if(!v(t,e=e||K))throw L.create("no-app",{appName:e});return t[e]}function s(s){var a,u,l=s.name;if(n.has(l))return B.debug("There were multiple attempts to register component "+l+"."),"PUBLIC"===s.type?r[l]:null;if(n.set(l,s),"PUBLIC"===s.type){var f=function(e){if(void 0===e&&(e=i()),"function"!=typeof e[l])throw L.create("invalid-app-argument",{appName:l});return e[l]()};void 0!==s.serviceProps&&c(f,s.serviceProps),r[l]=f,e.prototype[l]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._getService.bind(this,l).apply(this,s.multipleInstances?e:[])}}try{for(var p=o(Object.keys(t)),h=p.next();!h.done;h=p.next()){var d=h.value;t[d]._addComponent(s)}}catch(e){a={error:e}}finally{try{h&&!h.done&&(u=p.return)&&u.call(p)}finally{if(a)throw a.error}}return"PUBLIC"===s.type?r[l]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(t).map((function(e){return t[e]}))}}),i.App=e,r}(H);return n.INTERNAL=t(t({},n.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){c(n,e)},createSubscribe:g,ErrorFactory:p,deepExtend:c}),n}(),U=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){var t=e.getImmediate();return t.library+"/"+t.version}return null})).filter((function(e){return e})).join(" ")},e}();if("object"==typeof self&&self.self===self&&void 0!==self.firebase){B.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var q=self.firebase.SDK_VERSION;q&&q.indexOf("LITE")>=0&&B.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var z=V.initializeApp;V.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return l()&&B.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),z.apply(void 0,e)};var W=V;!function(e,t){e.INTERNAL.registerComponent(new w("platform-logger",(function(e){return new U(e)}),"PRIVATE")),e.registerVersion(M,"0.6.13",void 0),e.registerVersion("fire-js","")}(W);const $=W;$.registerVersion("firebase","8.1.1","app");var G,J=n(676),Y="w:0.4.19",X=((G={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',G["not-registered"]="Firebase Installation is not registered.",G["installation-not-found"]="Firebase Installation not found.",G["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',G["app-offline"]="Could not process request. Application offline.",G["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",G),Z=new p("installations","Installations",X);function Q(e){return e instanceof f&&e.code.includes("request-failed")}function ee(e){return"https://firebaseinstallations.googleapis.com/v1/projects/"+e.projectId+"/installations"}function te(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function ne(e,t){return r(this,void 0,void 0,(function(){var n,r;return i(this,(function(i){switch(i.label){case 0:return[4,t.json()];case 1:return n=i.sent(),r=n.error,[2,Z.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function re(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function ie(e,t){var n=t.refreshToken,r=re(e);return r.append("Authorization",function(e){return"FIS_v2 "+e}(n)),r}function oe(e){return r(this,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:return[4,e()];case 1:return(t=n.sent()).status>=500&&t.status<600?[2,e()]:[2,t]}}))}))}function se(e,t){var n=t.fid;return r(this,void 0,void 0,(function(){var t,r,o,s,a,c;return i(this,(function(i){switch(i.label){case 0:return t=ee(e),r=re(e),o={fid:n,authVersion:"FIS_v2",appId:e.appId,sdkVersion:Y},s={method:"POST",headers:r,body:JSON.stringify(o)},[4,oe((function(){return fetch(t,s)}))];case 1:return(a=i.sent()).ok?[4,a.json()]:[3,3];case 2:return[2,{fid:(c=i.sent()).fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:te(c.authToken)}];case 3:return[4,ne("Create Installation",a)];case 4:throw i.sent()}}))}))}function ae(e){return new Promise((function(t){setTimeout(t,e)}))}var ce=/^[cdef][\w-]{21}$/;function ue(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){return(t=e,btoa(String.fromCharCode.apply(String,a(t))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return ce.test(t)?t:""}catch(e){return""}}function le(e){return e.appName+"!"+e.appId}var fe=new Map;function pe(e,t){var n=le(e);he(n,t),function(e,t){var n=ve();n&&n.postMessage({key:e,fid:t}),ge()}(n,t)}function he(e,t){var n,r,i=fe.get(e);if(i)try{for(var s=o(i),a=s.next();!a.done;a=s.next())(0,a.value)(t)}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}var de=null;function ve(){return!de&&"BroadcastChannel"in self&&((de=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){he(e.data.key,e.data.fid)}),de}function ge(){0===fe.size&&de&&(de.close(),de=null)}var be,ye,me="firebase-installations-store",we=null;function _e(){return we||(we=(0,J.openDb)("firebase-installations-database",1,(function(e){switch(e.oldVersion){case 0:e.createObjectStore(me)}}))),we}function ke(e,t){return r(this,void 0,void 0,(function(){var n,r,o,s,a;return i(this,(function(i){switch(i.label){case 0:return n=le(e),[4,_e()];case 1:return r=i.sent(),o=r.transaction(me,"readwrite"),[4,(s=o.objectStore(me)).get(n)];case 2:return a=i.sent(),[4,s.put(t,n)];case 3:return i.sent(),[4,o.complete];case 4:return i.sent(),a&&a.fid===t.fid||pe(e,t.fid),[2,t]}}))}))}function Se(e){return r(this,void 0,void 0,(function(){var t,n,r;return i(this,(function(i){switch(i.label){case 0:return t=le(e),[4,_e()];case 1:return n=i.sent(),[4,(r=n.transaction(me,"readwrite")).objectStore(me).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function Ie(e,t){return r(this,void 0,void 0,(function(){var n,r,o,s,a,c;return i(this,(function(i){switch(i.label){case 0:return n=le(e),[4,_e()];case 1:return r=i.sent(),o=r.transaction(me,"readwrite"),[4,(s=o.objectStore(me)).get(n)];case 2:return a=i.sent(),void 0!==(c=t(a))?[3,4]:[4,s.delete(n)];case 3:return i.sent(),[3,6];case 4:return[4,s.put(c,n)];case 5:i.sent(),i.label=6;case 6:return[4,o.complete];case 7:return i.sent(),!c||a&&a.fid===c.fid||pe(e,c.fid),[2,c]}}))}))}function Ee(e){return r(this,void 0,void 0,(function(){var t,n,o;return i(this,(function(s){switch(s.label){case 0:return[4,Ie(e,(function(n){var o=function(e){return Te(e||{fid:ue(),registrationStatus:0})}(n),s=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(Z.create("app-offline"))};var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(e,t){return r(this,void 0,void 0,(function(){var n,r;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,se(e,t)];case 1:return n=i.sent(),[2,ke(e,n)];case 2:return Q(r=i.sent())&&409===r.customData.serverCode?[4,Se(e)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,ke(e,{fid:t.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(e,n)}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Oe(e)}:{installationEntry:t}}(e,o);return t=s.registrationPromise,s.installationEntry}))];case 1:return""!==(n=s.sent()).fid?[3,3]:(o={},[4,t]);case 2:return[2,(o.installationEntry=s.sent(),o)];case 3:return[2,{installationEntry:n,registrationPromise:t}]}}))}))}function Oe(e){return r(this,void 0,void 0,(function(){var t,n,r,o;return i(this,(function(i){switch(i.label){case 0:return[4,Ce(e)];case 1:t=i.sent(),i.label=2;case 2:return 1!==t.registrationStatus?[3,5]:[4,ae(100)];case 3:return i.sent(),[4,Ce(e)];case 4:return t=i.sent(),[3,2];case 5:return 0!==t.registrationStatus?[3,7]:[4,Ee(e)];case 6:return n=i.sent(),r=n.installationEntry,(o=n.registrationPromise)?[2,o]:[2,r];case 7:return[2,t]}}))}))}function Ce(e){return Ie(e,(function(e){if(!e)throw Z.create("installation-not-found");return Te(e)}))}function Te(e){return 1===(t=e).registrationStatus&&t.registrationTime+1e4<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function De(e,t){var n=e.appConfig,o=e.platformLoggerProvider;return r(this,void 0,void 0,(function(){var e,r,s,a,c,u;return i(this,(function(i){switch(i.label){case 0:return e=function(e,t){var n=t.fid;return ee(e)+"/"+n+"/authTokens:generate"}(n,t),r=ie(n,t),(s=o.getImmediate({optional:!0}))&&r.append("x-firebase-client",s.getPlatformInfoString()),a={installation:{sdkVersion:Y}},c={method:"POST",headers:r,body:JSON.stringify(a)},[4,oe((function(){return fetch(e,c)}))];case 1:return(u=i.sent()).ok?[4,u.json()]:[3,3];case 2:return[2,te(i.sent())];case 3:return[4,ne("Generate Auth Token",u)];case 4:throw i.sent()}}))}))}function Pe(e,n){return void 0===n&&(n=!1),r(this,void 0,void 0,(function(){var o,s,a;return i(this,(function(c){switch(c.label){case 0:return[4,Ie(e.appConfig,(function(s){if(!je(s))throw Z.create("not-registered");var a,c=s.authToken;if(!n&&(2===(a=c).requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+36e5}(a)))return s;if(1===c.requestStatus)return o=function(e,t){return r(this,void 0,void 0,(function(){var n,r;return i(this,(function(i){switch(i.label){case 0:return[4,Ne(e.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,ae(100)];case 3:return i.sent(),[4,Ne(e.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,Pe(e,t)]:[2,r]}}))}))}(e,n),s;if(!navigator.onLine)throw Z.create("app-offline");var u=function(e){var n={requestStatus:1,requestTime:Date.now()};return t(t({},e),{authToken:n})}(s);return o=function(e,n){return r(this,void 0,void 0,(function(){var r,o,s;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,8]),[4,De(e,n)];case 1:return r=i.sent(),s=t(t({},n),{authToken:r}),[4,ke(e.appConfig,s)];case 2:return i.sent(),[2,r];case 3:return!Q(o=i.sent())||401!==o.customData.serverCode&&404!==o.customData.serverCode?[3,5]:[4,Se(e.appConfig)];case 4:return i.sent(),[3,7];case 5:return s=t(t({},n),{authToken:{requestStatus:0}}),[4,ke(e.appConfig,s)];case 6:i.sent(),i.label=7;case 7:throw o;case 8:return[2]}}))}))}(e,u),u}))];case 1:return s=c.sent(),o?[4,o]:[3,3];case 2:return a=c.sent(),[3,4];case 3:a=s.authToken,c.label=4;case 4:return[2,a]}}))}))}function Ne(e){return Ie(e,(function(e){if(!je(e))throw Z.create("not-registered");var n;return 1===(n=e.authToken).requestStatus&&n.requestTime+1e4<Date.now()?t(t({},e),{authToken:{requestStatus:0}}):e}))}function je(e){return void 0!==e&&2===e.registrationStatus}function Ae(e){return r(this,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:return[4,Ee(e)];case 1:return(t=n.sent().registrationPromise)?[4,t]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}function Re(e,t){return r(this,void 0,void 0,(function(){var n,r,o,s;return i(this,(function(i){switch(i.label){case 0:return n=function(e,t){var n=t.fid;return ee(e)+"/"+n}(e,t),r=ie(e,t),o={method:"DELETE",headers:r},[4,oe((function(){return fetch(n,o)}))];case 1:return(s=i.sent()).ok?[3,3]:[4,ne("Delete Installation",s)];case 2:throw i.sent();case 3:return[2]}}))}))}function xe(e){return Z.create("missing-app-config-values",{valueName:e})}(be=$).INTERNAL.registerComponent(new w("installations",(function(e){var t=e.getProvider("app").getImmediate(),n={appConfig:function(e){var t,n;if(!e||!e.options)throw xe("App Configuration");if(!e.name)throw xe("App Name");try{for(var r=o(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var s=i.value;if(!e.options[s])throw xe(s)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),platformLoggerProvider:e.getProvider("platform-logger")};return{app:t,getId:function(){return function(e){return r(this,void 0,void 0,(function(){var t,n,r;return i(this,(function(i){switch(i.label){case 0:return[4,Ee(e.appConfig)];case 1:return t=i.sent(),n=t.installationEntry,(r=t.registrationPromise)?r.catch(console.error):Pe(e).catch(console.error),[2,n.fid]}}))}))}(n)},getToken:function(e){return function(e,t){return void 0===t&&(t=!1),r(this,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return[4,Ae(e.appConfig)];case 1:return n.sent(),[4,Pe(e,t)];case 2:return[2,n.sent().token]}}))}))}(n,e)},delete:function(){return function(e){return r(this,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:return[4,Ie(t=e.appConfig,(function(e){if(!e||0!==e.registrationStatus)return e}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw Z.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw Z.create("app-offline");case 3:return[4,Re(t,n)];case 4:return r.sent(),[4,Se(t)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(n)},onIdChange:function(e){return function(e,t){var n=e.appConfig;return function(e,t){ve();var n=le(e),r=fe.get(n);r||(r=new Set,fe.set(n,r)),r.add(t)}(n,t),function(){!function(e,t){var n=le(e),r=fe.get(n);r&&(r.delete(t),0===r.size&&fe.delete(n),ge())}(n,t)}}(n,e)}}}),"PUBLIC")),be.registerVersion("@firebase/installations","0.4.19");var Le,Me=((ye={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',ye["only-available-in-window"]="This method is available in a Window context.",ye["only-available-in-sw"]="This method is available in a service worker context.",ye["permission-default"]="The notification permission was not granted and dismissed instead.",ye["permission-blocked"]="The notification permission was not granted and blocked instead.",ye["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",ye["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",ye["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",ye["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",ye["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",ye["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",ye["token-update-no-token"]="FCM returned no token when updating the user to push.",ye["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",ye["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",ye["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",ye["invalid-vapid-key"]="The public VAPID key must be a string.",ye["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",ye),Ke=new p("messaging","Messaging",Me),Fe="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4";function Be(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,a(t))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function He(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}!function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(Le||(Le={}));var Ve="fcm_token_details_db",Ue="fcm_token_object_Store";function qe(e){return r(this,void 0,void 0,(function(){var t,n=this;return i(this,(function(o){switch(o.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(!o.sent().map((function(e){return e.name})).includes(Ve))return[2,null];o.label=2;case 2:return t=null,[4,(0,J.openDb)(Ve,5,(function(o){return r(n,void 0,void 0,(function(){var n,r,s,a;return i(this,(function(i){switch(i.label){case 0:return o.oldVersion<2?[2]:o.objectStoreNames.contains(Ue)?[4,(n=o.transaction.objectStore(Ue)).index("fcmSenderId").get(e)]:[2];case 1:return r=i.sent(),[4,n.clear()];case 2:if(i.sent(),!r)return[2];if(2===o.oldVersion){if(!(s=r).auth||!s.p256dh||!s.endpoint)return[2];t={token:s.fcmToken,createTime:null!==(a=s.createTime)&&void 0!==a?a:Date.now(),subscriptionOptions:{auth:s.auth,p256dh:s.p256dh,endpoint:s.endpoint,swScope:s.swScope,vapidKey:"string"==typeof s.vapidKey?s.vapidKey:Be(s.vapidKey)}}}else(3===o.oldVersion||4===o.oldVersion)&&(t={token:(s=r).fcmToken,createTime:s.createTime,subscriptionOptions:{auth:Be(s.auth),p256dh:Be(s.p256dh),endpoint:s.endpoint,swScope:s.swScope,vapidKey:Be(s.vapidKey)}});return[2]}}))}))}))];case 3:return o.sent().close(),[4,(0,J.deleteDb)(Ve)];case 4:return o.sent(),[4,(0,J.deleteDb)("fcm_vapid_details_db")];case 5:return o.sent(),[4,(0,J.deleteDb)("undefined")];case 6:return o.sent(),[2,ze(t)?t:null]}}))}))}function ze(e){if(!e||!e.subscriptionOptions)return!1;var t=e.subscriptionOptions;return"number"==typeof e.createTime&&e.createTime>0&&"string"==typeof e.token&&e.token.length>0&&"string"==typeof t.auth&&t.auth.length>0&&"string"==typeof t.p256dh&&t.p256dh.length>0&&"string"==typeof t.endpoint&&t.endpoint.length>0&&"string"==typeof t.swScope&&t.swScope.length>0&&"string"==typeof t.vapidKey&&t.vapidKey.length>0}var We="firebase-messaging-store",$e=null;function Ge(){return $e||($e=(0,J.openDb)("firebase-messaging-database",1,(function(e){switch(e.oldVersion){case 0:e.createObjectStore(We)}}))),$e}function Je(e){return r(this,void 0,void 0,(function(){var t,n,r;return i(this,(function(i){switch(i.label){case 0:return t=Ze(e),[4,Ge()];case 1:return[4,i.sent().transaction(We).objectStore(We).get(t)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,qe(e.appConfig.senderId)];case 4:return(r=i.sent())?[4,Ye(e,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}}))}))}function Ye(e,t){return r(this,void 0,void 0,(function(){var n,r,o;return i(this,(function(i){switch(i.label){case 0:return n=Ze(e),[4,Ge()];case 1:return r=i.sent(),[4,(o=r.transaction(We,"readwrite")).objectStore(We).put(t,n)];case 2:return i.sent(),[4,o.complete];case 3:return i.sent(),[2,t]}}))}))}function Xe(e){return r(this,void 0,void 0,(function(){var t,n,r;return i(this,(function(i){switch(i.label){case 0:return t=Ze(e),[4,Ge()];case 1:return n=i.sent(),[4,(r=n.transaction(We,"readwrite")).objectStore(We).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function Ze(e){return e.appConfig.appId}function Qe(e,t){return r(this,void 0,void 0,(function(){var n,r,o,s,a,c;return i(this,(function(i){switch(i.label){case 0:return[4,rt(e)];case 1:n=i.sent(),r=it(t),o={method:"POST",headers:n,body:JSON.stringify(r)},i.label=2;case 2:return i.trys.push([2,5,,6]),[4,fetch(nt(e.appConfig),o)];case 3:return[4,i.sent().json()];case 4:return s=i.sent(),[3,6];case 5:throw a=i.sent(),Ke.create("token-subscribe-failed",{errorInfo:a});case 6:if(s.error)throw c=s.error.message,Ke.create("token-subscribe-failed",{errorInfo:c});if(!s.token)throw Ke.create("token-subscribe-no-token");return[2,s.token]}}))}))}function et(e,t){return r(this,void 0,void 0,(function(){var n,r,o,s,a,c;return i(this,(function(i){switch(i.label){case 0:return[4,rt(e)];case 1:n=i.sent(),r=it(t.subscriptionOptions),o={method:"PATCH",headers:n,body:JSON.stringify(r)},i.label=2;case 2:return i.trys.push([2,5,,6]),[4,fetch(nt(e.appConfig)+"/"+t.token,o)];case 3:return[4,i.sent().json()];case 4:return s=i.sent(),[3,6];case 5:throw a=i.sent(),Ke.create("token-update-failed",{errorInfo:a});case 6:if(s.error)throw c=s.error.message,Ke.create("token-update-failed",{errorInfo:c});if(!s.token)throw Ke.create("token-update-no-token");return[2,s.token]}}))}))}function tt(e,t){return r(this,void 0,void 0,(function(){var n,r,o,s,a;return i(this,(function(i){switch(i.label){case 0:return[4,rt(e)];case 1:n=i.sent(),r={method:"DELETE",headers:n},i.label=2;case 2:return i.trys.push([2,5,,6]),[4,fetch(nt(e.appConfig)+"/"+t,r)];case 3:return[4,i.sent().json()];case 4:if((o=i.sent()).error)throw s=o.error.message,Ke.create("token-unsubscribe-failed",{errorInfo:s});return[3,6];case 5:throw a=i.sent(),Ke.create("token-unsubscribe-failed",{errorInfo:a});case 6:return[2]}}))}))}function nt(e){return"https://fcmregistrations.googleapis.com/v1/projects/"+e.projectId+"/registrations"}function rt(e){var t=e.appConfig,n=e.installations;return r(this,void 0,void 0,(function(){var e;return i(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return e=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}}))}))}function it(e){var t=e.p256dh,n=e.auth,r=e.endpoint,i=e.vapidKey,o={web:{endpoint:r,auth:n,p256dh:t}};return i!==Fe&&(o.web.applicationPubKey=i),o}function ot(e,t,n){return r(this,void 0,void 0,(function(){var r,o,s,a;return i(this,(function(i){switch(i.label){case 0:if("granted"!==Notification.permission)throw Ke.create("permission-blocked");return[4,ut(t,n)];case 1:return r=i.sent(),[4,Je(e)];case 2:return o=i.sent(),s={vapidKey:n,swScope:t.scope,endpoint:r.endpoint,auth:Be(r.getKey("auth")),p256dh:Be(r.getKey("p256dh"))},o?[3,3]:[2,ct(e,s)];case 3:if(c=o.subscriptionOptions,l=(u=s).vapidKey===c.vapidKey,f=u.endpoint===c.endpoint,p=u.auth===c.auth,h=u.p256dh===c.p256dh,l&&f&&p&&h)return[3,8];i.label=4;case 4:return i.trys.push([4,6,,7]),[4,tt(e,o.token)];case 5:return i.sent(),[3,7];case 6:return a=i.sent(),console.warn(a),[3,7];case 7:return[2,ct(e,s)];case 8:return Date.now()>=o.createTime+6048e5?[2,at({token:o.token,createTime:Date.now(),subscriptionOptions:s},e,t)]:[2,o.token];case 9:return[2]}var c,u,l,f,p,h}))}))}function st(e,t){return r(this,void 0,void 0,(function(){var n,r;return i(this,(function(i){switch(i.label){case 0:return[4,Je(e)];case 1:return(n=i.sent())?[4,tt(e,n.token)]:[3,4];case 2:return i.sent(),[4,Xe(e)];case 3:i.sent(),i.label=4;case 4:return[4,t.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}}))}))}function at(e,n,o){return r(this,void 0,void 0,(function(){var r,s,a;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,5]),[4,et(n,e)];case 1:return r=i.sent(),s=t(t({},e),{token:r,createTime:Date.now()}),[4,Ye(n,s)];case 2:return i.sent(),[2,r];case 3:return a=i.sent(),[4,st(n,o)];case 4:throw i.sent(),a;case 5:return[2]}}))}))}function ct(e,t){return r(this,void 0,void 0,(function(){var n,r;return i(this,(function(i){switch(i.label){case 0:return[4,Qe(e,t)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:t},[4,Ye(e,r)];case 2:return i.sent(),[2,r.token]}}))}))}function ut(e,t){return r(this,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return[4,e.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:He(t)})]}}))}))}function lt(e){return"object"==typeof e&&!!e&&"google.c.a.c_id"in e}function ft(e){return new Promise((function(t){setTimeout(t,e)}))}var pt=function(){function e(e){var t=this;this.firebaseDependencies=e,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(e){e.waitUntil(t.onPush(e))})),self.addEventListener("pushsubscriptionchange",(function(e){e.waitUntil(t.onSubChange(e))})),self.addEventListener("notificationclick",(function(e){e.waitUntil(t.onNotificationClick(e))}))}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.setBackgroundMessageHandler=function(e){if(this.isOnBackgroundMessageUsed=!1,!e||"function"!=typeof e)throw Ke.create("invalid-bg-handler");this.bgMessageHandler=e},e.prototype.onBackgroundMessage=function(e){var t=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=e,function(){t.bgMessageHandler=null}},e.prototype.getToken=function(){var e,t;return r(this,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,Je(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(t=null===(e=null==n?void 0:n.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==t?t:Fe,r.label=2;case 2:return[2,ot(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},e.prototype.deleteToken=function(){return st(this.firebaseDependencies,self.registration)},e.prototype.requestPermission=function(){throw Ke.create("only-available-in-window")},e.prototype.usePublicVapidKey=function(e){if(null!==this.vapidKey)throw Ke.create("use-vapid-key-after-get-token");if("string"!=typeof e||0===e.length)throw Ke.create("invalid-vapid-key");this.vapidKey=e},e.prototype.useServiceWorker=function(){throw Ke.create("only-available-in-window")},e.prototype.onMessage=function(){throw Ke.create("only-available-in-window")},e.prototype.onTokenRefresh=function(){throw Ke.create("only-available-in-window")},e.prototype.onPush=function(e){return r(this,void 0,void 0,(function(){var t,n,r,o;return i(this,(function(i){switch(i.label){case 0:return(t=function(e){var t=e.data;if(!t)return null;try{return t.json()}catch(e){return null}}(e))?[4,gt()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(e){return e.some((function(e){return"visible"===e.visibilityState&&!e.url.startsWith("chrome-extension://")}))}(n=i.sent())?[2,vt(n,t)]:(r=!1,t.notification?[4,bt(ht(t))]:[3,3]);case 2:i.sent(),r=!0,i.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(o=function(e){var t={from:e.from,collapseKey:e.collapse_key};return function(e,t){if(t.notification){e.notification={};var n=t.notification.title;n&&(e.notification.title=n);var r=t.notification.body;r&&(e.notification.body=r);var i=t.notification.image;i&&(e.notification.image=i)}}(t,e),function(e,t){t.data&&(e.data=t.data)}(t,e),function(e,t){if(t.fcmOptions){e.fcmOptions={};var n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);var r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}}(t,e),t}(t),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(o):this.bgMessageHandler.next(o)),[4,ft(1e3)]);case 4:return i.sent(),[2]}}))}))},e.prototype.onSubChange=function(e){var t,n;return r(this,void 0,void 0,(function(){var r;return i(this,(function(i){switch(i.label){case 0:return e.newSubscription?[3,2]:[4,st(this.firebaseDependencies,self.registration)];case 1:return i.sent(),[2];case 2:return[4,Je(this.firebaseDependencies)];case 3:return r=i.sent(),[4,st(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,ot(this.firebaseDependencies,self.registration,null!==(n=null===(t=null==r?void 0:r.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==n?n:Fe)];case 5:return i.sent(),[2]}}))}))},e.prototype.onNotificationClick=function(e){var t,n;return r(this,void 0,void 0,(function(){var r,o,s,a,c;return i(this,(function(i){switch(i.label){case 0:return(r=null===(n=null===(t=e.notification)||void 0===t?void 0:t.data)||void 0===n?void 0:n.FCM_MSG)?e.action?[2]:(e.stopImmediatePropagation(),e.notification.close(),(o=function(e){var t,n,r,i=null!==(n=null===(t=e.fcmOptions)||void 0===t?void 0:t.link)&&void 0!==n?n:null===(r=e.notification)||void 0===r?void 0:r.click_action;return i||(lt(e.data)?self.location.origin:null)}(r))?(s=new URL(o,self.location.href),a=new URL(self.location.origin),s.host!==a.host?[2]:[4,dt(s)]):[2]):[2];case 1:return(c=i.sent())?[3,4]:[4,self.clients.openWindow(o)];case 2:return c=i.sent(),[4,ft(3e3)];case 3:return i.sent(),[3,6];case 4:return[4,c.focus()];case 5:c=i.sent(),i.label=6;case 6:return c?(r.messageType=Le.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,c.postMessage(r)]):[2]}}))}))},e}();function ht(e){var n,r=t({},e.notification);return r.data=((n={}).FCM_MSG=e,n),r}function dt(e){return r(this,void 0,void 0,(function(){var t,n,r,s,a,c,u;return i(this,(function(i){switch(i.label){case 0:return[4,gt()];case 1:t=i.sent();try{for(n=o(t),r=n.next();!r.done;r=n.next())if(s=r.value,a=new URL(s.url,self.location.href),e.host===a.host)return[2,s]}catch(e){c={error:e}}finally{try{r&&!r.done&&(u=n.return)&&u.call(n)}finally{if(c)throw c.error}}return[2,null]}}))}))}function vt(e,t){var n,r;t.isFirebaseMessaging=!0,t.messageType=Le.PUSH_RECEIVED;try{for(var i=o(e),s=i.next();!s.done;s=i.next())s.value.postMessage(t)}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function gt(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function bt(e){var t,n=e.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(t=e.title)&&void 0!==t?t:"",e)}var yt=function(){function e(e){var t=this;this.firebaseDependencies=e,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(e){return t.messageEventListener(e)}))}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.messageEventListener=function(e){return r(this,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:return(t=e.data).isFirebaseMessaging?(this.onMessageCallback&&t.messageType===Le.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback(function(e){return delete e.messageType,delete e.isFirebaseMessaging,e}(Object.assign({},t))):this.onMessageCallback.next(Object.assign({},t))),lt(n=t.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(t.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},e.prototype.getVapidKey=function(){return this.vapidKey},e.prototype.getSwReg=function(){return this.swRegistration},e.prototype.getToken=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:t.sent(),t.label=2;case 2:if("granted"!==Notification.permission)throw Ke.create("permission-blocked");return[4,this.updateVapidKey(null==e?void 0:e.vapidKey)];case 3:return t.sent(),[4,this.updateSwReg(null==e?void 0:e.serviceWorkerRegistration)];case 4:return t.sent(),[2,ot(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},e.prototype.updateVapidKey=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){return e?this.vapidKey=e:this.vapidKey||(this.vapidKey=Fe),[2]}))}))},e.prototype.updateSwReg=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return e||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:if(!e&&this.swRegistration)return[2];if(!(e instanceof ServiceWorkerRegistration))throw Ke.create("invalid-sw-registration");return this.swRegistration=e,[2]}}))}))},e.prototype.registerDefaultSw=function(){return r(this,void 0,void 0,(function(){var e,t;return i(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),e=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return e.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw t=n.sent(),Ke.create("failed-service-worker-registration",{browserErrorMessage:t.message});case 3:return[2]}}))}))},e.prototype.deleteToken=function(){return r(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:return[2,st(this.firebaseDependencies,this.swRegistration)]}}))}))},e.prototype.requestPermission=function(){return r(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?Ke.create("permission-blocked"):Ke.create("permission-default")}}))}))},e.prototype.usePublicVapidKey=function(e){if(null!==this.vapidKey)throw Ke.create("use-vapid-key-after-get-token");if("string"!=typeof e||0===e.length)throw Ke.create("invalid-vapid-key");this.vapidKey=e},e.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw Ke.create("invalid-sw-registration");if(this.swRegistration)throw Ke.create("use-sw-after-get-token");this.swRegistration=e},e.prototype.onMessage=function(e){var t=this;return this.onMessageCallback=e,function(){t.onMessageCallback=null}},e.prototype.setBackgroundMessageHandler=function(){throw Ke.create("only-available-in-sw")},e.prototype.onBackgroundMessage=function(){throw Ke.create("only-available-in-sw")},e.prototype.onTokenRefresh=function(){return function(){}},e.prototype.logEvent=function(e,t){return r(this,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return n=function(e){switch(e){case Le.NOTIFICATION_CLICKED:return"notification_open";case Le.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:t["google.c.a.c_id"],message_name:t["google.c.a.c_l"],message_time:t["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},e}();function mt(e){return Ke.create("missing-app-config-values",{valueName:e})}var wt={isSupported:_t};function _t(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}$.INTERNAL.registerComponent(new w("messaging",(function(e){var t=e.getProvider("app").getImmediate(),n={app:t,appConfig:function(e){var t,n;if(!e||!e.options)throw mt("App Configuration Object");if(!e.name)throw mt("App Name");var r=e.options;try{for(var i=o(["projectId","apiKey","appId","messagingSenderId"]),s=i.next();!s.done;s=i.next()){var a=s.value;if(!r[a])throw mt(a)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return{appName:e.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(t),installations:e.getProvider("installations").getImmediate(),analyticsProvider:e.getProvider("analytics-internal")};if(!_t())throw Ke.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new pt(n):new yt(n)}),"PUBLIC").setServiceProps(wt)),$.initializeApp({apiKey:"AIzaSyCxelbY_JPzcWFlyRL8vajkfjrIn0efUXg",authDomain:"brokers24-f50f6.firebaseapp.com",databaseURL:"https://brokers24-f50f6.firebaseio.com",projectId:"brokers24-f50f6",storageBucket:"brokers24-f50f6.appspot.com",messagingSenderId:"767750653969",appId:"1:767750653969:web:d1fe6ba3595b750be509b0"});var kt=$.messaging();function St(e){localStorage.setItem("sentFirebaseMessagingToken",e||"")}document.getElementById("subscribe").addEventListener("click",(function(){kt.getToken().then((function(e){e?function(e){!function(e){return localStorage.getItem("sentFirebaseMessagingToken")===e}(e)?(console.log("Отправка токена на сервер..."),console.log("SEND TO SERVER: "+e),St(e)):console.log("Токен уже отправлен на сервер.")}(e):(console.log("No registration token available. Request permission to generate one."),St(null))})).catch((function(e){console.log("An error occurred while retrieving token. ",e),St(null)}))})),kt.onMessage((function(e){console.log("Message received. ",e),document.hidden||new Notification(e.notification.title,{body:e.notification.body})}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvaWRiL2J1aWxkL2lkYi5qcyIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3V0aWwvZGlzdC9pbmRleC5lc20uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9jb21wb25lbnQvZGlzdC9pbmRleC5lc20uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9sb2dnZXIvZGlzdC9pbmRleC5lc20uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9hcHAvZGlzdC9pbmRleC5lc20uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2ZpcmViYXNlL2FwcC9kaXN0L2luZGV4LmVzbS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2luc3RhbGxhdGlvbnMvZGlzdC9pbmRleC5lc20uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9tZXNzYWdpbmcvZGlzdC9pbmRleC5lc20uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzeCJdLCJuYW1lcyI6WyJleHBvcnRzIiwidG9BcnJheSIsImFyciIsIkFycmF5IiwicHJvdG90eXBlIiwic2xpY2UiLCJjYWxsIiwicHJvbWlzaWZ5UmVxdWVzdCIsInJlcXVlc3QiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsIm9uc3VjY2VzcyIsInJlc3VsdCIsIm9uZXJyb3IiLCJlcnJvciIsInByb21pc2lmeVJlcXVlc3RDYWxsIiwib2JqIiwibWV0aG9kIiwiYXJncyIsInAiLCJhcHBseSIsInRoZW4iLCJwcm9taXNpZnlDdXJzb3JSZXF1ZXN0Q2FsbCIsInZhbHVlIiwiQ3Vyc29yIiwicHJveHlQcm9wZXJ0aWVzIiwiUHJveHlDbGFzcyIsInRhcmdldFByb3AiLCJwcm9wZXJ0aWVzIiwiZm9yRWFjaCIsInByb3AiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldCIsInRoaXMiLCJzZXQiLCJ2YWwiLCJwcm94eVJlcXVlc3RNZXRob2RzIiwiQ29uc3RydWN0b3IiLCJhcmd1bWVudHMiLCJwcm94eU1ldGhvZHMiLCJwcm94eUN1cnNvclJlcXVlc3RNZXRob2RzIiwiSW5kZXgiLCJpbmRleCIsIl9pbmRleCIsImN1cnNvciIsIl9jdXJzb3IiLCJfcmVxdWVzdCIsIk9iamVjdFN0b3JlIiwic3RvcmUiLCJfc3RvcmUiLCJUcmFuc2FjdGlvbiIsImlkYlRyYW5zYWN0aW9uIiwiX3R4IiwiY29tcGxldGUiLCJvbmNvbXBsZXRlIiwib25hYm9ydCIsIlVwZ3JhZGVEQiIsImRiIiwib2xkVmVyc2lvbiIsInRyYW5zYWN0aW9uIiwiX2RiIiwiREIiLCJJREJJbmRleCIsIklEQkN1cnNvciIsIm1ldGhvZE5hbWUiLCJjcmVhdGVJbmRleCIsIklEQk9iamVjdFN0b3JlIiwib2JqZWN0U3RvcmUiLCJJREJUcmFuc2FjdGlvbiIsImNyZWF0ZU9iamVjdFN0b3JlIiwiSURCRGF0YWJhc2UiLCJmdW5jTmFtZSIsInJlcGxhY2UiLCJjYWxsYmFjayIsImxlbmd0aCIsIm5hdGl2ZU9iamVjdCIsImdldEFsbCIsInF1ZXJ5IiwiY291bnQiLCJpbnN0YW5jZSIsIml0ZW1zIiwiaXRlcmF0ZUN1cnNvciIsInB1c2giLCJ1bmRlZmluZWQiLCJjb250aW51ZSIsIm9wZW5EYiIsIm5hbWUiLCJ2ZXJzaW9uIiwidXBncmFkZUNhbGxiYWNrIiwiaW5kZXhlZERCIiwib251cGdyYWRlbmVlZGVkIiwiZXZlbnQiLCJkZWxldGVEYiIsImZhY3RvcnkiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZyIsImdsb2JhbFRoaXMiLCJGdW5jdGlvbiIsImUiLCJ3aW5kb3ciLCJleHRlbmRTdGF0aWNzIiwiZCIsImIiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsImhhc093blByb3BlcnR5IiwiX19hc3NpZ24iLCJhc3NpZ24iLCJ0IiwicyIsImkiLCJuIiwiX19hd2FpdGVyIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJQIiwiZ2VuZXJhdG9yIiwiZnVsZmlsbGVkIiwic3RlcCIsIm5leHQiLCJyZWplY3RlZCIsImRvbmUiLCJfX2dlbmVyYXRvciIsImJvZHkiLCJmIiwieSIsIl8iLCJsYWJlbCIsInNlbnQiLCJ0cnlzIiwib3BzIiwidmVyYiIsIlN5bWJvbCIsIml0ZXJhdG9yIiwidiIsIm9wIiwiVHlwZUVycm9yIiwicG9wIiwiX192YWx1ZXMiLCJvIiwibSIsIl9fcmVhZCIsInIiLCJhciIsIl9fc3ByZWFkIiwiY29uY2F0IiwiZGVlcEV4dGVuZCIsInRhcmdldCIsInNvdXJjZSIsImNvbnN0cnVjdG9yIiwiRGF0ZSIsImdldFRpbWUiLCJEZWZlcnJlZCIsIl90aGlzIiwicHJvbWlzZSIsIndyYXBDYWxsYmFjayIsImNhdGNoIiwiaXNOb2RlIiwidG9TdHJpbmciLCJwcm9jZXNzIiwiRmlyZWJhc2VFcnJvciIsIl9zdXBlciIsImNvZGUiLCJtZXNzYWdlIiwiY3VzdG9tRGF0YSIsIkVycm9yIiwiY2FwdHVyZVN0YWNrVHJhY2UiLCJFcnJvckZhY3RvcnkiLCJjcmVhdGUiLCJfXyIsIl9fZXh0ZW5kcyIsInNlcnZpY2UiLCJzZXJ2aWNlTmFtZSIsImVycm9ycyIsImRhdGEiLCJfaSIsImZ1bGxDb2RlIiwidGVtcGxhdGUiLCJyZXBsYWNlVGVtcGxhdGUiLCJmdWxsTWVzc2FnZSIsIlBBVFRFUk4iLCJrZXkiLCJTdHJpbmciLCJjb250YWlucyIsImNyZWF0ZVN1YnNjcmliZSIsImV4ZWN1dG9yIiwib25Ob09ic2VydmVycyIsInByb3h5IiwiT2JzZXJ2ZXJQcm94eSIsInN1YnNjcmliZSIsImJpbmQiLCJTaGExIiwiY2hhaW5fIiwiYnVmXyIsIldfIiwicGFkXyIsImluYnVmXyIsInRvdGFsXyIsImJsb2NrU2l6ZSIsInJlc2V0IiwiY29tcHJlc3NfIiwiYnVmIiwib2Zmc2V0IiwiVyIsImNoYXJDb2RlQXQiLCJrIiwiYSIsImMiLCJ1cGRhdGUiLCJieXRlcyIsImxlbmd0aE1pbnVzQmxvY2siLCJpbmJ1ZiIsImRpZ2VzdCIsInRvdGFsQml0cyIsImoiLCJvYnNlcnZlcnMiLCJ1bnN1YnNjcmliZXMiLCJvYnNlcnZlckNvdW50IiwidGFzayIsImZpbmFsaXplZCIsImZvckVhY2hPYnNlcnZlciIsIm9ic2VydmVyIiwiY2xvc2UiLCJuZXh0T3JPYnNlcnZlciIsIm1ldGhvZHMiLCJtZXRob2RzXzEiLCJpbXBsZW1lbnRzQW55TWV0aG9kcyIsIm5vb3AiLCJ1bnN1YiIsInVuc3Vic2NyaWJlT25lIiwiZmluYWxFcnJvciIsImZuIiwic2VuZE9uZSIsImNvbnNvbGUiLCJlcnIiLCJfYSIsIkNvbXBvbmVudCIsImluc3RhbmNlRmFjdG9yeSIsInR5cGUiLCJtdWx0aXBsZUluc3RhbmNlcyIsInNlcnZpY2VQcm9wcyIsImluc3RhbnRpYXRpb25Nb2RlIiwic2V0SW5zdGFudGlhdGlvbk1vZGUiLCJtb2RlIiwic2V0TXVsdGlwbGVJbnN0YW5jZXMiLCJzZXRTZXJ2aWNlUHJvcHMiLCJwcm9wcyIsIkRFRkFVTFRfRU5UUllfTkFNRSIsIlByb3ZpZGVyIiwiY29udGFpbmVyIiwiY29tcG9uZW50IiwiaW5zdGFuY2VzIiwiTWFwIiwiaW5zdGFuY2VzRGVmZXJyZWQiLCJpZGVudGlmaWVyIiwibm9ybWFsaXplZElkZW50aWZpZXIiLCJub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIiLCJoYXMiLCJkZWZlcnJlZCIsImdldE9ySW5pdGlhbGl6ZVNlcnZpY2UiLCJnZXRJbW1lZGlhdGUiLCJvcHRpb25zIiwib3B0aW9uYWwiLCJnZXRDb21wb25lbnQiLCJzZXRDb21wb25lbnQiLCJlXzEiLCJpc0NvbXBvbmVudEVhZ2VyIiwiX2IiLCJlbnRyaWVzIiwiX2MiLCJfZCIsImluc3RhbmNlSWRlbnRpZmllciIsImluc3RhbmNlRGVmZXJyZWQiLCJlXzFfMSIsInJldHVybiIsImNsZWFySW5zdGFuY2UiLCJkZWxldGUiLCJzZXJ2aWNlcyIsImZyb20iLCJ2YWx1ZXMiLCJhbGwiLCJmaWx0ZXIiLCJtYXAiLCJJTlRFUk5BTCIsIl9kZWxldGUiLCJpc0NvbXBvbmVudFNldCIsIm5vcm1hbGl6ZUlkZW50aWZpZXJGb3JGYWN0b3J5IiwiQ29tcG9uZW50Q29udGFpbmVyIiwicHJvdmlkZXJzIiwiYWRkQ29tcG9uZW50IiwicHJvdmlkZXIiLCJnZXRQcm92aWRlciIsImFkZE9yT3ZlcndyaXRlQ29tcG9uZW50IiwiZ2V0UHJvdmlkZXJzIiwiaWwiLCJqbCIsIkxvZ0xldmVsIiwibGV2ZWxTdHJpbmdUb0VudW0iLCJERUJVRyIsIlZFUkJPU0UiLCJJTkZPIiwiV0FSTiIsIkVSUk9SIiwiU0lMRU5UIiwiZGVmYXVsdExvZ0xldmVsIiwiQ29uc29sZU1ldGhvZCIsImRlZmF1bHRMb2dIYW5kbGVyIiwibG9nVHlwZSIsImxvZ0xldmVsIiwibm93IiwidG9JU09TdHJpbmciLCJMb2dnZXIiLCJfbG9nTGV2ZWwiLCJfbG9nSGFuZGxlciIsIl91c2VyTG9nSGFuZGxlciIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJzZXRMb2dMZXZlbCIsImRlYnVnIiwibG9nIiwiaW5mbyIsIndhcm4iLCJsZXZlbCIsImluc3QiLCJfYSQxIiwiRVJST1JTIiwiRVJST1JfRkFDVE9SWSIsIm5hbWUkMSIsIlBMQVRGT1JNX0xPR19TVFJJTkciLCJsb2dnZXIiLCJGaXJlYmFzZUFwcEltcGwiLCJjb25maWciLCJmaXJlYmFzZV8iLCJpc0RlbGV0ZWRfIiwibmFtZV8iLCJhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWRfIiwiYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkIiwib3B0aW9uc18iLCJfYWRkQ29tcG9uZW50IiwiY29tcG9uZW50cyIsImNoZWNrRGVzdHJveWVkXyIsInJlbW92ZUFwcCIsIl9nZXRTZXJ2aWNlIiwiX3JlbW92ZVNlcnZpY2VJbnN0YW5jZSIsIl9hZGRPck92ZXJ3cml0ZUNvbXBvbmVudCIsImFwcE5hbWUiLCJmaXJlYmFzZSIsImNyZWF0ZUZpcmViYXNlTmFtZXNwYWNlIiwibmFtZXNwYWNlIiwiZmlyZWJhc2VBcHBJbXBsIiwiYXBwcyIsIl9fZXNNb2R1bGUiLCJpbml0aWFsaXplQXBwIiwicmF3Q29uZmlnIiwiYXBwIiwicmVnaXN0ZXJWZXJzaW9uIiwibGlicmFyeUtleU9yTmFtZSIsInZhcmlhbnQiLCJsaWJyYXJ5IiwibGlicmFyeU1pc21hdGNoIiwibWF0Y2giLCJ2ZXJzaW9uTWlzbWF0Y2giLCJ3YXJuaW5nIiwiam9pbiIsInJlZ2lzdGVyQ29tcG9uZW50Iiwib25Mb2ciLCJsb2dDYWxsYmFjayIsIl9sb29wXzEiLCJjdXN0b21Mb2dMZXZlbCIsInVzZXJMb2dIYW5kbGVyIiwiYXJnIiwiSlNPTiIsInN0cmluZ2lmeSIsImlnbm9yZWQiLCJ0b0xvd2VyQ2FzZSIsImluc3RhbmNlc18xIiwic2V0VXNlckxvZ0hhbmRsZXIiLCJTREtfVkVSU0lPTiIsInVzZUFzU2VydmljZSIsImNvbXBvbmVudE5hbWUiLCJzZXJ2aWNlTmFtZXNwYWNlIiwiYXBwQXJnIiwia2V5cyIsImNyZWF0ZUZpcmViYXNlTmFtZXNwYWNlQ29yZSIsImV4dGVuZE5hbWVzcGFjZSIsIlBsYXRmb3JtTG9nZ2VyU2VydmljZSIsImdldFBsYXRmb3JtSW5mb1N0cmluZyIsImlzVmVyc2lvblNlcnZpY2VQcm92aWRlciIsImxvZ1N0cmluZyIsInNlbGYiLCJzZGtWZXJzaW9uIiwiaW5kZXhPZiIsImZpcmViYXNlJDEiLCJyZWdpc3RlckNvcmVDb21wb25lbnRzIiwiUEFDS0FHRV9WRVJTSU9OIiwiRVJST1JfREVTQ1JJUFRJT05fTUFQIiwiaXNTZXJ2ZXJFcnJvciIsImluY2x1ZGVzIiwiZ2V0SW5zdGFsbGF0aW9uc0VuZHBvaW50IiwiSU5TVEFMTEFUSU9OU19BUElfVVJMIiwicHJvamVjdElkIiwiZXh0cmFjdEF1dGhUb2tlbkluZm9Gcm9tUmVzcG9uc2UiLCJyZXNwb25zZSIsInRva2VuIiwicmVxdWVzdFN0YXR1cyIsImV4cGlyZXNJbiIsInJlc3BvbnNlRXhwaXJlc0luIiwiTnVtYmVyIiwiY3JlYXRpb25UaW1lIiwiZ2V0RXJyb3JGcm9tUmVzcG9uc2UiLCJyZXF1ZXN0TmFtZSIsInJlc3BvbnNlSnNvbiIsImVycm9yRGF0YSIsImpzb24iLCJzZXJ2ZXJDb2RlIiwic2VydmVyTWVzc2FnZSIsInNlcnZlclN0YXR1cyIsInN0YXR1cyIsImdldEhlYWRlcnMiLCJhcGlLZXkiLCJIZWFkZXJzIiwiQWNjZXB0IiwiZ2V0SGVhZGVyc1dpdGhBdXRoIiwiYXBwQ29uZmlnIiwicmVmcmVzaFRva2VuIiwiaGVhZGVycyIsImFwcGVuZCIsIklOVEVSTkFMX0FVVEhfVkVSU0lPTiIsImdldEF1dGhvcml6YXRpb25IZWFkZXIiLCJyZXRyeUlmU2VydmVyRXJyb3IiLCJjcmVhdGVJbnN0YWxsYXRpb25SZXF1ZXN0IiwiZmlkIiwiZW5kcG9pbnQiLCJyZXNwb25zZVZhbHVlIiwiYXV0aFZlcnNpb24iLCJhcHBJZCIsImZldGNoIiwib2siLCJyZWdpc3RyYXRpb25TdGF0dXMiLCJhdXRoVG9rZW4iLCJzbGVlcCIsIm1zIiwic2V0VGltZW91dCIsIlZBTElEX0ZJRF9QQVRURVJOIiwiZ2VuZXJhdGVGaWQiLCJmaWRCeXRlQXJyYXkiLCJVaW50OEFycmF5IiwiY3J5cHRvIiwibXNDcnlwdG8iLCJnZXRSYW5kb21WYWx1ZXMiLCJhcnJheSIsImJ0b2EiLCJmcm9tQ2hhckNvZGUiLCJzdWJzdHIiLCJlbmNvZGUiLCJ0ZXN0IiwiZ2V0S2V5IiwiZmlkQ2hhbmdlQ2FsbGJhY2tzIiwiZmlkQ2hhbmdlZCIsImNhbGxGaWRDaGFuZ2VDYWxsYmFja3MiLCJjaGFubmVsIiwiZ2V0QnJvYWRjYXN0Q2hhbm5lbCIsInBvc3RNZXNzYWdlIiwiY2xvc2VCcm9hZGNhc3RDaGFubmVsIiwiYnJvYWRjYXN0RmlkQ2hhbmdlIiwiY2FsbGJhY2tzIiwiY2FsbGJhY2tzXzEiLCJjYWxsYmFja3NfMV8xIiwiYnJvYWRjYXN0Q2hhbm5lbCIsIkJyb2FkY2FzdENoYW5uZWwiLCJvbm1lc3NhZ2UiLCJzaXplIiwiT0JKRUNUX1NUT1JFX05BTUUiLCJkYlByb21pc2UiLCJnZXREYlByb21pc2UiLCJ1cGdyYWRlREIiLCJ0eCIsIm9sZFZhbHVlIiwicHV0IiwicmVtb3ZlIiwidXBkYXRlRm4iLCJuZXdWYWx1ZSIsImdldEluc3RhbGxhdGlvbkVudHJ5IiwicmVnaXN0cmF0aW9uUHJvbWlzZSIsImluc3RhbGxhdGlvbkVudHJ5Iiwib2xkRW50cnkiLCJjbGVhclRpbWVkT3V0UmVxdWVzdCIsInVwZGF0ZU9yQ3JlYXRlSW5zdGFsbGF0aW9uRW50cnkiLCJlbnRyeVdpdGhQcm9taXNlIiwibmF2aWdhdG9yIiwib25MaW5lIiwiaW5Qcm9ncmVzc0VudHJ5IiwicmVnaXN0cmF0aW9uVGltZSIsInJlZ2lzdGVyZWRJbnN0YWxsYXRpb25FbnRyeSIsInJlZ2lzdGVySW5zdGFsbGF0aW9uIiwid2FpdFVudGlsRmlkUmVnaXN0cmF0aW9uIiwidHJpZ2dlclJlZ2lzdHJhdGlvbklmTmVjZXNzYXJ5IiwiZW50cnkiLCJ1cGRhdGVJbnN0YWxsYXRpb25SZXF1ZXN0IiwiZ2VuZXJhdGVBdXRoVG9rZW5SZXF1ZXN0IiwicGxhdGZvcm1Mb2dnZXJQcm92aWRlciIsInBsYXRmb3JtTG9nZ2VyIiwiZ2V0R2VuZXJhdGVBdXRoVG9rZW5FbmRwb2ludCIsImluc3RhbGxhdGlvbiIsInJlZnJlc2hBdXRoVG9rZW4iLCJkZXBlbmRlbmNpZXMiLCJmb3JjZVJlZnJlc2giLCJ0b2tlblByb21pc2UiLCJpc0VudHJ5UmVnaXN0ZXJlZCIsIm9sZEF1dGhUb2tlbiIsImlzQXV0aFRva2VuRXhwaXJlZCIsInVwZGF0ZUF1dGhUb2tlblJlcXVlc3QiLCJ3YWl0VW50aWxBdXRoVG9rZW5SZXF1ZXN0IiwiaW5Qcm9ncmVzc0F1dGhUb2tlbiIsInJlcXVlc3RUaW1lIiwibWFrZUF1dGhUb2tlblJlcXVlc3RJblByb2dyZXNzRW50cnkiLCJ1cGRhdGVkSW5zdGFsbGF0aW9uRW50cnkiLCJmZXRjaEF1dGhUb2tlbkZyb21TZXJ2ZXIiLCJjb21wbGV0ZUluc3RhbGxhdGlvblJlZ2lzdHJhdGlvbiIsImRlbGV0ZUluc3RhbGxhdGlvblJlcXVlc3QiLCJnZXREZWxldGVFbmRwb2ludCIsImdldE1pc3NpbmdWYWx1ZUVycm9yIiwidmFsdWVOYW1lIiwiY29uZmlnS2V5c18xIiwiY29uZmlnS2V5c18xXzEiLCJrZXlOYW1lIiwiZXh0cmFjdEFwcENvbmZpZyIsImdldElkIiwiZ2V0VG9rZW4iLCJkZWxldGVJbnN0YWxsYXRpb24iLCJvbklkQ2hhbmdlIiwiY2FsbGJhY2tTZXQiLCJTZXQiLCJhZGQiLCJhZGRDYWxsYmFjayIsInJlbW92ZUNhbGxiYWNrIiwiTWVzc2FnZVR5cGUiLCJFUlJPUl9NQVAiLCJERUZBVUxUX1ZBUElEX0tFWSIsImFycmF5VG9CYXNlNjQiLCJ1aW50OEFycmF5IiwiYmFzZTY0VG9BcnJheSIsImJhc2U2NFN0cmluZyIsImJhc2U2NCIsInJlcGVhdCIsInJhd0RhdGEiLCJhdG9iIiwib3V0cHV0QXJyYXkiLCJPTERfREJfTkFNRSIsIk9MRF9PQkpFQ1RfU1RPUkVfTkFNRSIsIm1pZ3JhdGVPbGREYXRhYmFzZSIsInNlbmRlcklkIiwidG9rZW5EZXRhaWxzIiwiZGF0YWJhc2VzIiwib2xkRGV0YWlscyIsIm9iamVjdFN0b3JlTmFtZXMiLCJjbGVhciIsImF1dGgiLCJwMjU2ZGgiLCJmY21Ub2tlbiIsImNyZWF0ZVRpbWUiLCJzdWJzY3JpcHRpb25PcHRpb25zIiwic3dTY29wZSIsInZhcGlkS2V5IiwiY2hlY2tUb2tlbkRldGFpbHMiLCJ1cGdyYWRlRGIiLCJkYkdldCIsImZpcmViYXNlRGVwZW5kZW5jaWVzIiwib2xkVG9rZW5EZXRhaWxzIiwiZGJTZXQiLCJkYlJlbW92ZSIsInJlcXVlc3RHZXRUb2tlbiIsInN1YnNjcmliZU9wdGlvbnMiLCJyZXNwb25zZURhdGEiLCJlcnJfMSIsImdldEJvZHkiLCJnZXRFbmRwb2ludCIsImVycm9ySW5mbyIsInJlcXVlc3RVcGRhdGVUb2tlbiIsInVwZGF0ZU9wdGlvbnMiLCJlcnJfMiIsInJlcXVlc3REZWxldGVUb2tlbiIsInVuc3Vic2NyaWJlT3B0aW9ucyIsImVycl8zIiwiRU5EUE9JTlQiLCJpbnN0YWxsYXRpb25zIiwid2ViIiwiYXBwbGljYXRpb25QdWJLZXkiLCJzd1JlZ2lzdHJhdGlvbiIsInB1c2hTdWJzY3JpcHRpb24iLCJOb3RpZmljYXRpb24iLCJwZXJtaXNzaW9uIiwiZ2V0UHVzaFN1YnNjcmlwdGlvbiIsInNjb3BlIiwiZ2V0TmV3VG9rZW4iLCJkYk9wdGlvbnMiLCJpc1ZhcGlkS2V5RXF1YWwiLCJjdXJyZW50T3B0aW9ucyIsImlzRW5kcG9pbnRFcXVhbCIsImlzQXV0aEVxdWFsIiwiaXNQMjU2ZGhFcXVhbCIsInVwZGF0ZVRva2VuIiwiZGVsZXRlVG9rZW4iLCJwdXNoTWFuYWdlciIsImdldFN1YnNjcmlwdGlvbiIsInVuc3Vic2NyaWJlIiwidXBkYXRlZFRva2VuIiwidXBkYXRlZFRva2VuRGV0YWlscyIsImVfMiIsInN1YnNjcmlwdGlvbiIsInVzZXJWaXNpYmxlT25seSIsImFwcGxpY2F0aW9uU2VydmVyS2V5IiwiaXNDb25zb2xlTWVzc2FnZSIsIlN3Q29udHJvbGxlciIsImlzT25CYWNrZ3JvdW5kTWVzc2FnZVVzZWQiLCJiZ01lc3NhZ2VIYW5kbGVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsIndhaXRVbnRpbCIsIm9uUHVzaCIsIm9uU3ViQ2hhbmdlIiwib25Ob3RpZmljYXRpb25DbGljayIsInNldEJhY2tncm91bmRNZXNzYWdlSGFuZGxlciIsIm9uQmFja2dyb3VuZE1lc3NhZ2UiLCJyZWdpc3RyYXRpb24iLCJyZXF1ZXN0UGVybWlzc2lvbiIsInVzZVB1YmxpY1ZhcGlkS2V5IiwidXNlU2VydmljZVdvcmtlciIsIm9uTWVzc2FnZSIsIm9uVG9rZW5SZWZyZXNoIiwiaW50ZXJuYWxQYXlsb2FkIiwiY2xpZW50TGlzdCIsImlzTm90aWZpY2F0aW9uU2hvd24iLCJwYXlsb2FkIiwiZ2V0TWVzc2FnZVBheWxvYWRJbnRlcm5hbCIsImdldENsaWVudExpc3QiLCJUQUciLCJzb21lIiwiY2xpZW50IiwidmlzaWJpbGl0eVN0YXRlIiwidXJsIiwic3RhcnRzV2l0aCIsImhhc1Zpc2libGVDbGllbnRzIiwic2VuZE1lc3NhZ2VQYXlsb2FkSW50ZXJuYWxUb1dpbmRvd3MiLCJub3RpZmljYXRpb24iLCJzaG93Tm90aWZpY2F0aW9uIiwid3JhcEludGVybmFsUGF5bG9hZCIsImNvbGxhcHNlS2V5IiwiY29sbGFwc2Vfa2V5IiwibWVzc2FnZVBheWxvYWRJbnRlcm5hbCIsInRpdGxlIiwiaW1hZ2UiLCJwcm9wYWdhdGVOb3RpZmljYXRpb25QYXlsb2FkIiwicHJvcGFnYXRlRGF0YVBheWxvYWQiLCJmY21PcHRpb25zIiwibGluayIsImFuYWx5dGljc0xhYmVsIiwiYW5hbHl0aWNzX2xhYmVsIiwicHJvcGFnYXRlRmNtT3B0aW9ucyIsImV4dGVybmFsaXplUGF5bG9hZCIsIm5ld1N1YnNjcmlwdGlvbiIsIm9yaWdpblVybCIsImFjdGlvbiIsInN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiIsImNsaWNrX2FjdGlvbiIsImxvY2F0aW9uIiwib3JpZ2luIiwiZ2V0TGluayIsIlVSTCIsImhyZWYiLCJob3N0IiwiZ2V0V2luZG93Q2xpZW50IiwiY2xpZW50cyIsIm9wZW5XaW5kb3ciLCJmb2N1cyIsIm1lc3NhZ2VUeXBlIiwiTk9USUZJQ0FUSU9OX0NMSUNLRUQiLCJpc0ZpcmViYXNlTWVzc2FnaW5nIiwid3JhcHBlZEludGVybmFsUGF5bG9hZCIsImNsaWVudExpc3RfMSIsImNsaWVudExpc3RfMV8xIiwiY2xpZW50VXJsIiwiUFVTSF9SRUNFSVZFRCIsImNsaWVudExpc3RfMiIsImNsaWVudExpc3RfMl8xIiwiZV8yXzEiLCJtYXRjaEFsbCIsImluY2x1ZGVVbmNvbnRyb2xsZWQiLCJub3RpZmljYXRpb25QYXlsb2FkSW50ZXJuYWwiLCJhY3Rpb25zIiwibWF4QWN0aW9ucyIsIldpbmRvd0NvbnRyb2xsZXIiLCJvbk1lc3NhZ2VDYWxsYmFjayIsInNlcnZpY2VXb3JrZXIiLCJtZXNzYWdlRXZlbnRMaXN0ZW5lciIsImRhdGFQYXlsb2FkIiwic3RyaXBJbnRlcm5hbEZpZWxkcyIsImxvZ0V2ZW50IiwiZ2V0VmFwaWRLZXkiLCJnZXRTd1JlZyIsInVwZGF0ZVZhcGlkS2V5IiwidXBkYXRlU3dSZWciLCJzZXJ2aWNlV29ya2VyUmVnaXN0cmF0aW9uIiwicmVnaXN0ZXJEZWZhdWx0U3ciLCJTZXJ2aWNlV29ya2VyUmVnaXN0cmF0aW9uIiwicmVnaXN0ZXIiLCJicm93c2VyRXJyb3JNZXNzYWdlIiwicGVybWlzc2lvblJlc3VsdCIsImV2ZW50VHlwZSIsImdldEV2ZW50VHlwZSIsImFuYWx5dGljc1Byb3ZpZGVyIiwibWVzc2FnZV9pZCIsIkNPTlNPTEVfQ0FNUEFJR05fSUQiLCJtZXNzYWdlX25hbWUiLCJtZXNzYWdlX3RpbWUiLCJtZXNzYWdlX2RldmljZV90aW1lIiwiTWF0aCIsImZsb29yIiwiTkFNRVNQQUNFX0VYUE9SVFMiLCJpc1N1cHBvcnRlZCIsIlB1c2hTdWJzY3JpcHRpb24iLCJjb29raWVFbmFibGVkIiwibWVzc2FnaW5nU2VuZGVySWQiLCJhdXRoRG9tYWluIiwiZGF0YWJhc2VVUkwiLCJzdG9yYWdlQnVja2V0IiwibWVzc2FnaW5nIiwic2V0VG9rZW5TZW50VG9TZXJ2ZXIiLCJjdXJyZW50VG9rZW4iLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImdldEl0ZW0iLCJpc1Rva2VuU2VudFRvU2VydmVyIiwic2VuZFRva2VuVG9TZXJ2ZXIiLCJoaWRkZW4iXSwibWFwcGluZ3MiOiI7Z0NBSVEsU0FBVUEsR0FBVyxhQUUzQixTQUFT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WSxjQTBCbEIsU0FBU0MsR0FBcUJDLEdBQzFCQyxhQUFhQyxRQUNULDZCQUNBRixHQUE4QixJQUt0Q0csU0FBU0MsZUFBZSxhQUFhbkgsaUJBQWlCLFNBQVMsV0FDM0Q2RyxHQUFVck0sV0FBV2hnQixNQUFLLFNBQUN1c0IsR0FDbkJBLEVBNUJaLFNBQTJCQSxJQUozQixTQUE2QkEsR0FDekIsT0FBT0MsYUFBYUksUUFBUSxnQ0FBa0NMLEVBSXpETSxDQUFvQk4sSUFDckI5ZSxRQUFRc0YsSUFBSSxnQ0FPWnRGLFFBQVFzRixJQUFJLG1CQUFtQndaLEdBRS9CRCxHQUFxQkMsSUFFckI5ZSxRQUFRc0YsSUFBSSxrQ0FnQlIrWixDQUFrQlAsSUFHbEI5ZSxRQUFRc0YsSUFBSSx3RUFFWnVaLEdBQXFCLFVBRTFCMWpCLE9BQU0sU0FBQzhFLEdBQ05ELFFBQVFzRixJQUFJLDZDQUE4Q3JGLEdBQzFENGUsR0FBcUIsWUFNN0JELEdBQVVsRyxXQUFVLFNBQUNLLEdBQ2pCL1ksUUFBUXNGLElBQUkscUJBQXNCeVQsR0FDN0JrRyxTQUFTSyxRQUNWLElBQUlqSixhQUFhMEMsRUFBUVcsYUFBYU0sTUFBTyxDQUN6QzlnQixLQUFNNmYsRUFBUVcsYUFBYXhnQixXIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBmYWN0b3J5KGV4cG9ydHMpIDpcbiAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKFsnZXhwb3J0cyddLCBmYWN0b3J5KSA6XG4gIChnbG9iYWwgPSBnbG9iYWwgfHwgc2VsZiwgZmFjdG9yeShnbG9iYWwuaWRiID0ge30pKTtcbn0odGhpcywgZnVuY3Rpb24gKGV4cG9ydHMpIHsgJ3VzZSBzdHJpY3QnO1xuXG4gIGZ1bmN0aW9uIHRvQXJyYXkoYXJyKSB7XG4gICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFycik7XG4gIH1cblxuICBmdW5jdGlvbiBwcm9taXNpZnlSZXF1ZXN0KHJlcXVlc3QpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXNvbHZlKHJlcXVlc3QucmVzdWx0KTtcbiAgICAgIH07XG5cbiAgICAgIHJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZWplY3QocmVxdWVzdC5lcnJvcik7XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJvbWlzaWZ5UmVxdWVzdENhbGwob2JqLCBtZXRob2QsIGFyZ3MpIHtcbiAgICB2YXIgcmVxdWVzdDtcbiAgICB2YXIgcCA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgcmVxdWVzdCA9IG9ialttZXRob2RdLmFwcGx5KG9iaiwgYXJncyk7XG4gICAgICBwcm9taXNpZnlSZXF1ZXN0KHJlcXVlc3QpLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICB9KTtcblxuICAgIHAucmVxdWVzdCA9IHJlcXVlc3Q7XG4gICAgcmV0dXJuIHA7XG4gIH1cblxuICBmdW5jdGlvbiBwcm9taXNpZnlDdXJzb3JSZXF1ZXN0Q2FsbChvYmosIG1ldGhvZCwgYXJncykge1xuICAgIHZhciBwID0gcHJvbWlzaWZ5UmVxdWVzdENhbGwob2JqLCBtZXRob2QsIGFyZ3MpO1xuICAgIHJldHVybiBwLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIGlmICghdmFsdWUpIHJldHVybjtcbiAgICAgIHJldHVybiBuZXcgQ3Vyc29yKHZhbHVlLCBwLnJlcXVlc3QpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJveHlQcm9wZXJ0aWVzKFByb3h5Q2xhc3MsIHRhcmdldFByb3AsIHByb3BlcnRpZXMpIHtcbiAgICBwcm9wZXJ0aWVzLmZvckVhY2goZnVuY3Rpb24ocHJvcCkge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFByb3h5Q2xhc3MucHJvdG90eXBlLCBwcm9wLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXNbdGFyZ2V0UHJvcF1bcHJvcF07XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24odmFsKSB7XG4gICAgICAgICAgdGhpc1t0YXJnZXRQcm9wXVtwcm9wXSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBwcm94eVJlcXVlc3RNZXRob2RzKFByb3h5Q2xhc3MsIHRhcmdldFByb3AsIENvbnN0cnVjdG9yLCBwcm9wZXJ0aWVzKSB7XG4gICAgcHJvcGVydGllcy5mb3JFYWNoKGZ1bmN0aW9uKHByb3ApIHtcbiAgICAgIGlmICghKHByb3AgaW4gQ29uc3RydWN0b3IucHJvdG90eXBlKSkgcmV0dXJuO1xuICAgICAgUHJveHlDbGFzcy5wcm90b3R5cGVbcHJvcF0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHByb21pc2lmeVJlcXVlc3RDYWxsKHRoaXNbdGFyZ2V0UHJvcF0sIHByb3AsIGFyZ3VtZW50cyk7XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJveHlNZXRob2RzKFByb3h5Q2xhc3MsIHRhcmdldFByb3AsIENvbnN0cnVjdG9yLCBwcm9wZXJ0aWVzKSB7XG4gICAgcHJvcGVydGllcy5mb3JFYWNoKGZ1bmN0aW9uKHByb3ApIHtcbiAgICAgIGlmICghKHByb3AgaW4gQ29uc3RydWN0b3IucHJvdG90eXBlKSkgcmV0dXJuO1xuICAgICAgUHJveHlDbGFzcy5wcm90b3R5cGVbcHJvcF0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbdGFyZ2V0UHJvcF1bcHJvcF0uYXBwbHkodGhpc1t0YXJnZXRQcm9wXSwgYXJndW1lbnRzKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBwcm94eUN1cnNvclJlcXVlc3RNZXRob2RzKFByb3h5Q2xhc3MsIHRhcmdldFByb3AsIENvbnN0cnVjdG9yLCBwcm9wZXJ0aWVzKSB7XG4gICAgcHJvcGVydGllcy5mb3JFYWNoKGZ1bmN0aW9uKHByb3ApIHtcbiAgICAgIGlmICghKHByb3AgaW4gQ29uc3RydWN0b3IucHJvdG90eXBlKSkgcmV0dXJuO1xuICAgICAgUHJveHlDbGFzcy5wcm90b3R5cGVbcHJvcF0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHByb21pc2lmeUN1cnNvclJlcXVlc3RDYWxsKHRoaXNbdGFyZ2V0UHJvcF0sIHByb3AsIGFyZ3VtZW50cyk7XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gSW5kZXgoaW5kZXgpIHtcbiAgICB0aGlzLl9pbmRleCA9IGluZGV4O1xuICB9XG5cbiAgcHJveHlQcm9wZXJ0aWVzKEluZGV4LCAnX2luZGV4JywgW1xuICAgICduYW1lJyxcbiAgICAna2V5UGF0aCcsXG4gICAgJ211bHRpRW50cnknLFxuICAgICd1bmlxdWUnXG4gIF0pO1xuXG4gIHByb3h5UmVxdWVzdE1ldGhvZHMoSW5kZXgsICdfaW5kZXgnLCBJREJJbmRleCwgW1xuICAgICdnZXQnLFxuICAgICdnZXRLZXknLFxuICAgICdnZXRBbGwnLFxuICAgICdnZXRBbGxLZXlzJyxcbiAgICAnY291bnQnXG4gIF0pO1xuXG4gIHByb3h5Q3Vyc29yUmVxdWVzdE1ldGhvZHMoSW5kZXgsICdfaW5kZXgnLCBJREJJbmRleCwgW1xuICAgICdvcGVuQ3Vyc29yJyxcbiAgICAnb3BlbktleUN1cnNvcidcbiAgXSk7XG5cbiAgZnVuY3Rpb24gQ3Vyc29yKGN1cnNvciwgcmVxdWVzdCkge1xuICAgIHRoaXMuX2N1cnNvciA9IGN1cnNvcjtcbiAgICB0aGlzLl9yZXF1ZXN0ID0gcmVxdWVzdDtcbiAgfVxuXG4gIHByb3h5UHJvcGVydGllcyhDdXJzb3IsICdfY3Vyc29yJywgW1xuICAgICdkaXJlY3Rpb24nLFxuICAgICdrZXknLFxuICAgICdwcmltYXJ5S2V5JyxcbiAgICAndmFsdWUnXG4gIF0pO1xuXG4gIHByb3h5UmVxdWVzdE1ldGhvZHMoQ3Vyc29yLCAnX2N1cnNvcicsIElEQkN1cnNvciwgW1xuICAgICd1cGRhdGUnLFxuICAgICdkZWxldGUnXG4gIF0pO1xuXG4gIC8vIHByb3h5ICduZXh0JyBtZXRob2RzXG4gIFsnYWR2YW5jZScsICdjb250aW51ZScsICdjb250aW51ZVByaW1hcnlLZXknXS5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZE5hbWUpIHtcbiAgICBpZiAoIShtZXRob2ROYW1lIGluIElEQkN1cnNvci5wcm90b3R5cGUpKSByZXR1cm47XG4gICAgQ3Vyc29yLnByb3RvdHlwZVttZXRob2ROYW1lXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGN1cnNvciA9IHRoaXM7XG4gICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICBjdXJzb3IuX2N1cnNvclttZXRob2ROYW1lXS5hcHBseShjdXJzb3IuX2N1cnNvciwgYXJncyk7XG4gICAgICAgIHJldHVybiBwcm9taXNpZnlSZXF1ZXN0KGN1cnNvci5fcmVxdWVzdCkudGhlbihmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgIGlmICghdmFsdWUpIHJldHVybjtcbiAgICAgICAgICByZXR1cm4gbmV3IEN1cnNvcih2YWx1ZSwgY3Vyc29yLl9yZXF1ZXN0KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9KTtcblxuICBmdW5jdGlvbiBPYmplY3RTdG9yZShzdG9yZSkge1xuICAgIHRoaXMuX3N0b3JlID0gc3RvcmU7XG4gIH1cblxuICBPYmplY3RTdG9yZS5wcm90b3R5cGUuY3JlYXRlSW5kZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IEluZGV4KHRoaXMuX3N0b3JlLmNyZWF0ZUluZGV4LmFwcGx5KHRoaXMuX3N0b3JlLCBhcmd1bWVudHMpKTtcbiAgfTtcblxuICBPYmplY3RTdG9yZS5wcm90b3R5cGUuaW5kZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IEluZGV4KHRoaXMuX3N0b3JlLmluZGV4LmFwcGx5KHRoaXMuX3N0b3JlLCBhcmd1bWVudHMpKTtcbiAgfTtcblxuICBwcm94eVByb3BlcnRpZXMoT2JqZWN0U3RvcmUsICdfc3RvcmUnLCBbXG4gICAgJ25hbWUnLFxuICAgICdrZXlQYXRoJyxcbiAgICAnaW5kZXhOYW1lcycsXG4gICAgJ2F1dG9JbmNyZW1lbnQnXG4gIF0pO1xuXG4gIHByb3h5UmVxdWVzdE1ldGhvZHMoT2JqZWN0U3RvcmUsICdfc3RvcmUnLCBJREJPYmplY3RTdG9yZSwgW1xuICAgICdwdXQnLFxuICAgICdhZGQnLFxuICAgICdkZWxldGUnLFxuICAgICdjbGVhcicsXG4gICAgJ2dldCcsXG4gICAgJ2dldEFsbCcsXG4gICAgJ2dldEtleScsXG4gICAgJ2dldEFsbEtleXMnLFxuICAgICdjb3VudCdcbiAgXSk7XG5cbiAgcHJveHlDdXJzb3JSZXF1ZXN0TWV0aG9kcyhPYmplY3RTdG9yZSwgJ19zdG9yZScsIElEQk9iamVjdFN0b3JlLCBbXG4gICAgJ29wZW5DdXJzb3InLFxuICAgICdvcGVuS2V5Q3Vyc29yJ1xuICBdKTtcblxuICBwcm94eU1ldGhvZHMoT2JqZWN0U3RvcmUsICdfc3RvcmUnLCBJREJPYmplY3RTdG9yZSwgW1xuICAgICdkZWxldGVJbmRleCdcbiAgXSk7XG5cbiAgZnVuY3Rpb24gVHJhbnNhY3Rpb24oaWRiVHJhbnNhY3Rpb24pIHtcbiAgICB0aGlzLl90eCA9IGlkYlRyYW5zYWN0aW9uO1xuICAgIHRoaXMuY29tcGxldGUgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIGlkYlRyYW5zYWN0aW9uLm9uY29tcGxldGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfTtcbiAgICAgIGlkYlRyYW5zYWN0aW9uLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KGlkYlRyYW5zYWN0aW9uLmVycm9yKTtcbiAgICAgIH07XG4gICAgICBpZGJUcmFuc2FjdGlvbi5vbmFib3J0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlamVjdChpZGJUcmFuc2FjdGlvbi5lcnJvcik7XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgVHJhbnNhY3Rpb24ucHJvdG90eXBlLm9iamVjdFN0b3JlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBPYmplY3RTdG9yZSh0aGlzLl90eC5vYmplY3RTdG9yZS5hcHBseSh0aGlzLl90eCwgYXJndW1lbnRzKSk7XG4gIH07XG5cbiAgcHJveHlQcm9wZXJ0aWVzKFRyYW5zYWN0aW9uLCAnX3R4JywgW1xuICAgICdvYmplY3RTdG9yZU5hbWVzJyxcbiAgICAnbW9kZSdcbiAgXSk7XG5cbiAgcHJveHlNZXRob2RzKFRyYW5zYWN0aW9uLCAnX3R4JywgSURCVHJhbnNhY3Rpb24sIFtcbiAgICAnYWJvcnQnXG4gIF0pO1xuXG4gIGZ1bmN0aW9uIFVwZ3JhZGVEQihkYiwgb2xkVmVyc2lvbiwgdHJhbnNhY3Rpb24pIHtcbiAgICB0aGlzLl9kYiA9IGRiO1xuICAgIHRoaXMub2xkVmVyc2lvbiA9IG9sZFZlcnNpb247XG4gICAgdGhpcy50cmFuc2FjdGlvbiA9IG5ldyBUcmFuc2FjdGlvbih0cmFuc2FjdGlvbik7XG4gIH1cblxuICBVcGdyYWRlREIucHJvdG90eXBlLmNyZWF0ZU9iamVjdFN0b3JlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBPYmplY3RTdG9yZSh0aGlzLl9kYi5jcmVhdGVPYmplY3RTdG9yZS5hcHBseSh0aGlzLl9kYiwgYXJndW1lbnRzKSk7XG4gIH07XG5cbiAgcHJveHlQcm9wZXJ0aWVzKFVwZ3JhZGVEQiwgJ19kYicsIFtcbiAgICAnbmFtZScsXG4gICAgJ3ZlcnNpb24nLFxuICAgICdvYmplY3RTdG9yZU5hbWVzJ1xuICBdKTtcblxuICBwcm94eU1ldGhvZHMoVXBncmFkZURCLCAnX2RiJywgSURCRGF0YWJhc2UsIFtcbiAgICAnZGVsZXRlT2JqZWN0U3RvcmUnLFxuICAgICdjbG9zZSdcbiAgXSk7XG5cbiAgZnVuY3Rpb24gREIoZGIpIHtcbiAgICB0aGlzLl9kYiA9IGRiO1xuICB9XG5cbiAgREIucHJvdG90eXBlLnRyYW5zYWN0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBUcmFuc2FjdGlvbih0aGlzLl9kYi50cmFuc2FjdGlvbi5hcHBseSh0aGlzLl9kYiwgYXJndW1lbnRzKSk7XG4gIH07XG5cbiAgcHJveHlQcm9wZXJ0aWVzKERCLCAnX2RiJywgW1xuICAgICduYW1lJyxcbiAgICAndmVyc2lvbicsXG4gICAgJ29iamVjdFN0b3JlTmFtZXMnXG4gIF0pO1xuXG4gIHByb3h5TWV0aG9kcyhEQiwgJ19kYicsIElEQkRhdGFiYXNlLCBbXG4gICAgJ2Nsb3NlJ1xuICBdKTtcblxuICAvLyBBZGQgY3Vyc29yIGl0ZXJhdG9yc1xuICAvLyBUT0RPOiByZW1vdmUgdGhpcyBvbmNlIGJyb3dzZXJzIGRvIHRoZSByaWdodCB0aGluZyB3aXRoIHByb21pc2VzXG4gIFsnb3BlbkN1cnNvcicsICdvcGVuS2V5Q3Vyc29yJ10uZm9yRWFjaChmdW5jdGlvbihmdW5jTmFtZSkge1xuICAgIFtPYmplY3RTdG9yZSwgSW5kZXhdLmZvckVhY2goZnVuY3Rpb24oQ29uc3RydWN0b3IpIHtcbiAgICAgIC8vIERvbid0IGNyZWF0ZSBpdGVyYXRlS2V5Q3Vyc29yIGlmIG9wZW5LZXlDdXJzb3IgZG9lc24ndCBleGlzdC5cbiAgICAgIGlmICghKGZ1bmNOYW1lIGluIENvbnN0cnVjdG9yLnByb3RvdHlwZSkpIHJldHVybjtcblxuICAgICAgQ29uc3RydWN0b3IucHJvdG90eXBlW2Z1bmNOYW1lLnJlcGxhY2UoJ29wZW4nLCAnaXRlcmF0ZScpXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzKTtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gYXJnc1thcmdzLmxlbmd0aCAtIDFdO1xuICAgICAgICB2YXIgbmF0aXZlT2JqZWN0ID0gdGhpcy5fc3RvcmUgfHwgdGhpcy5faW5kZXg7XG4gICAgICAgIHZhciByZXF1ZXN0ID0gbmF0aXZlT2JqZWN0W2Z1bmNOYW1lXS5hcHBseShuYXRpdmVPYmplY3QsIGFyZ3Muc2xpY2UoMCwgLTEpKTtcbiAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBjYWxsYmFjayhyZXF1ZXN0LnJlc3VsdCk7XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgIH0pO1xuICB9KTtcblxuICAvLyBwb2x5ZmlsbCBnZXRBbGxcbiAgW0luZGV4LCBPYmplY3RTdG9yZV0uZm9yRWFjaChmdW5jdGlvbihDb25zdHJ1Y3Rvcikge1xuICAgIGlmIChDb25zdHJ1Y3Rvci5wcm90b3R5cGUuZ2V0QWxsKSByZXR1cm47XG4gICAgQ29uc3RydWN0b3IucHJvdG90eXBlLmdldEFsbCA9IGZ1bmN0aW9uKHF1ZXJ5LCBjb3VudCkge1xuICAgICAgdmFyIGluc3RhbmNlID0gdGhpcztcbiAgICAgIHZhciBpdGVtcyA9IFtdO1xuXG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSkge1xuICAgICAgICBpbnN0YW5jZS5pdGVyYXRlQ3Vyc29yKHF1ZXJ5LCBmdW5jdGlvbihjdXJzb3IpIHtcbiAgICAgICAgICBpZiAoIWN1cnNvcikge1xuICAgICAgICAgICAgcmVzb2x2ZShpdGVtcyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGl0ZW1zLnB1c2goY3Vyc29yLnZhbHVlKTtcblxuICAgICAgICAgIGlmIChjb3VudCAhPT0gdW5kZWZpbmVkICYmIGl0ZW1zLmxlbmd0aCA9PSBjb3VudCkge1xuICAgICAgICAgICAgcmVzb2x2ZShpdGVtcyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGN1cnNvci5jb250aW51ZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIG9wZW5EYihuYW1lLCB2ZXJzaW9uLCB1cGdyYWRlQ2FsbGJhY2spIHtcbiAgICB2YXIgcCA9IHByb21pc2lmeVJlcXVlc3RDYWxsKGluZGV4ZWREQiwgJ29wZW4nLCBbbmFtZSwgdmVyc2lvbl0pO1xuICAgIHZhciByZXF1ZXN0ID0gcC5yZXF1ZXN0O1xuXG4gICAgaWYgKHJlcXVlc3QpIHtcbiAgICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgaWYgKHVwZ3JhZGVDYWxsYmFjaykge1xuICAgICAgICAgIHVwZ3JhZGVDYWxsYmFjayhuZXcgVXBncmFkZURCKHJlcXVlc3QucmVzdWx0LCBldmVudC5vbGRWZXJzaW9uLCByZXF1ZXN0LnRyYW5zYWN0aW9uKSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHAudGhlbihmdW5jdGlvbihkYikge1xuICAgICAgcmV0dXJuIG5ldyBEQihkYik7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBkZWxldGVEYihuYW1lKSB7XG4gICAgcmV0dXJuIHByb21pc2lmeVJlcXVlc3RDYWxsKGluZGV4ZWREQiwgJ2RlbGV0ZURhdGFiYXNlJywgW25hbWVdKTtcbiAgfVxuXG4gIGV4cG9ydHMub3BlbkRiID0gb3BlbkRiO1xuICBleHBvcnRzLmRlbGV0ZURiID0gZGVsZXRlRGI7XG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcblxufSkpO1xuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0aWYoX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSkge1xuXHRcdHJldHVybiBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsIi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cclxuXHJcblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxyXG5wdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXHJcblJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxyXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXHJcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxyXG5MT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxyXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXHJcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4dGVuZHMoZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcclxuICAgICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgICAgIH1cclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NyZWF0ZUJpbmRpbmcobywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBvW2syXSA9IG1ba107XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4cG9ydFN0YXIobSwgZXhwb3J0cykge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xyXG4gICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDtcclxuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xyXG4gICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyBcIk9iamVjdCBpcyBub3QgaXRlcmFibGUuXCIgOiBcIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XHJcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZEFycmF5cygpIHtcclxuICAgIGZvciAodmFyIHMgPSAwLCBpID0gMCwgaWwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgaWw7IGkrKykgcyArPSBhcmd1bWVudHNbaV0ubGVuZ3RoO1xyXG4gICAgZm9yICh2YXIgciA9IEFycmF5KHMpLCBrID0gMCwgaSA9IDA7IGkgPCBpbDsgaSsrKVxyXG4gICAgICAgIGZvciAodmFyIGEgPSBhcmd1bWVudHNbaV0sIGogPSAwLCBqbCA9IGEubGVuZ3RoOyBqIDwgamw7IGorKywgaysrKVxyXG4gICAgICAgICAgICByW2tdID0gYVtqXTtcclxuICAgIHJldHVybiByO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXQodikge1xyXG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaWYgKGdbbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBuID09PSBcInJldHVyblwiIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xyXG4gICAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlbbl0gPSBvW25dICYmIGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHYgPSBvW25dKHYpLCBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB2LmRvbmUsIHYudmFsdWUpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcclxuICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XHJcbiAgICByZXR1cm4gY29va2VkO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcclxuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgcmVzdWx0W2tdID0gbW9kW2tdO1xyXG4gICAgcmVzdWx0LmRlZmF1bHQgPSBtb2Q7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnREZWZhdWx0KG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBkZWZhdWx0OiBtb2QgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRHZXQocmVjZWl2ZXIsIHByaXZhdGVNYXApIHtcclxuICAgIGlmICghcHJpdmF0ZU1hcC5oYXMocmVjZWl2ZXIpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBnZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcHJpdmF0ZU1hcC5nZXQocmVjZWl2ZXIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZFNldChyZWNlaXZlciwgcHJpdmF0ZU1hcCwgdmFsdWUpIHtcclxuICAgIGlmICghcHJpdmF0ZU1hcC5oYXMocmVjZWl2ZXIpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBzZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlTWFwLnNldChyZWNlaXZlciwgdmFsdWUpO1xyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG59XHJcbiIsImltcG9ydCB7IF9fZXh0ZW5kcyB9IGZyb20gJ3RzbGliJztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEBmaWxlb3ZlcnZpZXcgRmlyZWJhc2UgY29uc3RhbnRzLiAgU29tZSBvZiB0aGVzZSAoQGRlZmluZXMpIGNhbiBiZSBvdmVycmlkZGVuIGF0IGNvbXBpbGUtdGltZS5cclxuICovXHJcbnZhciBDT05TVEFOVFMgPSB7XHJcbiAgICAvKipcclxuICAgICAqIEBkZWZpbmUge2Jvb2xlYW59IFdoZXRoZXIgdGhpcyBpcyB0aGUgY2xpZW50IE5vZGUuanMgU0RLLlxyXG4gICAgICovXHJcbiAgICBOT0RFX0NMSUVOVDogZmFsc2UsXHJcbiAgICAvKipcclxuICAgICAqIEBkZWZpbmUge2Jvb2xlYW59IFdoZXRoZXIgdGhpcyBpcyB0aGUgQWRtaW4gTm9kZS5qcyBTREsuXHJcbiAgICAgKi9cclxuICAgIE5PREVfQURNSU46IGZhbHNlLFxyXG4gICAgLyoqXHJcbiAgICAgKiBGaXJlYmFzZSBTREsgVmVyc2lvblxyXG4gICAgICovXHJcbiAgICBTREtfVkVSU0lPTjogJyR7SlNDT1JFX1ZFUlNJT059J1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhyb3dzIGFuIGVycm9yIGlmIHRoZSBwcm92aWRlZCBhc3NlcnRpb24gaXMgZmFsc3lcclxuICovXHJcbnZhciBhc3NlcnQgPSBmdW5jdGlvbiAoYXNzZXJ0aW9uLCBtZXNzYWdlKSB7XHJcbiAgICBpZiAoIWFzc2VydGlvbikge1xyXG4gICAgICAgIHRocm93IGFzc2VydGlvbkVycm9yKG1lc3NhZ2UpO1xyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogUmV0dXJucyBhbiBFcnJvciBvYmplY3Qgc3VpdGFibGUgZm9yIHRocm93aW5nLlxyXG4gKi9cclxudmFyIGFzc2VydGlvbkVycm9yID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcclxuICAgIHJldHVybiBuZXcgRXJyb3IoJ0ZpcmViYXNlIERhdGFiYXNlICgnICtcclxuICAgICAgICBDT05TVEFOVFMuU0RLX1ZFUlNJT04gK1xyXG4gICAgICAgICcpIElOVEVSTkFMIEFTU0VSVCBGQUlMRUQ6ICcgK1xyXG4gICAgICAgIG1lc3NhZ2UpO1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgc3RyaW5nVG9CeXRlQXJyYXkgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICAvLyBUT0RPKHVzZXIpOiBVc2UgbmF0aXZlIGltcGxlbWVudGF0aW9ucyBpZi93aGVuIGF2YWlsYWJsZVxyXG4gICAgdmFyIG91dCA9IFtdO1xyXG4gICAgdmFyIHAgPSAwO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2YXIgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgIGlmIChjIDwgMTI4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gYztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDIwNDgpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiA2KSB8IDE5MjtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoKGMgJiAweGZjMDApID09PSAweGQ4MDAgJiZcclxuICAgICAgICAgICAgaSArIDEgPCBzdHIubGVuZ3RoICYmXHJcbiAgICAgICAgICAgIChzdHIuY2hhckNvZGVBdChpICsgMSkgJiAweGZjMDApID09PSAweGRjMDApIHtcclxuICAgICAgICAgICAgLy8gU3Vycm9nYXRlIFBhaXJcclxuICAgICAgICAgICAgYyA9IDB4MTAwMDAgKyAoKGMgJiAweDAzZmYpIDw8IDEwKSArIChzdHIuY2hhckNvZGVBdCgrK2kpICYgMHgwM2ZmKTtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiAxOCkgfCAyNDA7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDEyKSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDEyKSB8IDIyNDtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG91dDtcclxufTtcclxuLyoqXHJcbiAqIFR1cm5zIGFuIGFycmF5IG9mIG51bWJlcnMgaW50byB0aGUgc3RyaW5nIGdpdmVuIGJ5IHRoZSBjb25jYXRlbmF0aW9uIG9mIHRoZVxyXG4gKiBjaGFyYWN0ZXJzIHRvIHdoaWNoIHRoZSBudW1iZXJzIGNvcnJlc3BvbmQuXHJcbiAqIEBwYXJhbSBieXRlcyBBcnJheSBvZiBudW1iZXJzIHJlcHJlc2VudGluZyBjaGFyYWN0ZXJzLlxyXG4gKiBAcmV0dXJuIFN0cmluZ2lmaWNhdGlvbiBvZiB0aGUgYXJyYXkuXHJcbiAqL1xyXG52YXIgYnl0ZUFycmF5VG9TdHJpbmcgPSBmdW5jdGlvbiAoYnl0ZXMpIHtcclxuICAgIC8vIFRPRE8odXNlcik6IFVzZSBuYXRpdmUgaW1wbGVtZW50YXRpb25zIGlmL3doZW4gYXZhaWxhYmxlXHJcbiAgICB2YXIgb3V0ID0gW107XHJcbiAgICB2YXIgcG9zID0gMCwgYyA9IDA7XHJcbiAgICB3aGlsZSAocG9zIDwgYnl0ZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgdmFyIGMxID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgIGlmIChjMSA8IDEyOCkge1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoYzEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjMSA+IDE5MSAmJiBjMSA8IDIyNCkge1xyXG4gICAgICAgICAgICB2YXIgYzIgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZSgoKGMxICYgMzEpIDw8IDYpIHwgKGMyICYgNjMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYzEgPiAyMzkgJiYgYzEgPCAzNjUpIHtcclxuICAgICAgICAgICAgLy8gU3Vycm9nYXRlIFBhaXJcclxuICAgICAgICAgICAgdmFyIGMyID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICB2YXIgYzMgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIHZhciBjNCA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgdmFyIHUgPSAoKChjMSAmIDcpIDw8IDE4KSB8ICgoYzIgJiA2MykgPDwgMTIpIHwgKChjMyAmIDYzKSA8PCA2KSB8IChjNCAmIDYzKSkgLVxyXG4gICAgICAgICAgICAgICAgMHgxMDAwMDtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4ZDgwMCArICh1ID4+IDEwKSk7XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZSgweGRjMDAgKyAodSAmIDEwMjMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBjMiA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgdmFyIGMzID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjMSAmIDE1KSA8PCAxMikgfCAoKGMyICYgNjMpIDw8IDYpIHwgKGMzICYgNjMpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3V0LmpvaW4oJycpO1xyXG59O1xyXG4vLyBXZSBkZWZpbmUgaXQgYXMgYW4gb2JqZWN0IGxpdGVyYWwgaW5zdGVhZCBvZiBhIGNsYXNzIGJlY2F1c2UgYSBjbGFzcyBjb21waWxlZCBkb3duIHRvIGVzNSBjYW4ndFxyXG4vLyBiZSB0cmVlc2hha2VkLiBodHRwczovL2dpdGh1Yi5jb20vcm9sbHVwL3JvbGx1cC9pc3N1ZXMvMTY5MVxyXG4vLyBTdGF0aWMgbG9va3VwIG1hcHMsIGxhemlseSBwb3B1bGF0ZWQgYnkgaW5pdF8oKVxyXG52YXIgYmFzZTY0ID0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIGJ5dGVzIHRvIGNoYXJhY3RlcnMuXHJcbiAgICAgKi9cclxuICAgIGJ5dGVUb0NoYXJNYXBfOiBudWxsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIGNoYXJhY3RlcnMgdG8gYnl0ZXMuXHJcbiAgICAgKi9cclxuICAgIGNoYXJUb0J5dGVNYXBfOiBudWxsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIGJ5dGVzIHRvIHdlYnNhZmUgY2hhcmFjdGVycy5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGJ5dGVUb0NoYXJNYXBXZWJTYWZlXzogbnVsbCxcclxuICAgIC8qKlxyXG4gICAgICogTWFwcyB3ZWJzYWZlIGNoYXJhY3RlcnMgdG8gYnl0ZXMuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBjaGFyVG9CeXRlTWFwV2ViU2FmZV86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE91ciBkZWZhdWx0IGFscGhhYmV0LCBzaGFyZWQgYmV0d2VlblxyXG4gICAgICogRU5DT0RFRF9WQUxTIGFuZCBFTkNPREVEX1ZBTFNfV0VCU0FGRVxyXG4gICAgICovXHJcbiAgICBFTkNPREVEX1ZBTFNfQkFTRTogJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaJyArICdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eicgKyAnMDEyMzQ1Njc4OScsXHJcbiAgICAvKipcclxuICAgICAqIE91ciBkZWZhdWx0IGFscGhhYmV0LiBWYWx1ZSA2NCAoPSkgaXMgc3BlY2lhbDsgaXQgbWVhbnMgXCJub3RoaW5nLlwiXHJcbiAgICAgKi9cclxuICAgIGdldCBFTkNPREVEX1ZBTFMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuRU5DT0RFRF9WQUxTX0JBU0UgKyAnKy89JztcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIE91ciB3ZWJzYWZlIGFscGhhYmV0LlxyXG4gICAgICovXHJcbiAgICBnZXQgRU5DT0RFRF9WQUxTX1dFQlNBRkUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuRU5DT0RFRF9WQUxTX0JBU0UgKyAnLV8uJztcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIFdoZXRoZXIgdGhpcyBicm93c2VyIHN1cHBvcnRzIHRoZSBhdG9iIGFuZCBidG9hIGZ1bmN0aW9ucy4gVGhpcyBleHRlbnNpb25cclxuICAgICAqIHN0YXJ0ZWQgYXQgTW96aWxsYSBidXQgaXMgbm93IGltcGxlbWVudGVkIGJ5IG1hbnkgYnJvd3NlcnMuIFdlIHVzZSB0aGVcclxuICAgICAqIEFTU1VNRV8qIHZhcmlhYmxlcyB0byBhdm9pZCBwdWxsaW5nIGluIHRoZSBmdWxsIHVzZXJhZ2VudCBkZXRlY3Rpb24gbGlicmFyeVxyXG4gICAgICogYnV0IHN0aWxsIGFsbG93aW5nIHRoZSBzdGFuZGFyZCBwZXItYnJvd3NlciBjb21waWxhdGlvbnMuXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBIQVNfTkFUSVZFX1NVUFBPUlQ6IHR5cGVvZiBhdG9iID09PSAnZnVuY3Rpb24nLFxyXG4gICAgLyoqXHJcbiAgICAgKiBCYXNlNjQtZW5jb2RlIGFuIGFycmF5IG9mIGJ5dGVzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnB1dCBBbiBhcnJheSBvZiBieXRlcyAobnVtYmVycyB3aXRoXHJcbiAgICAgKiAgICAgdmFsdWUgaW4gWzAsIDI1NV0pIHRvIGVuY29kZS5cclxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIEJvb2xlYW4gaW5kaWNhdGluZyB3ZSBzaG91bGQgdXNlIHRoZVxyXG4gICAgICogICAgIGFsdGVybmF0aXZlIGFscGhhYmV0LlxyXG4gICAgICogQHJldHVybiBUaGUgYmFzZTY0IGVuY29kZWQgc3RyaW5nLlxyXG4gICAgICovXHJcbiAgICBlbmNvZGVCeXRlQXJyYXk6IGZ1bmN0aW9uIChpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ2VuY29kZUJ5dGVBcnJheSB0YWtlcyBhbiBhcnJheSBhcyBhIHBhcmFtZXRlcicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmluaXRfKCk7XHJcbiAgICAgICAgdmFyIGJ5dGVUb0NoYXJNYXAgPSB3ZWJTYWZlXHJcbiAgICAgICAgICAgID8gdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9cclxuICAgICAgICAgICAgOiB0aGlzLmJ5dGVUb0NoYXJNYXBfO1xyXG4gICAgICAgIHZhciBvdXRwdXQgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDsgaSArPSAzKSB7XHJcbiAgICAgICAgICAgIHZhciBieXRlMSA9IGlucHV0W2ldO1xyXG4gICAgICAgICAgICB2YXIgaGF2ZUJ5dGUyID0gaSArIDEgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIHZhciBieXRlMiA9IGhhdmVCeXRlMiA/IGlucHV0W2kgKyAxXSA6IDA7XHJcbiAgICAgICAgICAgIHZhciBoYXZlQnl0ZTMgPSBpICsgMiA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgdmFyIGJ5dGUzID0gaGF2ZUJ5dGUzID8gaW5wdXRbaSArIDJdIDogMDtcclxuICAgICAgICAgICAgdmFyIG91dEJ5dGUxID0gYnl0ZTEgPj4gMjtcclxuICAgICAgICAgICAgdmFyIG91dEJ5dGUyID0gKChieXRlMSAmIDB4MDMpIDw8IDQpIHwgKGJ5dGUyID4+IDQpO1xyXG4gICAgICAgICAgICB2YXIgb3V0Qnl0ZTMgPSAoKGJ5dGUyICYgMHgwZikgPDwgMikgfCAoYnl0ZTMgPj4gNik7XHJcbiAgICAgICAgICAgIHZhciBvdXRCeXRlNCA9IGJ5dGUzICYgMHgzZjtcclxuICAgICAgICAgICAgaWYgKCFoYXZlQnl0ZTMpIHtcclxuICAgICAgICAgICAgICAgIG91dEJ5dGU0ID0gNjQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWhhdmVCeXRlMikge1xyXG4gICAgICAgICAgICAgICAgICAgIG91dEJ5dGUzID0gNjQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3V0cHV0LnB1c2goYnl0ZVRvQ2hhck1hcFtvdXRCeXRlMV0sIGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTJdLCBieXRlVG9DaGFyTWFwW291dEJ5dGUzXSwgYnl0ZVRvQ2hhck1hcFtvdXRCeXRlNF0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3V0cHV0LmpvaW4oJycpO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogQmFzZTY0LWVuY29kZSBhIHN0cmluZy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgQSBzdHJpbmcgdG8gZW5jb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgSWYgdHJ1ZSwgd2Ugc2hvdWxkIHVzZSB0aGVcclxuICAgICAqICAgICBhbHRlcm5hdGl2ZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gVGhlIGJhc2U2NCBlbmNvZGVkIHN0cmluZy5cclxuICAgICAqL1xyXG4gICAgZW5jb2RlU3RyaW5nOiBmdW5jdGlvbiAoaW5wdXQsIHdlYlNhZmUpIHtcclxuICAgICAgICAvLyBTaG9ydGN1dCBmb3IgTW96aWxsYSBicm93c2VycyB0aGF0IGltcGxlbWVudFxyXG4gICAgICAgIC8vIGEgbmF0aXZlIGJhc2U2NCBlbmNvZGVyIGluIHRoZSBmb3JtIG9mIFwiYnRvYS9hdG9iXCJcclxuICAgICAgICBpZiAodGhpcy5IQVNfTkFUSVZFX1NVUFBPUlQgJiYgIXdlYlNhZmUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGJ0b2EoaW5wdXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGVCeXRlQXJyYXkoc3RyaW5nVG9CeXRlQXJyYXkoaW5wdXQpLCB3ZWJTYWZlKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1kZWNvZGUgYSBzdHJpbmcuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IHRvIGRlY29kZS5cclxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIFRydWUgaWYgd2Ugc2hvdWxkIHVzZSB0aGVcclxuICAgICAqICAgICBhbHRlcm5hdGl2ZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgZGVjb2RlZCB2YWx1ZS5cclxuICAgICAqL1xyXG4gICAgZGVjb2RlU3RyaW5nOiBmdW5jdGlvbiAoaW5wdXQsIHdlYlNhZmUpIHtcclxuICAgICAgICAvLyBTaG9ydGN1dCBmb3IgTW96aWxsYSBicm93c2VycyB0aGF0IGltcGxlbWVudFxyXG4gICAgICAgIC8vIGEgbmF0aXZlIGJhc2U2NCBlbmNvZGVyIGluIHRoZSBmb3JtIG9mIFwiYnRvYS9hdG9iXCJcclxuICAgICAgICBpZiAodGhpcy5IQVNfTkFUSVZFX1NVUFBPUlQgJiYgIXdlYlNhZmUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGF0b2IoaW5wdXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYnl0ZUFycmF5VG9TdHJpbmcodGhpcy5kZWNvZGVTdHJpbmdUb0J5dGVBcnJheShpbnB1dCwgd2ViU2FmZSkpO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogQmFzZTY0LWRlY29kZSBhIHN0cmluZy5cclxuICAgICAqXHJcbiAgICAgKiBJbiBiYXNlLTY0IGRlY29kaW5nLCBncm91cHMgb2YgZm91ciBjaGFyYWN0ZXJzIGFyZSBjb252ZXJ0ZWQgaW50byB0aHJlZVxyXG4gICAgICogYnl0ZXMuICBJZiB0aGUgZW5jb2RlciBkaWQgbm90IGFwcGx5IHBhZGRpbmcsIHRoZSBpbnB1dCBsZW5ndGggbWF5IG5vdFxyXG4gICAgICogYmUgYSBtdWx0aXBsZSBvZiA0LlxyXG4gICAgICpcclxuICAgICAqIEluIHRoaXMgY2FzZSwgdGhlIGxhc3QgZ3JvdXAgd2lsbCBoYXZlIGZld2VyIHRoYW4gNCBjaGFyYWN0ZXJzLCBhbmRcclxuICAgICAqIHBhZGRpbmcgd2lsbCBiZSBpbmZlcnJlZC4gIElmIHRoZSBncm91cCBoYXMgb25lIG9yIHR3byBjaGFyYWN0ZXJzLCBpdCBkZWNvZGVzXHJcbiAgICAgKiB0byBvbmUgYnl0ZS4gIElmIHRoZSBncm91cCBoYXMgdGhyZWUgY2hhcmFjdGVycywgaXQgZGVjb2RlcyB0byB0d28gYnl0ZXMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IElucHV0IHRvIGRlY29kZS5cclxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIFRydWUgaWYgd2Ugc2hvdWxkIHVzZSB0aGUgd2ViLXNhZmUgYWxwaGFiZXQuXHJcbiAgICAgKiBAcmV0dXJuIGJ5dGVzIHJlcHJlc2VudGluZyB0aGUgZGVjb2RlZCB2YWx1ZS5cclxuICAgICAqL1xyXG4gICAgZGVjb2RlU3RyaW5nVG9CeXRlQXJyYXk6IGZ1bmN0aW9uIChpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIHRoaXMuaW5pdF8oKTtcclxuICAgICAgICB2YXIgY2hhclRvQnl0ZU1hcCA9IHdlYlNhZmVcclxuICAgICAgICAgICAgPyB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlX1xyXG4gICAgICAgICAgICA6IHRoaXMuY2hhclRvQnl0ZU1hcF87XHJcbiAgICAgICAgdmFyIG91dHB1dCA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOykge1xyXG4gICAgICAgICAgICB2YXIgYnl0ZTEgPSBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKyspXTtcclxuICAgICAgICAgICAgdmFyIGhhdmVCeXRlMiA9IGkgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIHZhciBieXRlMiA9IGhhdmVCeXRlMiA/IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkpXSA6IDA7XHJcbiAgICAgICAgICAgICsraTtcclxuICAgICAgICAgICAgdmFyIGhhdmVCeXRlMyA9IGkgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIHZhciBieXRlMyA9IGhhdmVCeXRlMyA/IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkpXSA6IDY0O1xyXG4gICAgICAgICAgICArK2k7XHJcbiAgICAgICAgICAgIHZhciBoYXZlQnl0ZTQgPSBpIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICB2YXIgYnl0ZTQgPSBoYXZlQnl0ZTQgPyBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKV0gOiA2NDtcclxuICAgICAgICAgICAgKytpO1xyXG4gICAgICAgICAgICBpZiAoYnl0ZTEgPT0gbnVsbCB8fCBieXRlMiA9PSBudWxsIHx8IGJ5dGUzID09IG51bGwgfHwgYnl0ZTQgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgb3V0Qnl0ZTEgPSAoYnl0ZTEgPDwgMikgfCAoYnl0ZTIgPj4gNCk7XHJcbiAgICAgICAgICAgIG91dHB1dC5wdXNoKG91dEJ5dGUxKTtcclxuICAgICAgICAgICAgaWYgKGJ5dGUzICE9PSA2NCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG91dEJ5dGUyID0gKChieXRlMiA8PCA0KSAmIDB4ZjApIHwgKGJ5dGUzID4+IDIpO1xyXG4gICAgICAgICAgICAgICAgb3V0cHV0LnB1c2gob3V0Qnl0ZTIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJ5dGU0ICE9PSA2NCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvdXRCeXRlMyA9ICgoYnl0ZTMgPDwgNikgJiAweGMwKSB8IGJ5dGU0O1xyXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKG91dEJ5dGUzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogTGF6eSBzdGF0aWMgaW5pdGlhbGl6YXRpb24gZnVuY3Rpb24uIENhbGxlZCBiZWZvcmVcclxuICAgICAqIGFjY2Vzc2luZyBhbnkgb2YgdGhlIHN0YXRpYyBtYXAgdmFyaWFibGVzLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgaW5pdF86IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuYnl0ZVRvQ2hhck1hcF8pIHtcclxuICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwXyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBfID0ge307XHJcbiAgICAgICAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcFdlYlNhZmVfID0ge307XHJcbiAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfID0ge307XHJcbiAgICAgICAgICAgIC8vIFdlIHdhbnQgcXVpY2sgbWFwcGluZ3MgYmFjayBhbmQgZm9ydGgsIHNvIHdlIHByZWNvbXB1dGUgdHdvIG1hcHMuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5FTkNPREVEX1ZBTFMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcF9baV0gPSB0aGlzLkVOQ09ERURfVkFMUy5jaGFyQXQoaSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBfW3RoaXMuYnl0ZVRvQ2hhck1hcF9baV1dID0gaTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcFdlYlNhZmVfW2ldID0gdGhpcy5FTkNPREVEX1ZBTFNfV0VCU0FGRS5jaGFyQXQoaSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlX1t0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlX1tpXV0gPSBpO1xyXG4gICAgICAgICAgICAgICAgLy8gQmUgZm9yZ2l2aW5nIHdoZW4gZGVjb2RpbmcgYW5kIGNvcnJlY3RseSBkZWNvZGUgYm90aCBlbmNvZGluZ3MuXHJcbiAgICAgICAgICAgICAgICBpZiAoaSA+PSB0aGlzLkVOQ09ERURfVkFMU19CQVNFLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcF9bdGhpcy5FTkNPREVEX1ZBTFNfV0VCU0FGRS5jaGFyQXQoaSldID0gaTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlX1t0aGlzLkVOQ09ERURfVkFMUy5jaGFyQXQoaSldID0gaTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuLyoqXHJcbiAqIFVSTC1zYWZlIGJhc2U2NCBlbmNvZGluZ1xyXG4gKi9cclxudmFyIGJhc2U2NEVuY29kZSA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIHZhciB1dGY4Qnl0ZXMgPSBzdHJpbmdUb0J5dGVBcnJheShzdHIpO1xyXG4gICAgcmV0dXJuIGJhc2U2NC5lbmNvZGVCeXRlQXJyYXkodXRmOEJ5dGVzLCB0cnVlKTtcclxufTtcclxuLyoqXHJcbiAqIFVSTC1zYWZlIGJhc2U2NCBkZWNvZGluZ1xyXG4gKlxyXG4gKiBOT1RFOiBETyBOT1QgdXNlIHRoZSBnbG9iYWwgYXRvYigpIGZ1bmN0aW9uIC0gaXQgZG9lcyBOT1Qgc3VwcG9ydCB0aGVcclxuICogYmFzZTY0VXJsIHZhcmlhbnQgZW5jb2RpbmcuXHJcbiAqXHJcbiAqIEBwYXJhbSBzdHIgVG8gYmUgZGVjb2RlZFxyXG4gKiBAcmV0dXJuIERlY29kZWQgcmVzdWx0LCBpZiBwb3NzaWJsZVxyXG4gKi9cclxudmFyIGJhc2U2NERlY29kZSA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIGJhc2U2NC5kZWNvZGVTdHJpbmcoc3RyLCB0cnVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignYmFzZTY0RGVjb2RlIGZhaWxlZDogJywgZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIERvIGEgZGVlcC1jb3B5IG9mIGJhc2ljIEphdmFTY3JpcHQgT2JqZWN0cyBvciBBcnJheXMuXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWVwQ29weSh2YWx1ZSkge1xyXG4gICAgcmV0dXJuIGRlZXBFeHRlbmQodW5kZWZpbmVkLCB2YWx1ZSk7XHJcbn1cclxuLyoqXHJcbiAqIENvcHkgcHJvcGVydGllcyBmcm9tIHNvdXJjZSB0byB0YXJnZXQgKHJlY3Vyc2l2ZWx5IGFsbG93cyBleHRlbnNpb25cclxuICogb2YgT2JqZWN0cyBhbmQgQXJyYXlzKS4gIFNjYWxhciB2YWx1ZXMgaW4gdGhlIHRhcmdldCBhcmUgb3Zlci13cml0dGVuLlxyXG4gKiBJZiB0YXJnZXQgaXMgdW5kZWZpbmVkLCBhbiBvYmplY3Qgb2YgdGhlIGFwcHJvcHJpYXRlIHR5cGUgd2lsbCBiZSBjcmVhdGVkXHJcbiAqIChhbmQgcmV0dXJuZWQpLlxyXG4gKlxyXG4gKiBXZSByZWN1cnNpdmVseSBjb3B5IGFsbCBjaGlsZCBwcm9wZXJ0aWVzIG9mIHBsYWluIE9iamVjdHMgaW4gdGhlIHNvdXJjZS0gc29cclxuICogdGhhdCBuYW1lc3BhY2UtIGxpa2UgZGljdGlvbmFyaWVzIGFyZSBtZXJnZWQuXHJcbiAqXHJcbiAqIE5vdGUgdGhhdCB0aGUgdGFyZ2V0IGNhbiBiZSBhIGZ1bmN0aW9uLCBpbiB3aGljaCBjYXNlIHRoZSBwcm9wZXJ0aWVzIGluXHJcbiAqIHRoZSBzb3VyY2UgT2JqZWN0IGFyZSBjb3BpZWQgb250byBpdCBhcyBzdGF0aWMgcHJvcGVydGllcyBvZiB0aGUgRnVuY3Rpb24uXHJcbiAqXHJcbiAqIE5vdGU6IHdlIGRvbid0IG1lcmdlIF9fcHJvdG9fXyB0byBwcmV2ZW50IHByb3RvdHlwZSBwb2xsdXRpb25cclxuICovXHJcbmZ1bmN0aW9uIGRlZXBFeHRlbmQodGFyZ2V0LCBzb3VyY2UpIHtcclxuICAgIGlmICghKHNvdXJjZSBpbnN0YW5jZW9mIE9iamVjdCkpIHtcclxuICAgICAgICByZXR1cm4gc291cmNlO1xyXG4gICAgfVxyXG4gICAgc3dpdGNoIChzb3VyY2UuY29uc3RydWN0b3IpIHtcclxuICAgICAgICBjYXNlIERhdGU6XHJcbiAgICAgICAgICAgIC8vIFRyZWF0IERhdGVzIGxpa2Ugc2NhbGFyczsgaWYgdGhlIHRhcmdldCBkYXRlIG9iamVjdCBoYWQgYW55IGNoaWxkXHJcbiAgICAgICAgICAgIC8vIHByb3BlcnRpZXMgLSB0aGV5IHdpbGwgYmUgbG9zdCFcclxuICAgICAgICAgICAgdmFyIGRhdGVWYWx1ZSA9IHNvdXJjZTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGVWYWx1ZS5nZXRUaW1lKCkpO1xyXG4gICAgICAgIGNhc2UgT2JqZWN0OlxyXG4gICAgICAgICAgICBpZiAodGFyZ2V0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldCA9IHt9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgQXJyYXk6XHJcbiAgICAgICAgICAgIC8vIEFsd2F5cyBjb3B5IHRoZSBhcnJheSBzb3VyY2UgYW5kIG92ZXJ3cml0ZSB0aGUgdGFyZ2V0LlxyXG4gICAgICAgICAgICB0YXJnZXQgPSBbXTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgLy8gTm90IGEgcGxhaW4gT2JqZWN0IC0gdHJlYXQgaXQgYXMgYSBzY2FsYXIuXHJcbiAgICAgICAgICAgIHJldHVybiBzb3VyY2U7XHJcbiAgICB9XHJcbiAgICBmb3IgKHZhciBwcm9wIGluIHNvdXJjZSkge1xyXG4gICAgICAgIC8vIHVzZSBpc1ZhbGlkS2V5IHRvIGd1YXJkIGFnYWluc3QgcHJvdG90eXBlIHBvbGx1dGlvbi4gU2VlIGh0dHBzOi8vc255ay5pby92dWxuL1NOWUstSlMtTE9EQVNILTQ1MDIwMlxyXG4gICAgICAgIGlmICghc291cmNlLmhhc093blByb3BlcnR5KHByb3ApIHx8ICFpc1ZhbGlkS2V5KHByb3ApKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0YXJnZXRbcHJvcF0gPSBkZWVwRXh0ZW5kKHRhcmdldFtwcm9wXSwgc291cmNlW3Byb3BdKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0YXJnZXQ7XHJcbn1cclxuZnVuY3Rpb24gaXNWYWxpZEtleShrZXkpIHtcclxuICAgIHJldHVybiBrZXkgIT09ICdfX3Byb3RvX18nO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBEZWZlcnJlZCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERlZmVycmVkKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5yZWplY3QgPSBmdW5jdGlvbiAoKSB7IH07XHJcbiAgICAgICAgdGhpcy5yZXNvbHZlID0gZnVuY3Rpb24gKCkgeyB9O1xyXG4gICAgICAgIHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgX3RoaXMucmVzb2x2ZSA9IHJlc29sdmU7XHJcbiAgICAgICAgICAgIF90aGlzLnJlamVjdCA9IHJlamVjdDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogT3VyIEFQSSBpbnRlcm5hbHMgYXJlIG5vdCBwcm9taXNlaWZpZWQgYW5kIGNhbm5vdCBiZWNhdXNlIG91ciBjYWxsYmFjayBBUElzIGhhdmUgc3VidGxlIGV4cGVjdGF0aW9ucyBhcm91bmRcclxuICAgICAqIGludm9raW5nIHByb21pc2VzIGlubGluZSwgd2hpY2ggUHJvbWlzZXMgYXJlIGZvcmJpZGRlbiB0byBkby4gVGhpcyBtZXRob2QgYWNjZXB0cyBhbiBvcHRpb25hbCBub2RlLXN0eWxlIGNhbGxiYWNrXHJcbiAgICAgKiBhbmQgcmV0dXJucyBhIG5vZGUtc3R5bGUgY2FsbGJhY2sgd2hpY2ggd2lsbCByZXNvbHZlIG9yIHJlamVjdCB0aGUgRGVmZXJyZWQncyBwcm9taXNlLlxyXG4gICAgICovXHJcbiAgICBEZWZlcnJlZC5wcm90b3R5cGUud3JhcENhbGxiYWNrID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGVycm9yLCB2YWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5yZXNvbHZlKHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBBdHRhY2hpbmcgbm9vcCBoYW5kbGVyIGp1c3QgaW4gY2FzZSBkZXZlbG9wZXIgd2Fzbid0IGV4cGVjdGluZ1xyXG4gICAgICAgICAgICAgICAgLy8gcHJvbWlzZXNcclxuICAgICAgICAgICAgICAgIF90aGlzLnByb21pc2UuY2F0Y2goZnVuY3Rpb24gKCkgeyB9KTtcclxuICAgICAgICAgICAgICAgIC8vIFNvbWUgb2Ygb3VyIGNhbGxiYWNrcyBkb24ndCBleHBlY3QgYSB2YWx1ZSBhbmQgb3VyIG93biB0ZXN0c1xyXG4gICAgICAgICAgICAgICAgLy8gYXNzZXJ0IHRoYXQgdGhlIHBhcmFtZXRlciBsZW5ndGggaXMgMVxyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIHJldHVybiBEZWZlcnJlZDtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJldHVybnMgbmF2aWdhdG9yLnVzZXJBZ2VudCBzdHJpbmcgb3IgJycgaWYgaXQncyBub3QgZGVmaW5lZC5cclxuICogQHJldHVybiB1c2VyIGFnZW50IHN0cmluZ1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0VUEoKSB7XHJcbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICB0eXBlb2YgbmF2aWdhdG9yWyd1c2VyQWdlbnQnXSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICByZXR1cm4gbmF2aWdhdG9yWyd1c2VyQWdlbnQnXTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgIH1cclxufVxyXG4vKipcclxuICogRGV0ZWN0IENvcmRvdmEgLyBQaG9uZUdhcCAvIElvbmljIGZyYW1ld29ya3Mgb24gYSBtb2JpbGUgZGV2aWNlLlxyXG4gKlxyXG4gKiBEZWxpYmVyYXRlbHkgZG9lcyBub3QgcmVseSBvbiBjaGVja2luZyBgZmlsZTovL2AgVVJMcyAoYXMgdGhpcyBmYWlscyBQaG9uZUdhcFxyXG4gKiBpbiB0aGUgUmlwcGxlIGVtdWxhdG9yKSBub3IgQ29yZG92YSBgb25EZXZpY2VSZWFkeWAsIHdoaWNoIHdvdWxkIG5vcm1hbGx5XHJcbiAqIHdhaXQgZm9yIGEgY2FsbGJhY2suXHJcbiAqL1xyXG5mdW5jdGlvbiBpc01vYmlsZUNvcmRvdmEoKSB7XHJcbiAgICByZXR1cm4gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZSBTZXR0aW5nIHVwIGFuIGJyb2FkbHkgYXBwbGljYWJsZSBpbmRleCBzaWduYXR1cmUgZm9yIFdpbmRvd1xyXG4gICAgICAgIC8vIGp1c3QgdG8gZGVhbCB3aXRoIHRoaXMgY2FzZSB3b3VsZCBwcm9iYWJseSBiZSBhIGJhZCBpZGVhLlxyXG4gICAgICAgICEhKHdpbmRvd1snY29yZG92YSddIHx8IHdpbmRvd1sncGhvbmVnYXAnXSB8fCB3aW5kb3dbJ1Bob25lR2FwJ10pICYmXHJcbiAgICAgICAgL2lvc3xpcGhvbmV8aXBvZHxpcGFkfGFuZHJvaWR8YmxhY2tiZXJyeXxpZW1vYmlsZS9pLnRlc3QoZ2V0VUEoKSkpO1xyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgTm9kZS5qcy5cclxuICpcclxuICogQHJldHVybiB0cnVlIGlmIE5vZGUuanMgZW52aXJvbm1lbnQgaXMgZGV0ZWN0ZWQuXHJcbiAqL1xyXG4vLyBOb2RlIGRldGVjdGlvbiBsb2dpYyBmcm9tOiBodHRwczovL2dpdGh1Yi5jb20vaWxpYWthbi9kZXRlY3Qtbm9kZS9cclxuZnVuY3Rpb24gaXNOb2RlKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChnbG9iYWwucHJvY2VzcykgPT09ICdbb2JqZWN0IHByb2Nlc3NdJyk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogRGV0ZWN0IEJyb3dzZXIgRW52aXJvbm1lbnRcclxuICovXHJcbmZ1bmN0aW9uIGlzQnJvd3NlcigpIHtcclxuICAgIHJldHVybiB0eXBlb2Ygc2VsZiA9PT0gJ29iamVjdCcgJiYgc2VsZi5zZWxmID09PSBzZWxmO1xyXG59XHJcbmZ1bmN0aW9uIGlzQnJvd3NlckV4dGVuc2lvbigpIHtcclxuICAgIHZhciBydW50aW1lID0gdHlwZW9mIGNocm9tZSA9PT0gJ29iamVjdCdcclxuICAgICAgICA/IGNocm9tZS5ydW50aW1lXHJcbiAgICAgICAgOiB0eXBlb2YgYnJvd3NlciA9PT0gJ29iamVjdCdcclxuICAgICAgICAgICAgPyBicm93c2VyLnJ1bnRpbWVcclxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XHJcbiAgICByZXR1cm4gdHlwZW9mIHJ1bnRpbWUgPT09ICdvYmplY3QnICYmIHJ1bnRpbWUuaWQgIT09IHVuZGVmaW5lZDtcclxufVxyXG4vKipcclxuICogRGV0ZWN0IFJlYWN0IE5hdGl2ZS5cclxuICpcclxuICogQHJldHVybiB0cnVlIGlmIFJlYWN0TmF0aXZlIGVudmlyb25tZW50IGlzIGRldGVjdGVkLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNSZWFjdE5hdGl2ZSgpIHtcclxuICAgIHJldHVybiAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ29iamVjdCcgJiYgbmF2aWdhdG9yWydwcm9kdWN0J10gPT09ICdSZWFjdE5hdGl2ZScpO1xyXG59XHJcbi8qKiBEZXRlY3RzIEVsZWN0cm9uIGFwcHMuICovXHJcbmZ1bmN0aW9uIGlzRWxlY3Ryb24oKSB7XHJcbiAgICByZXR1cm4gZ2V0VUEoKS5pbmRleE9mKCdFbGVjdHJvbi8nKSA+PSAwO1xyXG59XHJcbi8qKiBEZXRlY3RzIEludGVybmV0IEV4cGxvcmVyLiAqL1xyXG5mdW5jdGlvbiBpc0lFKCkge1xyXG4gICAgdmFyIHVhID0gZ2V0VUEoKTtcclxuICAgIHJldHVybiB1YS5pbmRleE9mKCdNU0lFICcpID49IDAgfHwgdWEuaW5kZXhPZignVHJpZGVudC8nKSA+PSAwO1xyXG59XHJcbi8qKiBEZXRlY3RzIFVuaXZlcnNhbCBXaW5kb3dzIFBsYXRmb3JtIGFwcHMuICovXHJcbmZ1bmN0aW9uIGlzVVdQKCkge1xyXG4gICAgcmV0dXJuIGdldFVBKCkuaW5kZXhPZignTVNBcHBIb3N0LycpID49IDA7XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCB3aGV0aGVyIHRoZSBjdXJyZW50IFNESyBidWlsZCBpcyB0aGUgTm9kZSB2ZXJzaW9uLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHRydWUgaWYgaXQncyB0aGUgTm9kZSBTREsgYnVpbGQuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc05vZGVTZGsoKSB7XHJcbiAgICByZXR1cm4gQ09OU1RBTlRTLk5PREVfQ0xJRU5UID09PSB0cnVlIHx8IENPTlNUQU5UUy5OT0RFX0FETUlOID09PSB0cnVlO1xyXG59XHJcbi8qKiBSZXR1cm5zIHRydWUgaWYgd2UgYXJlIHJ1bm5pbmcgaW4gU2FmYXJpLiAqL1xyXG5mdW5jdGlvbiBpc1NhZmFyaSgpIHtcclxuICAgIHJldHVybiAoIWlzTm9kZSgpICYmXHJcbiAgICAgICAgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcygnU2FmYXJpJykgJiZcclxuICAgICAgICAhbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcygnQ2hyb21lJykpO1xyXG59XHJcbi8qKlxyXG4gKiBUaGlzIG1ldGhvZCBjaGVja3MgaWYgaW5kZXhlZERCIGlzIHN1cHBvcnRlZCBieSBjdXJyZW50IGJyb3dzZXIvc2VydmljZSB3b3JrZXIgY29udGV4dFxyXG4gKiBAcmV0dXJuIHRydWUgaWYgaW5kZXhlZERCIGlzIHN1cHBvcnRlZCBieSBjdXJyZW50IGJyb3dzZXIvc2VydmljZSB3b3JrZXIgY29udGV4dFxyXG4gKi9cclxuZnVuY3Rpb24gaXNJbmRleGVkREJBdmFpbGFibGUoKSB7XHJcbiAgICByZXR1cm4gJ2luZGV4ZWREQicgaW4gc2VsZiAmJiBpbmRleGVkREIgIT0gbnVsbDtcclxufVxyXG4vKipcclxuICogVGhpcyBtZXRob2QgdmFsaWRhdGVzIGJyb3dzZXIgY29udGV4dCBmb3IgaW5kZXhlZERCIGJ5IG9wZW5pbmcgYSBkdW1teSBpbmRleGVkREIgZGF0YWJhc2UgYW5kIHJlamVjdFxyXG4gKiBpZiBlcnJvcnMgb2NjdXIgZHVyaW5nIHRoZSBkYXRhYmFzZSBvcGVuIG9wZXJhdGlvbi5cclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUoKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHZhciBwcmVFeGlzdF8xID0gdHJ1ZTtcclxuICAgICAgICAgICAgdmFyIERCX0NIRUNLX05BTUVfMSA9ICd2YWxpZGF0ZS1icm93c2VyLWNvbnRleHQtZm9yLWluZGV4ZWRkYi1hbmFseXRpY3MtbW9kdWxlJztcclxuICAgICAgICAgICAgdmFyIHJlcXVlc3RfMSA9IHdpbmRvdy5pbmRleGVkREIub3BlbihEQl9DSEVDS19OQU1FXzEpO1xyXG4gICAgICAgICAgICByZXF1ZXN0XzEub25zdWNjZXNzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdF8xLnJlc3VsdC5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgLy8gZGVsZXRlIGRhdGFiYXNlIG9ubHkgd2hlbiBpdCBkb2Vzbid0IHByZS1leGlzdFxyXG4gICAgICAgICAgICAgICAgaWYgKCFwcmVFeGlzdF8xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmluZGV4ZWREQi5kZWxldGVEYXRhYmFzZShEQl9DSEVDS19OQU1FXzEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmVxdWVzdF8xLm9udXBncmFkZW5lZWRlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHByZUV4aXN0XzEgPSBmYWxzZTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmVxdWVzdF8xLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoKChfYSA9IHJlcXVlc3RfMS5lcnJvcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1lc3NhZ2UpIHx8ICcnKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIFRoaXMgbWV0aG9kIGNoZWNrcyB3aGV0aGVyIGNvb2tpZSBpcyBlbmFibGVkIHdpdGhpbiBjdXJyZW50IGJyb3dzZXJcclxuICogQHJldHVybiB0cnVlIGlmIGNvb2tpZSBpcyBlbmFibGVkIHdpdGhpbiBjdXJyZW50IGJyb3dzZXJcclxuICovXHJcbmZ1bmN0aW9uIGFyZUNvb2tpZXNFbmFibGVkKCkge1xyXG4gICAgaWYgKCFuYXZpZ2F0b3IgfHwgIW5hdmlnYXRvci5jb29raWVFbmFibGVkKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIEVSUk9SX05BTUUgPSAnRmlyZWJhc2VFcnJvcic7XHJcbi8vIEJhc2VkIG9uIGNvZGUgZnJvbTpcclxuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRXJyb3IjQ3VzdG9tX0Vycm9yX1R5cGVzXHJcbnZhciBGaXJlYmFzZUVycm9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKEZpcmViYXNlRXJyb3IsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBGaXJlYmFzZUVycm9yKGNvZGUsIG1lc3NhZ2UsIGN1c3RvbURhdGEpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmNvZGUgPSBjb2RlO1xyXG4gICAgICAgIF90aGlzLmN1c3RvbURhdGEgPSBjdXN0b21EYXRhO1xyXG4gICAgICAgIF90aGlzLm5hbWUgPSBFUlJPUl9OQU1FO1xyXG4gICAgICAgIC8vIEZpeCBGb3IgRVM1XHJcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL01pY3Jvc29mdC9UeXBlU2NyaXB0LXdpa2kvYmxvYi9tYXN0ZXIvQnJlYWtpbmctQ2hhbmdlcy5tZCNleHRlbmRpbmctYnVpbHQtaW5zLWxpa2UtZXJyb3ItYXJyYXktYW5kLW1hcC1tYXktbm8tbG9uZ2VyLXdvcmtcclxuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YoX3RoaXMsIEZpcmViYXNlRXJyb3IucHJvdG90eXBlKTtcclxuICAgICAgICAvLyBNYWludGFpbnMgcHJvcGVyIHN0YWNrIHRyYWNlIGZvciB3aGVyZSBvdXIgZXJyb3Igd2FzIHRocm93bi5cclxuICAgICAgICAvLyBPbmx5IGF2YWlsYWJsZSBvbiBWOC5cclxuICAgICAgICBpZiAoRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UpIHtcclxuICAgICAgICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UoX3RoaXMsIEVycm9yRmFjdG9yeS5wcm90b3R5cGUuY3JlYXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIEZpcmViYXNlRXJyb3I7XHJcbn0oRXJyb3IpKTtcclxudmFyIEVycm9yRmFjdG9yeSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEVycm9yRmFjdG9yeShzZXJ2aWNlLCBzZXJ2aWNlTmFtZSwgZXJyb3JzKSB7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlID0gc2VydmljZTtcclxuICAgICAgICB0aGlzLnNlcnZpY2VOYW1lID0gc2VydmljZU5hbWU7XHJcbiAgICAgICAgdGhpcy5lcnJvcnMgPSBlcnJvcnM7XHJcbiAgICB9XHJcbiAgICBFcnJvckZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uIChjb2RlKSB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBkYXRhW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgY3VzdG9tRGF0YSA9IGRhdGFbMF0gfHwge307XHJcbiAgICAgICAgdmFyIGZ1bGxDb2RlID0gdGhpcy5zZXJ2aWNlICsgXCIvXCIgKyBjb2RlO1xyXG4gICAgICAgIHZhciB0ZW1wbGF0ZSA9IHRoaXMuZXJyb3JzW2NvZGVdO1xyXG4gICAgICAgIHZhciBtZXNzYWdlID0gdGVtcGxhdGUgPyByZXBsYWNlVGVtcGxhdGUodGVtcGxhdGUsIGN1c3RvbURhdGEpIDogJ0Vycm9yJztcclxuICAgICAgICAvLyBTZXJ2aWNlIE5hbWU6IEVycm9yIG1lc3NhZ2UgKHNlcnZpY2UvY29kZSkuXHJcbiAgICAgICAgdmFyIGZ1bGxNZXNzYWdlID0gdGhpcy5zZXJ2aWNlTmFtZSArIFwiOiBcIiArIG1lc3NhZ2UgKyBcIiAoXCIgKyBmdWxsQ29kZSArIFwiKS5cIjtcclxuICAgICAgICB2YXIgZXJyb3IgPSBuZXcgRmlyZWJhc2VFcnJvcihmdWxsQ29kZSwgZnVsbE1lc3NhZ2UsIGN1c3RvbURhdGEpO1xyXG4gICAgICAgIHJldHVybiBlcnJvcjtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRXJyb3JGYWN0b3J5O1xyXG59KCkpO1xyXG5mdW5jdGlvbiByZXBsYWNlVGVtcGxhdGUodGVtcGxhdGUsIGRhdGEpIHtcclxuICAgIHJldHVybiB0ZW1wbGF0ZS5yZXBsYWNlKFBBVFRFUk4sIGZ1bmN0aW9uIChfLCBrZXkpIHtcclxuICAgICAgICB2YXIgdmFsdWUgPSBkYXRhW2tleV07XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlICE9IG51bGwgPyBTdHJpbmcodmFsdWUpIDogXCI8XCIgKyBrZXkgKyBcIj8+XCI7XHJcbiAgICB9KTtcclxufVxyXG52YXIgUEFUVEVSTiA9IC9cXHtcXCQoW159XSspfS9nO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRXZhbHVhdGVzIGEgSlNPTiBzdHJpbmcgaW50byBhIGphdmFzY3JpcHQgb2JqZWN0LlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyIEEgc3RyaW5nIGNvbnRhaW5pbmcgSlNPTi5cclxuICogQHJldHVybiB7Kn0gVGhlIGphdmFzY3JpcHQgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgc3BlY2lmaWVkIEpTT04uXHJcbiAqL1xyXG5mdW5jdGlvbiBqc29uRXZhbChzdHIpIHtcclxuICAgIHJldHVybiBKU09OLnBhcnNlKHN0cik7XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgSlNPTiByZXByZXNlbnRpbmcgYSBqYXZhc2NyaXB0IG9iamVjdC5cclxuICogQHBhcmFtIHsqfSBkYXRhIEphdmFzY3JpcHQgb2JqZWN0IHRvIGJlIHN0cmluZ2lmaWVkLlxyXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBKU09OIGNvbnRlbnRzIG9mIHRoZSBvYmplY3QuXHJcbiAqL1xyXG5mdW5jdGlvbiBzdHJpbmdpZnkoZGF0YSkge1xyXG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGRhdGEpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gaW50byBjb25zdGl0dWVudCBwYXJ0cy5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiB3aXRoIGludmFsaWQgLyBpbmNvbXBsZXRlIGNsYWltcyBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbnZhciBkZWNvZGUgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIHZhciBoZWFkZXIgPSB7fSwgY2xhaW1zID0ge30sIGRhdGEgPSB7fSwgc2lnbmF0dXJlID0gJyc7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHZhciBwYXJ0cyA9IHRva2VuLnNwbGl0KCcuJyk7XHJcbiAgICAgICAgaGVhZGVyID0ganNvbkV2YWwoYmFzZTY0RGVjb2RlKHBhcnRzWzBdKSB8fCAnJyk7XHJcbiAgICAgICAgY2xhaW1zID0ganNvbkV2YWwoYmFzZTY0RGVjb2RlKHBhcnRzWzFdKSB8fCAnJyk7XHJcbiAgICAgICAgc2lnbmF0dXJlID0gcGFydHNbMl07XHJcbiAgICAgICAgZGF0YSA9IGNsYWltc1snZCddIHx8IHt9O1xyXG4gICAgICAgIGRlbGV0ZSBjbGFpbXNbJ2QnXTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7IH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaGVhZGVyOiBoZWFkZXIsXHJcbiAgICAgICAgY2xhaW1zOiBjbGFpbXMsXHJcbiAgICAgICAgZGF0YTogZGF0YSxcclxuICAgICAgICBzaWduYXR1cmU6IHNpZ25hdHVyZVxyXG4gICAgfTtcclxufTtcclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBhbmQgY2hlY2tzIHRoZSB2YWxpZGl0eSBvZiBpdHMgdGltZS1iYXNlZCBjbGFpbXMuIFdpbGwgcmV0dXJuIHRydWUgaWYgdGhlXHJcbiAqIHRva2VuIGlzIHdpdGhpbiB0aGUgdGltZSB3aW5kb3cgYXV0aG9yaXplZCBieSB0aGUgJ25iZicgKG5vdC1iZWZvcmUpIGFuZCAnaWF0JyAoaXNzdWVkLWF0KSBjbGFpbXMuXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gYSBmYWxzZSBuZWdhdGl2ZSBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbnZhciBpc1ZhbGlkVGltZXN0YW1wID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICB2YXIgY2xhaW1zID0gZGVjb2RlKHRva2VuKS5jbGFpbXM7XHJcbiAgICB2YXIgbm93ID0gTWF0aC5mbG9vcihuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDApO1xyXG4gICAgdmFyIHZhbGlkU2luY2UgPSAwLCB2YWxpZFVudGlsID0gMDtcclxuICAgIGlmICh0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIGlmIChjbGFpbXMuaGFzT3duUHJvcGVydHkoJ25iZicpKSB7XHJcbiAgICAgICAgICAgIHZhbGlkU2luY2UgPSBjbGFpbXNbJ25iZiddO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjbGFpbXMuaGFzT3duUHJvcGVydHkoJ2lhdCcpKSB7XHJcbiAgICAgICAgICAgIHZhbGlkU2luY2UgPSBjbGFpbXNbJ2lhdCddO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCdleHAnKSkge1xyXG4gICAgICAgICAgICB2YWxpZFVudGlsID0gY2xhaW1zWydleHAnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIHRva2VuIHdpbGwgZXhwaXJlIGFmdGVyIDI0aCBieSBkZWZhdWx0XHJcbiAgICAgICAgICAgIHZhbGlkVW50aWwgPSB2YWxpZFNpbmNlICsgODY0MDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuICghIW5vdyAmJlxyXG4gICAgICAgICEhdmFsaWRTaW5jZSAmJlxyXG4gICAgICAgICEhdmFsaWRVbnRpbCAmJlxyXG4gICAgICAgIG5vdyA+PSB2YWxpZFNpbmNlICYmXHJcbiAgICAgICAgbm93IDw9IHZhbGlkVW50aWwpO1xyXG59O1xyXG4vKipcclxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGFuZCByZXR1cm5zIGl0cyBpc3N1ZWQgYXQgdGltZSBpZiB2YWxpZCwgbnVsbCBvdGhlcndpc2UuXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gbnVsbCBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbnZhciBpc3N1ZWRBdFRpbWUgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIHZhciBjbGFpbXMgPSBkZWNvZGUodG9rZW4pLmNsYWltcztcclxuICAgIGlmICh0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0JyAmJiBjbGFpbXMuaGFzT3duUHJvcGVydHkoJ2lhdCcpKSB7XHJcbiAgICAgICAgcmV0dXJuIGNsYWltc1snaWF0J107XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufTtcclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBhbmQgY2hlY2tzIHRoZSB2YWxpZGl0eSBvZiBpdHMgZm9ybWF0LiBFeHBlY3RzIGEgdmFsaWQgaXNzdWVkLWF0IHRpbWUuXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gYSBmYWxzZSBuZWdhdGl2ZSBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbnZhciBpc1ZhbGlkRm9ybWF0ID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICB2YXIgZGVjb2RlZCA9IGRlY29kZSh0b2tlbiksIGNsYWltcyA9IGRlY29kZWQuY2xhaW1zO1xyXG4gICAgcmV0dXJuICEhY2xhaW1zICYmIHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnICYmIGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnaWF0Jyk7XHJcbn07XHJcbi8qKlxyXG4gKiBBdHRlbXB0cyB0byBwZWVyIGludG8gYW4gYXV0aCB0b2tlbiBhbmQgZGV0ZXJtaW5lIGlmIGl0J3MgYW4gYWRtaW4gYXV0aCB0b2tlbiBieSBsb29raW5nIGF0IHRoZSBjbGFpbXMgcG9ydGlvbi5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiBhIGZhbHNlIG5lZ2F0aXZlIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxudmFyIGlzQWRtaW4gPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIHZhciBjbGFpbXMgPSBkZWNvZGUodG9rZW4pLmNsYWltcztcclxuICAgIHJldHVybiB0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0JyAmJiBjbGFpbXNbJ2FkbWluJ10gPT09IHRydWU7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGNvbnRhaW5zKG9iaiwga2V5KSB7XHJcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcclxufVxyXG5mdW5jdGlvbiBzYWZlR2V0KG9iaiwga2V5KSB7XHJcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgIHJldHVybiBvYmpba2V5XTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gaXNFbXB0eShvYmopIHtcclxuICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcclxuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuZnVuY3Rpb24gbWFwKG9iaiwgZm4sIGNvbnRleHRPYmopIHtcclxuICAgIHZhciByZXMgPSB7fTtcclxuICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcclxuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgICAgICByZXNba2V5XSA9IGZuLmNhbGwoY29udGV4dE9iaiwgb2JqW2tleV0sIGtleSwgb2JqKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgcXVlcnlzdHJpbmctZm9ybWF0dGVkIHN0cmluZyAoZS5nLiAmYXJnPXZhbCZhcmcyPXZhbDIpIGZyb20gYVxyXG4gKiBwYXJhbXMgb2JqZWN0IChlLmcuIHthcmc6ICd2YWwnLCBhcmcyOiAndmFsMid9KVxyXG4gKiBOb3RlOiBZb3UgbXVzdCBwcmVwZW5kIGl0IHdpdGggPyB3aGVuIGFkZGluZyBpdCB0byBhIFVSTC5cclxuICovXHJcbmZ1bmN0aW9uIHF1ZXJ5c3RyaW5nKHF1ZXJ5c3RyaW5nUGFyYW1zKSB7XHJcbiAgICB2YXIgcGFyYW1zID0gW107XHJcbiAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgICAgICAgIHZhbHVlLmZvckVhY2goZnVuY3Rpb24gKGFycmF5VmFsKSB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXMucHVzaChlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChhcnJheVZhbCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHBhcmFtcy5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3QuZW50cmllcyhxdWVyeXN0cmluZ1BhcmFtcyk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgdmFyIF9iID0gX2FbX2ldLCBrZXkgPSBfYlswXSwgdmFsdWUgPSBfYlsxXTtcclxuICAgICAgICBfbG9vcF8xKGtleSwgdmFsdWUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBhcmFtcy5sZW5ndGggPyAnJicgKyBwYXJhbXMuam9pbignJicpIDogJyc7XHJcbn1cclxuLyoqXHJcbiAqIERlY29kZXMgYSBxdWVyeXN0cmluZyAoZS5nLiA/YXJnPXZhbCZhcmcyPXZhbDIpIGludG8gYSBwYXJhbXMgb2JqZWN0XHJcbiAqIChlLmcuIHthcmc6ICd2YWwnLCBhcmcyOiAndmFsMid9KVxyXG4gKi9cclxuZnVuY3Rpb24gcXVlcnlzdHJpbmdEZWNvZGUocXVlcnlzdHJpbmcpIHtcclxuICAgIHZhciBvYmogPSB7fTtcclxuICAgIHZhciB0b2tlbnMgPSBxdWVyeXN0cmluZy5yZXBsYWNlKC9eXFw/LywgJycpLnNwbGl0KCcmJyk7XHJcbiAgICB0b2tlbnMuZm9yRWFjaChmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgICAgICBpZiAodG9rZW4pIHtcclxuICAgICAgICAgICAgdmFyIGtleSA9IHRva2VuLnNwbGl0KCc9Jyk7XHJcbiAgICAgICAgICAgIG9ialtrZXlbMF1dID0ga2V5WzFdO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIG9iajtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQGZpbGVvdmVydmlldyBTSEEtMSBjcnlwdG9ncmFwaGljIGhhc2guXHJcbiAqIFZhcmlhYmxlIG5hbWVzIGZvbGxvdyB0aGUgbm90YXRpb24gaW4gRklQUyBQVUIgMTgwLTM6XHJcbiAqIGh0dHA6Ly9jc3JjLm5pc3QuZ292L3B1YmxpY2F0aW9ucy9maXBzL2ZpcHMxODAtMy9maXBzMTgwLTNfZmluYWwucGRmLlxyXG4gKlxyXG4gKiBVc2FnZTpcclxuICogICB2YXIgc2hhMSA9IG5ldyBzaGExKCk7XHJcbiAqICAgc2hhMS51cGRhdGUoYnl0ZXMpO1xyXG4gKiAgIHZhciBoYXNoID0gc2hhMS5kaWdlc3QoKTtcclxuICpcclxuICogUGVyZm9ybWFuY2U6XHJcbiAqICAgQ2hyb21lIDIzOiAgIH40MDAgTWJpdC9zXHJcbiAqICAgRmlyZWZveCAxNjogIH4yNTAgTWJpdC9zXHJcbiAqXHJcbiAqL1xyXG4vKipcclxuICogU0hBLTEgY3J5cHRvZ3JhcGhpYyBoYXNoIGNvbnN0cnVjdG9yLlxyXG4gKlxyXG4gKiBUaGUgcHJvcGVydGllcyBkZWNsYXJlZCBoZXJlIGFyZSBkaXNjdXNzZWQgaW4gdGhlIGFib3ZlIGFsZ29yaXRobSBkb2N1bWVudC5cclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBmaW5hbFxyXG4gKiBAc3RydWN0XHJcbiAqL1xyXG52YXIgU2hhMSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFNoYTEoKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSG9sZHMgdGhlIHByZXZpb3VzIHZhbHVlcyBvZiBhY2N1bXVsYXRlZCB2YXJpYWJsZXMgYS1lIGluIHRoZSBjb21wcmVzc19cclxuICAgICAgICAgKiBmdW5jdGlvbi5cclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuY2hhaW5fID0gW107XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQSBidWZmZXIgaG9sZGluZyB0aGUgcGFydGlhbGx5IGNvbXB1dGVkIGhhc2ggcmVzdWx0LlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5idWZfID0gW107XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQW4gYXJyYXkgb2YgODAgYnl0ZXMsIGVhY2ggYSBwYXJ0IG9mIHRoZSBtZXNzYWdlIHRvIGJlIGhhc2hlZC4gIFJlZmVycmVkIHRvXHJcbiAgICAgICAgICogYXMgdGhlIG1lc3NhZ2Ugc2NoZWR1bGUgaW4gdGhlIGRvY3MuXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLldfID0gW107XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ29udGFpbnMgZGF0YSBuZWVkZWQgdG8gcGFkIG1lc3NhZ2VzIGxlc3MgdGhhbiA2NCBieXRlcy5cclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMucGFkXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwcml2YXRlIHtudW1iZXJ9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5pbmJ1Zl8gPSAwO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwcml2YXRlIHtudW1iZXJ9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy50b3RhbF8gPSAwO1xyXG4gICAgICAgIHRoaXMuYmxvY2tTaXplID0gNTEyIC8gODtcclxuICAgICAgICB0aGlzLnBhZF9bMF0gPSAxMjg7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCB0aGlzLmJsb2NrU2l6ZTsgKytpKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGFkX1tpXSA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVzZXQoKTtcclxuICAgIH1cclxuICAgIFNoYTEucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzBdID0gMHg2NzQ1MjMwMTtcclxuICAgICAgICB0aGlzLmNoYWluX1sxXSA9IDB4ZWZjZGFiODk7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMl0gPSAweDk4YmFkY2ZlO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzNdID0gMHgxMDMyNTQ3NjtcclxuICAgICAgICB0aGlzLmNoYWluX1s0XSA9IDB4YzNkMmUxZjA7XHJcbiAgICAgICAgdGhpcy5pbmJ1Zl8gPSAwO1xyXG4gICAgICAgIHRoaXMudG90YWxfID0gMDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEludGVybmFsIGNvbXByZXNzIGhlbHBlciBmdW5jdGlvbi5cclxuICAgICAqIEBwYXJhbSBidWYgQmxvY2sgdG8gY29tcHJlc3MuXHJcbiAgICAgKiBAcGFyYW0gb2Zmc2V0IE9mZnNldCBvZiB0aGUgYmxvY2sgaW4gdGhlIGJ1ZmZlci5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIFNoYTEucHJvdG90eXBlLmNvbXByZXNzXyA9IGZ1bmN0aW9uIChidWYsIG9mZnNldCkge1xyXG4gICAgICAgIGlmICghb2Zmc2V0KSB7XHJcbiAgICAgICAgICAgIG9mZnNldCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBXID0gdGhpcy5XXztcclxuICAgICAgICAvLyBnZXQgMTYgYmlnIGVuZGlhbiB3b3Jkc1xyXG4gICAgICAgIGlmICh0eXBlb2YgYnVmID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDE2OyBpKyspIHtcclxuICAgICAgICAgICAgICAgIC8vIFRPRE8odXNlcik6IFtidWcgODE0MDEyMl0gUmVjZW50IHZlcnNpb25zIG9mIFNhZmFyaSBmb3IgTWFjIE9TIGFuZCBpT1NcclxuICAgICAgICAgICAgICAgIC8vIGhhdmUgYSBidWcgdGhhdCB0dXJucyB0aGUgcG9zdC1pbmNyZW1lbnQgKysgb3BlcmF0b3IgaW50byBwcmUtaW5jcmVtZW50XHJcbiAgICAgICAgICAgICAgICAvLyBkdXJpbmcgSklUIGNvbXBpbGF0aW9uLiAgV2UgaGF2ZSBjb2RlIHRoYXQgZGVwZW5kcyBoZWF2aWx5IG9uIFNIQS0xIGZvclxyXG4gICAgICAgICAgICAgICAgLy8gY29ycmVjdG5lc3MgYW5kIHdoaWNoIGlzIGFmZmVjdGVkIGJ5IHRoaXMgYnVnLCBzbyBJJ3ZlIHJlbW92ZWQgYWxsIHVzZXNcclxuICAgICAgICAgICAgICAgIC8vIG9mIHBvc3QtaW5jcmVtZW50ICsrIGluIHdoaWNoIHRoZSByZXN1bHQgdmFsdWUgaXMgdXNlZC4gIFdlIGNhbiByZXZlcnRcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMgY2hhbmdlIG9uY2UgdGhlIFNhZmFyaSBidWdcclxuICAgICAgICAgICAgICAgIC8vIChodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTA5MDM2KSBoYXMgYmVlbiBmaXhlZCBhbmRcclxuICAgICAgICAgICAgICAgIC8vIG1vc3QgY2xpZW50cyBoYXZlIGJlZW4gdXBkYXRlZC5cclxuICAgICAgICAgICAgICAgIFdbaV0gPVxyXG4gICAgICAgICAgICAgICAgICAgIChidWYuY2hhckNvZGVBdChvZmZzZXQpIDw8IDI0KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWYuY2hhckNvZGVBdChvZmZzZXQgKyAxKSA8PCAxNikgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoYnVmLmNoYXJDb2RlQXQob2Zmc2V0ICsgMikgPDwgOCkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBidWYuY2hhckNvZGVBdChvZmZzZXQgKyAzKTtcclxuICAgICAgICAgICAgICAgIG9mZnNldCArPSA0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDE2OyBpKyspIHtcclxuICAgICAgICAgICAgICAgIFdbaV0gPVxyXG4gICAgICAgICAgICAgICAgICAgIChidWZbb2Zmc2V0XSA8PCAyNCkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoYnVmW29mZnNldCArIDFdIDw8IDE2KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWZbb2Zmc2V0ICsgMl0gPDwgOCkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBidWZbb2Zmc2V0ICsgM107XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gNDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBleHBhbmQgdG8gODAgd29yZHNcclxuICAgICAgICBmb3IgKHZhciBpID0gMTY7IGkgPCA4MDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciB0ID0gV1tpIC0gM10gXiBXW2kgLSA4XSBeIFdbaSAtIDE0XSBeIFdbaSAtIDE2XTtcclxuICAgICAgICAgICAgV1tpXSA9ICgodCA8PCAxKSB8ICh0ID4+PiAzMSkpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGEgPSB0aGlzLmNoYWluX1swXTtcclxuICAgICAgICB2YXIgYiA9IHRoaXMuY2hhaW5fWzFdO1xyXG4gICAgICAgIHZhciBjID0gdGhpcy5jaGFpbl9bMl07XHJcbiAgICAgICAgdmFyIGQgPSB0aGlzLmNoYWluX1szXTtcclxuICAgICAgICB2YXIgZSA9IHRoaXMuY2hhaW5fWzRdO1xyXG4gICAgICAgIHZhciBmLCBrO1xyXG4gICAgICAgIC8vIFRPRE8odXNlcik6IFRyeSB0byB1bnJvbGwgdGhpcyBsb29wIHRvIHNwZWVkIHVwIHRoZSBjb21wdXRhdGlvbi5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDgwOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGkgPCA0MCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgPCAyMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSBkIF4gKGIgJiAoYyBeIGQpKTtcclxuICAgICAgICAgICAgICAgICAgICBrID0gMHg1YTgyNzk5OTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSBiIF4gYyBeIGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4NmVkOWViYTE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSA8IDYwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZiA9IChiICYgYykgfCAoZCAmIChiIHwgYykpO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSAweDhmMWJiY2RjO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZiA9IGIgXiBjIF4gZDtcclxuICAgICAgICAgICAgICAgICAgICBrID0gMHhjYTYyYzFkNjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgdCA9ICgoKGEgPDwgNSkgfCAoYSA+Pj4gMjcpKSArIGYgKyBlICsgayArIFdbaV0pICYgMHhmZmZmZmZmZjtcclxuICAgICAgICAgICAgZSA9IGQ7XHJcbiAgICAgICAgICAgIGQgPSBjO1xyXG4gICAgICAgICAgICBjID0gKChiIDw8IDMwKSB8IChiID4+PiAyKSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgICAgICBiID0gYTtcclxuICAgICAgICAgICAgYSA9IHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2hhaW5fWzBdID0gKHRoaXMuY2hhaW5fWzBdICsgYSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzFdID0gKHRoaXMuY2hhaW5fWzFdICsgYikgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzJdID0gKHRoaXMuY2hhaW5fWzJdICsgYykgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzNdID0gKHRoaXMuY2hhaW5fWzNdICsgZCkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzRdID0gKHRoaXMuY2hhaW5fWzRdICsgZSkgJiAweGZmZmZmZmZmO1xyXG4gICAgfTtcclxuICAgIFNoYTEucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChieXRlcywgbGVuZ3RoKSB7XHJcbiAgICAgICAgLy8gVE9ETyhqb2hubGVueik6IHRpZ2h0ZW4gdGhlIGZ1bmN0aW9uIHNpZ25hdHVyZSBhbmQgcmVtb3ZlIHRoaXMgY2hlY2tcclxuICAgICAgICBpZiAoYnl0ZXMgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBsZW5ndGggPSBieXRlcy5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBsZW5ndGhNaW51c0Jsb2NrID0gbGVuZ3RoIC0gdGhpcy5ibG9ja1NpemU7XHJcbiAgICAgICAgdmFyIG4gPSAwO1xyXG4gICAgICAgIC8vIFVzaW5nIGxvY2FsIGluc3RlYWQgb2YgbWVtYmVyIHZhcmlhYmxlcyBnaXZlcyB+NSUgc3BlZWR1cCBvbiBGaXJlZm94IDE2LlxyXG4gICAgICAgIHZhciBidWYgPSB0aGlzLmJ1Zl87XHJcbiAgICAgICAgdmFyIGluYnVmID0gdGhpcy5pbmJ1Zl87XHJcbiAgICAgICAgLy8gVGhlIG91dGVyIHdoaWxlIGxvb3Agc2hvdWxkIGV4ZWN1dGUgYXQgbW9zdCB0d2ljZS5cclxuICAgICAgICB3aGlsZSAobiA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAvLyBXaGVuIHdlIGhhdmUgbm8gZGF0YSBpbiB0aGUgYmxvY2sgdG8gdG9wIHVwLCB3ZSBjYW4gZGlyZWN0bHkgcHJvY2VzcyB0aGVcclxuICAgICAgICAgICAgLy8gaW5wdXQgYnVmZmVyIChhc3N1bWluZyBpdCBjb250YWlucyBzdWZmaWNpZW50IGRhdGEpLiBUaGlzIGdpdmVzIH4yNSVcclxuICAgICAgICAgICAgLy8gc3BlZWR1cCBvbiBDaHJvbWUgMjMgYW5kIH4xNSUgc3BlZWR1cCBvbiBGaXJlZm94IDE2LCBidXQgcmVxdWlyZXMgdGhhdFxyXG4gICAgICAgICAgICAvLyB0aGUgZGF0YSBpcyBwcm92aWRlZCBpbiBsYXJnZSBjaHVua3MgKG9yIGluIG11bHRpcGxlcyBvZiA2NCBieXRlcykuXHJcbiAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKG4gPD0gbGVuZ3RoTWludXNCbG9jaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHJlc3NfKGJ5dGVzLCBuKTtcclxuICAgICAgICAgICAgICAgICAgICBuICs9IHRoaXMuYmxvY2tTaXplO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYnl0ZXMgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAobiA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1ZltpbmJ1Zl0gPSBieXRlcy5jaGFyQ29kZUF0KG4pO1xyXG4gICAgICAgICAgICAgICAgICAgICsraW5idWY7XHJcbiAgICAgICAgICAgICAgICAgICAgKytuO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gdGhpcy5ibG9ja1NpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wcmVzc18oYnVmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5idWYgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBKdW1wIHRvIHRoZSBvdXRlciBsb29wIHNvIHdlIHVzZSB0aGUgZnVsbC1ibG9jayBvcHRpbWl6YXRpb24uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChuIDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVmW2luYnVmXSA9IGJ5dGVzW25dO1xyXG4gICAgICAgICAgICAgICAgICAgICsraW5idWY7XHJcbiAgICAgICAgICAgICAgICAgICAgKytuO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gdGhpcy5ibG9ja1NpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wcmVzc18oYnVmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5idWYgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBKdW1wIHRvIHRoZSBvdXRlciBsb29wIHNvIHdlIHVzZSB0aGUgZnVsbC1ibG9jayBvcHRpbWl6YXRpb24uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmluYnVmXyA9IGluYnVmO1xyXG4gICAgICAgIHRoaXMudG90YWxfICs9IGxlbmd0aDtcclxuICAgIH07XHJcbiAgICAvKiogQG92ZXJyaWRlICovXHJcbiAgICBTaGExLnByb3RvdHlwZS5kaWdlc3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGRpZ2VzdCA9IFtdO1xyXG4gICAgICAgIHZhciB0b3RhbEJpdHMgPSB0aGlzLnRvdGFsXyAqIDg7XHJcbiAgICAgICAgLy8gQWRkIHBhZCAweDgwIDB4MDAqLlxyXG4gICAgICAgIGlmICh0aGlzLmluYnVmXyA8IDU2KSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKHRoaXMucGFkXywgNTYgLSB0aGlzLmluYnVmXyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSh0aGlzLnBhZF8sIHRoaXMuYmxvY2tTaXplIC0gKHRoaXMuaW5idWZfIC0gNTYpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQWRkICMgYml0cy5cclxuICAgICAgICBmb3IgKHZhciBpID0gdGhpcy5ibG9ja1NpemUgLSAxOyBpID49IDU2OyBpLS0pIHtcclxuICAgICAgICAgICAgdGhpcy5idWZfW2ldID0gdG90YWxCaXRzICYgMjU1O1xyXG4gICAgICAgICAgICB0b3RhbEJpdHMgLz0gMjU2OyAvLyBEb24ndCB1c2UgYml0LXNoaWZ0aW5nIGhlcmUhXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29tcHJlc3NfKHRoaXMuYnVmXyk7XHJcbiAgICAgICAgdmFyIG4gPSAwO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNTsgaSsrKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAyNDsgaiA+PSAwOyBqIC09IDgpIHtcclxuICAgICAgICAgICAgICAgIGRpZ2VzdFtuXSA9ICh0aGlzLmNoYWluX1tpXSA+PiBqKSAmIDI1NTtcclxuICAgICAgICAgICAgICAgICsrbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZGlnZXN0O1xyXG4gICAgfTtcclxuICAgIHJldHVybiBTaGExO1xyXG59KCkpO1xuXG4vKipcclxuICogSGVscGVyIHRvIG1ha2UgYSBTdWJzY3JpYmUgZnVuY3Rpb24gKGp1c3QgbGlrZSBQcm9taXNlIGhlbHBzIG1ha2UgYVxyXG4gKiBUaGVuYWJsZSkuXHJcbiAqXHJcbiAqIEBwYXJhbSBleGVjdXRvciBGdW5jdGlvbiB3aGljaCBjYW4gbWFrZSBjYWxscyB0byBhIHNpbmdsZSBPYnNlcnZlclxyXG4gKiAgICAgYXMgYSBwcm94eS5cclxuICogQHBhcmFtIG9uTm9PYnNlcnZlcnMgQ2FsbGJhY2sgd2hlbiBjb3VudCBvZiBPYnNlcnZlcnMgZ29lcyB0byB6ZXJvLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlU3Vic2NyaWJlKGV4ZWN1dG9yLCBvbk5vT2JzZXJ2ZXJzKSB7XHJcbiAgICB2YXIgcHJveHkgPSBuZXcgT2JzZXJ2ZXJQcm94eShleGVjdXRvciwgb25Ob09ic2VydmVycyk7XHJcbiAgICByZXR1cm4gcHJveHkuc3Vic2NyaWJlLmJpbmQocHJveHkpO1xyXG59XHJcbi8qKlxyXG4gKiBJbXBsZW1lbnQgZmFuLW91dCBmb3IgYW55IG51bWJlciBvZiBPYnNlcnZlcnMgYXR0YWNoZWQgdmlhIGEgc3Vic2NyaWJlXHJcbiAqIGZ1bmN0aW9uLlxyXG4gKi9cclxudmFyIE9ic2VydmVyUHJveHkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBleGVjdXRvciBGdW5jdGlvbiB3aGljaCBjYW4gbWFrZSBjYWxscyB0byBhIHNpbmdsZSBPYnNlcnZlclxyXG4gICAgICogICAgIGFzIGEgcHJveHkuXHJcbiAgICAgKiBAcGFyYW0gb25Ob09ic2VydmVycyBDYWxsYmFjayB3aGVuIGNvdW50IG9mIE9ic2VydmVycyBnb2VzIHRvIHplcm8uXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIE9ic2VydmVyUHJveHkoZXhlY3V0b3IsIG9uTm9PYnNlcnZlcnMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gW107XHJcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZXMgPSBbXTtcclxuICAgICAgICB0aGlzLm9ic2VydmVyQ291bnQgPSAwO1xyXG4gICAgICAgIC8vIE1pY3JvLXRhc2sgc2NoZWR1bGluZyBieSBjYWxsaW5nIHRhc2sudGhlbigpLlxyXG4gICAgICAgIHRoaXMudGFzayA9IFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgIHRoaXMuZmluYWxpemVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5vbk5vT2JzZXJ2ZXJzID0gb25Ob09ic2VydmVycztcclxuICAgICAgICAvLyBDYWxsIHRoZSBleGVjdXRvciBhc3luY2hyb25vdXNseSBzbyBzdWJzY3JpYmVycyB0aGF0IGFyZSBjYWxsZWRcclxuICAgICAgICAvLyBzeW5jaHJvbm91c2x5IGFmdGVyIHRoZSBjcmVhdGlvbiBvZiB0aGUgc3Vic2NyaWJlIGZ1bmN0aW9uXHJcbiAgICAgICAgLy8gY2FuIHN0aWxsIHJlY2VpdmUgdGhlIHZlcnkgZmlyc3QgdmFsdWUgZ2VuZXJhdGVkIGluIHRoZSBleGVjdXRvci5cclxuICAgICAgICB0aGlzLnRhc2tcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBleGVjdXRvcihfdGhpcyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmVycm9yKGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgT2JzZXJ2ZXJQcm94eS5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaE9ic2VydmVyKGZ1bmN0aW9uIChvYnNlcnZlcikge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0KHZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBPYnNlcnZlclByb3h5LnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaE9ic2VydmVyKGZ1bmN0aW9uIChvYnNlcnZlcikge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jbG9zZShlcnJvcik7XHJcbiAgICB9O1xyXG4gICAgT2JzZXJ2ZXJQcm94eS5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoT2JzZXJ2ZXIoZnVuY3Rpb24gKG9ic2VydmVyKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU3Vic2NyaWJlIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gYWRkIGFuIE9ic2VydmVyIHRvIHRoZSBmYW4tb3V0IGxpc3QuXHJcbiAgICAgKlxyXG4gICAgICogLSBXZSByZXF1aXJlIHRoYXQgbm8gZXZlbnQgaXMgc2VudCB0byBhIHN1YnNjcmliZXIgc3ljaHJvbm91c2x5IHRvIHRoZWlyXHJcbiAgICAgKiAgIGNhbGwgdG8gc3Vic2NyaWJlKCkuXHJcbiAgICAgKi9cclxuICAgIE9ic2VydmVyUHJveHkucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uIChuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgb2JzZXJ2ZXI7XHJcbiAgICAgICAgaWYgKG5leHRPck9ic2VydmVyID09PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgZXJyb3IgPT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgICAgICBjb21wbGV0ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBPYnNlcnZlci4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQXNzZW1ibGUgYW4gT2JzZXJ2ZXIgb2JqZWN0IHdoZW4gcGFzc2VkIGFzIGNhbGxiYWNrIGZ1bmN0aW9ucy5cclxuICAgICAgICBpZiAoaW1wbGVtZW50c0FueU1ldGhvZHMobmV4dE9yT2JzZXJ2ZXIsIFtcclxuICAgICAgICAgICAgJ25leHQnLFxyXG4gICAgICAgICAgICAnZXJyb3InLFxyXG4gICAgICAgICAgICAnY29tcGxldGUnXHJcbiAgICAgICAgXSkpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIgPSBuZXh0T3JPYnNlcnZlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyID0ge1xyXG4gICAgICAgICAgICAgICAgbmV4dDogbmV4dE9yT2JzZXJ2ZXIsXHJcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IsXHJcbiAgICAgICAgICAgICAgICBjb21wbGV0ZTogY29tcGxldGVcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9ic2VydmVyLm5leHQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0ID0gbm9vcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9ic2VydmVyLmVycm9yID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IgPSBub29wO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2JzZXJ2ZXIuY29tcGxldGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSA9IG5vb3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciB1bnN1YiA9IHRoaXMudW5zdWJzY3JpYmVPbmUuYmluZCh0aGlzLCB0aGlzLm9ic2VydmVycy5sZW5ndGgpO1xyXG4gICAgICAgIC8vIEF0dGVtcHQgdG8gc3Vic2NyaWJlIHRvIGEgdGVybWluYXRlZCBPYnNlcnZhYmxlIC0gd2VcclxuICAgICAgICAvLyBqdXN0IHJlc3BvbmQgdG8gdGhlIE9ic2VydmVyIHdpdGggdGhlIGZpbmFsIGVycm9yIG9yIGNvbXBsZXRlXHJcbiAgICAgICAgLy8gZXZlbnQuXHJcbiAgICAgICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICAgICAgdGhpcy50YXNrLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuZmluYWxFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5lcnJvcihfdGhpcy5maW5hbEVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBub3RoaW5nXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm9ic2VydmVycy5wdXNoKG9ic2VydmVyKTtcclxuICAgICAgICByZXR1cm4gdW5zdWI7XHJcbiAgICB9O1xyXG4gICAgLy8gVW5zdWJzY3JpYmUgaXMgc3luY2hyb25vdXMgLSB3ZSBndWFyYW50ZWUgdGhhdCBubyBldmVudHMgYXJlIHNlbnQgdG9cclxuICAgIC8vIGFueSB1bnN1YnNjcmliZWQgT2JzZXJ2ZXIuXHJcbiAgICBPYnNlcnZlclByb3h5LnByb3RvdHlwZS51bnN1YnNjcmliZU9uZSA9IGZ1bmN0aW9uIChpKSB7XHJcbiAgICAgICAgaWYgKHRoaXMub2JzZXJ2ZXJzID09PSB1bmRlZmluZWQgfHwgdGhpcy5vYnNlcnZlcnNbaV0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRlbGV0ZSB0aGlzLm9ic2VydmVyc1tpXTtcclxuICAgICAgICB0aGlzLm9ic2VydmVyQ291bnQgLT0gMTtcclxuICAgICAgICBpZiAodGhpcy5vYnNlcnZlckNvdW50ID09PSAwICYmIHRoaXMub25Ob09ic2VydmVycyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25Ob09ic2VydmVycyh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgT2JzZXJ2ZXJQcm94eS5wcm90b3R5cGUuZm9yRWFjaE9ic2VydmVyID0gZnVuY3Rpb24gKGZuKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XHJcbiAgICAgICAgICAgIC8vIEFscmVhZHkgY2xvc2VkIGJ5IHByZXZpb3VzIGV2ZW50Li4uLmp1c3QgZWF0IHRoZSBhZGRpdGlvbmFsIHZhbHVlcy5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBTaW5jZSBzZW5kT25lIGNhbGxzIGFzeW5jaHJvbm91c2x5IC0gdGhlcmUgaXMgbm8gY2hhbmNlIHRoYXRcclxuICAgICAgICAvLyB0aGlzLm9ic2VydmVycyB3aWxsIGJlY29tZSB1bmRlZmluZWQuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm9ic2VydmVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLnNlbmRPbmUoaSwgZm4pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvLyBDYWxsIHRoZSBPYnNlcnZlciB2aWEgb25lIG9mIGl0J3MgY2FsbGJhY2sgZnVuY3Rpb24uIFdlIGFyZSBjYXJlZnVsIHRvXHJcbiAgICAvLyBjb25maXJtIHRoYXQgdGhlIG9ic2VydmUgaGFzIG5vdCBiZWVuIHVuc3Vic2NyaWJlZCBzaW5jZSB0aGlzIGFzeW5jaHJvbm91c1xyXG4gICAgLy8gZnVuY3Rpb24gaGFkIGJlZW4gcXVldWVkLlxyXG4gICAgT2JzZXJ2ZXJQcm94eS5wcm90b3R5cGUuc2VuZE9uZSA9IGZ1bmN0aW9uIChpLCBmbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLy8gRXhlY3V0ZSB0aGUgY2FsbGJhY2sgYXN5bmNocm9ub3VzbHlcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgdGhpcy50YXNrLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMub2JzZXJ2ZXJzICE9PSB1bmRlZmluZWQgJiYgX3RoaXMub2JzZXJ2ZXJzW2ldICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm4oX3RoaXMub2JzZXJ2ZXJzW2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWdub3JlIGV4Y2VwdGlvbnMgcmFpc2VkIGluIE9ic2VydmVycyBvciBtaXNzaW5nIG1ldGhvZHMgb2YgYW5cclxuICAgICAgICAgICAgICAgICAgICAvLyBPYnNlcnZlci5cclxuICAgICAgICAgICAgICAgICAgICAvLyBMb2cgZXJyb3IgdG8gY29uc29sZS4gYi8zMTQwNDgwNlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiYgY29uc29sZS5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIE9ic2VydmVyUHJveHkucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5maW5hbGl6ZWQgPSB0cnVlO1xyXG4gICAgICAgIGlmIChlcnIgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLmZpbmFsRXJyb3IgPSBlcnI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFByb3h5IGlzIG5vIGxvbmdlciBuZWVkZWQgLSBnYXJiYWdlIGNvbGxlY3QgcmVmZXJlbmNlc1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICB0aGlzLnRhc2sudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLm9ic2VydmVycyA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgX3RoaXMub25Ob09ic2VydmVycyA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gT2JzZXJ2ZXJQcm94eTtcclxufSgpKTtcclxuLyoqIFR1cm4gc3luY2hyb25vdXMgZnVuY3Rpb24gaW50byBvbmUgY2FsbGVkIGFzeW5jaHJvbm91c2x5LiAqL1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10eXBlc1xyXG5mdW5jdGlvbiBhc3luYyhmbiwgb25FcnJvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKHRydWUpXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZm4uYXBwbHkodm9pZCAwLCBhcmdzKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGlmIChvbkVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBvbkVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxufVxyXG4vKipcclxuICogUmV0dXJuIHRydWUgaWYgdGhlIG9iamVjdCBwYXNzZWQgaW4gaW1wbGVtZW50cyBhbnkgb2YgdGhlIG5hbWVkIG1ldGhvZHMuXHJcbiAqL1xyXG5mdW5jdGlvbiBpbXBsZW1lbnRzQW55TWV0aG9kcyhvYmosIG1ldGhvZHMpIHtcclxuICAgIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0JyB8fCBvYmogPT09IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBmb3IgKHZhciBfaSA9IDAsIG1ldGhvZHNfMSA9IG1ldGhvZHM7IF9pIDwgbWV0aG9kc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgIHZhciBtZXRob2QgPSBtZXRob2RzXzFbX2ldO1xyXG4gICAgICAgIGlmIChtZXRob2QgaW4gb2JqICYmIHR5cGVvZiBvYmpbbWV0aG9kXSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cclxuZnVuY3Rpb24gbm9vcCgpIHtcclxuICAgIC8vIGRvIG5vdGhpbmdcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQ2hlY2sgdG8gbWFrZSBzdXJlIHRoZSBhcHByb3ByaWF0ZSBudW1iZXIgb2YgYXJndW1lbnRzIGFyZSBwcm92aWRlZCBmb3IgYSBwdWJsaWMgZnVuY3Rpb24uXHJcbiAqIFRocm93cyBhbiBlcnJvciBpZiBpdCBmYWlscy5cclxuICpcclxuICogQHBhcmFtIGZuTmFtZSBUaGUgZnVuY3Rpb24gbmFtZVxyXG4gKiBAcGFyYW0gbWluQ291bnQgVGhlIG1pbmltdW0gbnVtYmVyIG9mIGFyZ3VtZW50cyB0byBhbGxvdyBmb3IgdGhlIGZ1bmN0aW9uIGNhbGxcclxuICogQHBhcmFtIG1heENvdW50IFRoZSBtYXhpbXVtIG51bWJlciBvZiBhcmd1bWVudCB0byBhbGxvdyBmb3IgdGhlIGZ1bmN0aW9uIGNhbGxcclxuICogQHBhcmFtIGFyZ0NvdW50IFRoZSBhY3R1YWwgbnVtYmVyIG9mIGFyZ3VtZW50cyBwcm92aWRlZC5cclxuICovXHJcbnZhciB2YWxpZGF0ZUFyZ0NvdW50ID0gZnVuY3Rpb24gKGZuTmFtZSwgbWluQ291bnQsIG1heENvdW50LCBhcmdDb3VudCkge1xyXG4gICAgdmFyIGFyZ0Vycm9yO1xyXG4gICAgaWYgKGFyZ0NvdW50IDwgbWluQ291bnQpIHtcclxuICAgICAgICBhcmdFcnJvciA9ICdhdCBsZWFzdCAnICsgbWluQ291bnQ7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChhcmdDb3VudCA+IG1heENvdW50KSB7XHJcbiAgICAgICAgYXJnRXJyb3IgPSBtYXhDb3VudCA9PT0gMCA/ICdub25lJyA6ICdubyBtb3JlIHRoYW4gJyArIG1heENvdW50O1xyXG4gICAgfVxyXG4gICAgaWYgKGFyZ0Vycm9yKSB7XHJcbiAgICAgICAgdmFyIGVycm9yID0gZm5OYW1lICtcclxuICAgICAgICAgICAgJyBmYWlsZWQ6IFdhcyBjYWxsZWQgd2l0aCAnICtcclxuICAgICAgICAgICAgYXJnQ291bnQgK1xyXG4gICAgICAgICAgICAoYXJnQ291bnQgPT09IDEgPyAnIGFyZ3VtZW50LicgOiAnIGFyZ3VtZW50cy4nKSArXHJcbiAgICAgICAgICAgICcgRXhwZWN0cyAnICtcclxuICAgICAgICAgICAgYXJnRXJyb3IgK1xyXG4gICAgICAgICAgICAnLic7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcclxuICAgIH1cclxufTtcclxuLyoqXHJcbiAqIEdlbmVyYXRlcyBhIHN0cmluZyB0byBwcmVmaXggYW4gZXJyb3IgbWVzc2FnZSBhYm91dCBmYWlsZWQgYXJndW1lbnQgdmFsaWRhdGlvblxyXG4gKlxyXG4gKiBAcGFyYW0gZm5OYW1lIFRoZSBmdW5jdGlvbiBuYW1lXHJcbiAqIEBwYXJhbSBhcmd1bWVudE51bWJlciBUaGUgaW5kZXggb2YgdGhlIGFyZ3VtZW50XHJcbiAqIEBwYXJhbSBvcHRpb25hbCBXaGV0aGVyIG9yIG5vdCB0aGUgYXJndW1lbnQgaXMgb3B0aW9uYWxcclxuICogQHJldHVybiBUaGUgcHJlZml4IHRvIGFkZCB0byB0aGUgZXJyb3IgdGhyb3duIGZvciB2YWxpZGF0aW9uLlxyXG4gKi9cclxuZnVuY3Rpb24gZXJyb3JQcmVmaXgoZm5OYW1lLCBhcmd1bWVudE51bWJlciwgb3B0aW9uYWwpIHtcclxuICAgIHZhciBhcmdOYW1lID0gJyc7XHJcbiAgICBzd2l0Y2ggKGFyZ3VtZW50TnVtYmVyKSB7XHJcbiAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICBhcmdOYW1lID0gb3B0aW9uYWwgPyAnZmlyc3QnIDogJ0ZpcnN0JztcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICBhcmdOYW1lID0gb3B0aW9uYWwgPyAnc2Vjb25kJyA6ICdTZWNvbmQnO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgIGFyZ05hbWUgPSBvcHRpb25hbCA/ICd0aGlyZCcgOiAnVGhpcmQnO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgIGFyZ05hbWUgPSBvcHRpb25hbCA/ICdmb3VydGgnIDogJ0ZvdXJ0aCc7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignZXJyb3JQcmVmaXggY2FsbGVkIHdpdGggYXJndW1lbnROdW1iZXIgPiA0LiAgTmVlZCB0byB1cGRhdGUgaXQ/Jyk7XHJcbiAgICB9XHJcbiAgICB2YXIgZXJyb3IgPSBmbk5hbWUgKyAnIGZhaWxlZDogJztcclxuICAgIGVycm9yICs9IGFyZ05hbWUgKyAnIGFyZ3VtZW50ICc7XHJcbiAgICByZXR1cm4gZXJyb3I7XHJcbn1cclxuLyoqXHJcbiAqIEBwYXJhbSBmbk5hbWVcclxuICogQHBhcmFtIGFyZ3VtZW50TnVtYmVyXHJcbiAqIEBwYXJhbSBuYW1lc3BhY2VcclxuICogQHBhcmFtIG9wdGlvbmFsXHJcbiAqL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZU5hbWVzcGFjZShmbk5hbWUsIGFyZ3VtZW50TnVtYmVyLCBuYW1lc3BhY2UsIG9wdGlvbmFsKSB7XHJcbiAgICBpZiAob3B0aW9uYWwgJiYgIW5hbWVzcGFjZSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgbmFtZXNwYWNlICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgIC8vVE9ETzogSSBzaG91bGQgZG8gbW9yZSB2YWxpZGF0aW9uIGhlcmUuIFdlIG9ubHkgYWxsb3cgY2VydGFpbiBjaGFycyBpbiBuYW1lc3BhY2VzLlxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeChmbk5hbWUsIGFyZ3VtZW50TnVtYmVyLCBvcHRpb25hbCkgK1xyXG4gICAgICAgICAgICAnbXVzdCBiZSBhIHZhbGlkIGZpcmViYXNlIG5hbWVzcGFjZS4nKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiB2YWxpZGF0ZUNhbGxiYWNrKGZuTmFtZSwgYXJndW1lbnROdW1iZXIsIFxyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10eXBlc1xyXG5jYWxsYmFjaywgb3B0aW9uYWwpIHtcclxuICAgIGlmIChvcHRpb25hbCAmJiAhY2FsbGJhY2spIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yUHJlZml4KGZuTmFtZSwgYXJndW1lbnROdW1iZXIsIG9wdGlvbmFsKSArXHJcbiAgICAgICAgICAgICdtdXN0IGJlIGEgdmFsaWQgZnVuY3Rpb24uJyk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gdmFsaWRhdGVDb250ZXh0T2JqZWN0KGZuTmFtZSwgYXJndW1lbnROdW1iZXIsIGNvbnRleHQsIG9wdGlvbmFsKSB7XHJcbiAgICBpZiAob3B0aW9uYWwgJiYgIWNvbnRleHQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGNvbnRleHQgIT09ICdvYmplY3QnIHx8IGNvbnRleHQgPT09IG51bGwpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXgoZm5OYW1lLCBhcmd1bWVudE51bWJlciwgb3B0aW9uYWwpICtcclxuICAgICAgICAgICAgJ211c3QgYmUgYSB2YWxpZCBjb250ZXh0IG9iamVjdC4nKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vLyBDb2RlIG9yaWdpbmFsbHkgY2FtZSBmcm9tIGdvb2cuY3J5cHQuc3RyaW5nVG9VdGY4Qnl0ZUFycmF5LCBidXQgZm9yIHNvbWUgcmVhc29uIHRoZXlcclxuLy8gYXV0b21hdGljYWxseSByZXBsYWNlZCAnXFxyXFxuJyB3aXRoICdcXG4nLCBhbmQgdGhleSBkaWRuJ3QgaGFuZGxlIHN1cnJvZ2F0ZSBwYWlycyxcclxuLy8gc28gaXQncyBiZWVuIG1vZGlmaWVkLlxyXG4vLyBOb3RlIHRoYXQgbm90IGFsbCBVbmljb2RlIGNoYXJhY3RlcnMgYXBwZWFyIGFzIHNpbmdsZSBjaGFyYWN0ZXJzIGluIEphdmFTY3JpcHQgc3RyaW5ncy5cclxuLy8gZnJvbUNoYXJDb2RlIHJldHVybnMgdGhlIFVURi0xNiBlbmNvZGluZyBvZiBhIGNoYXJhY3RlciAtIHNvIHNvbWUgVW5pY29kZSBjaGFyYWN0ZXJzXHJcbi8vIHVzZSAyIGNoYXJhY3RlcnMgaW4gSmF2YXNjcmlwdC4gIEFsbCA0LWJ5dGUgVVRGLTggY2hhcmFjdGVycyBiZWdpbiB3aXRoIGEgZmlyc3RcclxuLy8gY2hhcmFjdGVyIGluIHRoZSByYW5nZSAweEQ4MDAgLSAweERCRkYgKHRoZSBmaXJzdCBjaGFyYWN0ZXIgb2YgYSBzby1jYWxsZWQgc3Vycm9nYXRlXHJcbi8vIHBhaXIpLlxyXG4vLyBTZWUgaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzUuMS8jc2VjLTE1LjEuM1xyXG4vKipcclxuICogQHBhcmFtIHtzdHJpbmd9IHN0clxyXG4gKiBAcmV0dXJuIHtBcnJheX1cclxuICovXHJcbnZhciBzdHJpbmdUb0J5dGVBcnJheSQxID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgdmFyIG91dCA9IFtdO1xyXG4gICAgdmFyIHAgPSAwO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2YXIgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgIC8vIElzIHRoaXMgdGhlIGxlYWQgc3Vycm9nYXRlIGluIGEgc3Vycm9nYXRlIHBhaXI/XHJcbiAgICAgICAgaWYgKGMgPj0gMHhkODAwICYmIGMgPD0gMHhkYmZmKSB7XHJcbiAgICAgICAgICAgIHZhciBoaWdoID0gYyAtIDB4ZDgwMDsgLy8gdGhlIGhpZ2ggMTAgYml0cy5cclxuICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICBhc3NlcnQoaSA8IHN0ci5sZW5ndGgsICdTdXJyb2dhdGUgcGFpciBtaXNzaW5nIHRyYWlsIHN1cnJvZ2F0ZS4nKTtcclxuICAgICAgICAgICAgdmFyIGxvdyA9IHN0ci5jaGFyQ29kZUF0KGkpIC0gMHhkYzAwOyAvLyB0aGUgbG93IDEwIGJpdHMuXHJcbiAgICAgICAgICAgIGMgPSAweDEwMDAwICsgKGhpZ2ggPDwgMTApICsgbG93O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYyA8IDEyOCkge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IGM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCAyMDQ4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gNikgfCAxOTI7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCA2NTUzNikge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDEyKSB8IDIyNDtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDE4KSB8IDI0MDtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gMTIpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3V0O1xyXG59O1xyXG4vKipcclxuICogQ2FsY3VsYXRlIGxlbmd0aCB3aXRob3V0IGFjdHVhbGx5IGNvbnZlcnRpbmc7IHVzZWZ1bCBmb3IgZG9pbmcgY2hlYXBlciB2YWxpZGF0aW9uLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXHJcbiAqIEByZXR1cm4ge251bWJlcn1cclxuICovXHJcbnZhciBzdHJpbmdMZW5ndGggPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICB2YXIgcCA9IDA7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHZhciBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgaWYgKGMgPCAxMjgpIHtcclxuICAgICAgICAgICAgcCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjIDwgMjA0OCkge1xyXG4gICAgICAgICAgICBwICs9IDI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPj0gMHhkODAwICYmIGMgPD0gMHhkYmZmKSB7XHJcbiAgICAgICAgICAgIC8vIExlYWQgc3Vycm9nYXRlIG9mIGEgc3Vycm9nYXRlIHBhaXIuICBUaGUgcGFpciB0b2dldGhlciB3aWxsIHRha2UgNCBieXRlcyB0byByZXByZXNlbnQuXHJcbiAgICAgICAgICAgIHAgKz0gNDtcclxuICAgICAgICAgICAgaSsrOyAvLyBza2lwIHRyYWlsIHN1cnJvZ2F0ZS5cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHAgKz0gMztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcDtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBhbW91bnQgb2YgbWlsbGlzZWNvbmRzIHRvIGV4cG9uZW50aWFsbHkgaW5jcmVhc2UuXHJcbiAqL1xyXG52YXIgREVGQVVMVF9JTlRFUlZBTF9NSUxMSVMgPSAxMDAwO1xyXG4vKipcclxuICogVGhlIGZhY3RvciB0byBiYWNrb2ZmIGJ5LlxyXG4gKiBTaG91bGQgYmUgYSBudW1iZXIgZ3JlYXRlciB0aGFuIDEuXHJcbiAqL1xyXG52YXIgREVGQVVMVF9CQUNLT0ZGX0ZBQ1RPUiA9IDI7XHJcbi8qKlxyXG4gKiBUaGUgbWF4aW11bSBtaWxsaXNlY29uZHMgdG8gaW5jcmVhc2UgdG8uXHJcbiAqXHJcbiAqIDxwPlZpc2libGUgZm9yIHRlc3RpbmdcclxuICovXHJcbnZhciBNQVhfVkFMVUVfTUlMTElTID0gNCAqIDYwICogNjAgKiAxMDAwOyAvLyBGb3VyIGhvdXJzLCBsaWtlIGlPUyBhbmQgQW5kcm9pZC5cclxuLyoqXHJcbiAqIFRoZSBwZXJjZW50YWdlIG9mIGJhY2tvZmYgdGltZSB0byByYW5kb21pemUgYnkuXHJcbiAqIFNlZVxyXG4gKiBodHRwOi8vZ28vc2FmZS1jbGllbnQtYmVoYXZpb3Ijc3RlcC0xLWRldGVybWluZS10aGUtYXBwcm9wcmlhdGUtcmV0cnktaW50ZXJ2YWwtdG8taGFuZGxlLXNwaWtlLXRyYWZmaWNcclxuICogZm9yIGNvbnRleHQuXHJcbiAqXHJcbiAqIDxwPlZpc2libGUgZm9yIHRlc3RpbmdcclxuICovXHJcbnZhciBSQU5ET01fRkFDVE9SID0gMC41O1xyXG4vKipcclxuICogQmFzZWQgb24gdGhlIGJhY2tvZmYgbWV0aG9kIGZyb21cclxuICogaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9jbG9zdXJlLWxpYnJhcnkvYmxvYi9tYXN0ZXIvY2xvc3VyZS9nb29nL21hdGgvZXhwb25lbnRpYWxiYWNrb2ZmLmpzLlxyXG4gKiBFeHRyYWN0ZWQgaGVyZSBzbyB3ZSBkb24ndCBuZWVkIHRvIHBhc3MgbWV0YWRhdGEgYW5kIGEgc3RhdGVmdWwgRXhwb25lbnRpYWxCYWNrb2ZmIG9iamVjdCBhcm91bmQuXHJcbiAqL1xyXG5mdW5jdGlvbiBjYWxjdWxhdGVCYWNrb2ZmTWlsbGlzKGJhY2tvZmZDb3VudCwgaW50ZXJ2YWxNaWxsaXMsIGJhY2tvZmZGYWN0b3IpIHtcclxuICAgIGlmIChpbnRlcnZhbE1pbGxpcyA9PT0gdm9pZCAwKSB7IGludGVydmFsTWlsbGlzID0gREVGQVVMVF9JTlRFUlZBTF9NSUxMSVM7IH1cclxuICAgIGlmIChiYWNrb2ZmRmFjdG9yID09PSB2b2lkIDApIHsgYmFja29mZkZhY3RvciA9IERFRkFVTFRfQkFDS09GRl9GQUNUT1I7IH1cclxuICAgIC8vIENhbGN1bGF0ZXMgYW4gZXhwb25lbnRpYWxseSBpbmNyZWFzaW5nIHZhbHVlLlxyXG4gICAgLy8gRGV2aWF0aW9uOiBjYWxjdWxhdGVzIHZhbHVlIGZyb20gY291bnQgYW5kIGEgY29uc3RhbnQgaW50ZXJ2YWwsIHNvIHdlIG9ubHkgbmVlZCB0byBzYXZlIHZhbHVlXHJcbiAgICAvLyBhbmQgY291bnQgdG8gcmVzdG9yZSBzdGF0ZS5cclxuICAgIHZhciBjdXJyQmFzZVZhbHVlID0gaW50ZXJ2YWxNaWxsaXMgKiBNYXRoLnBvdyhiYWNrb2ZmRmFjdG9yLCBiYWNrb2ZmQ291bnQpO1xyXG4gICAgLy8gQSByYW5kb20gXCJmdXp6XCIgdG8gYXZvaWQgd2F2ZXMgb2YgcmV0cmllcy5cclxuICAgIC8vIERldmlhdGlvbjogcmFuZG9tRmFjdG9yIGlzIHJlcXVpcmVkLlxyXG4gICAgdmFyIHJhbmRvbVdhaXQgPSBNYXRoLnJvdW5kKFxyXG4gICAgLy8gQSBmcmFjdGlvbiBvZiB0aGUgYmFja29mZiB2YWx1ZSB0byBhZGQvc3VidHJhY3QuXHJcbiAgICAvLyBEZXZpYXRpb246IGNoYW5nZXMgbXVsdGlwbGljYXRpb24gb3JkZXIgdG8gaW1wcm92ZSByZWFkYWJpbGl0eS5cclxuICAgIFJBTkRPTV9GQUNUT1IgKlxyXG4gICAgICAgIGN1cnJCYXNlVmFsdWUgKlxyXG4gICAgICAgIC8vIEEgcmFuZG9tIGZsb2F0IChyb3VuZGVkIHRvIGludCBieSBNYXRoLnJvdW5kIGFib3ZlKSBpbiB0aGUgcmFuZ2UgWy0xLCAxXS4gRGV0ZXJtaW5lc1xyXG4gICAgICAgIC8vIGlmIHdlIGFkZCBvciBzdWJ0cmFjdC5cclxuICAgICAgICAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKlxyXG4gICAgICAgIDIpO1xyXG4gICAgLy8gTGltaXRzIGJhY2tvZmYgdG8gbWF4IHRvIGF2b2lkIGVmZmVjdGl2ZWx5IHBlcm1hbmVudCBiYWNrb2ZmLlxyXG4gICAgcmV0dXJuIE1hdGgubWluKE1BWF9WQUxVRV9NSUxMSVMsIGN1cnJCYXNlVmFsdWUgKyByYW5kb21XYWl0KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZSBFbmdsaXNoIG9yZGluYWwgbGV0dGVycyBhZnRlciBhIG51bWJlclxyXG4gKi9cclxuZnVuY3Rpb24gb3JkaW5hbChpKSB7XHJcbiAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShpKSkge1xyXG4gICAgICAgIHJldHVybiBcIlwiICsgaTtcclxuICAgIH1cclxuICAgIHJldHVybiBpICsgaW5kaWNhdG9yKGkpO1xyXG59XHJcbmZ1bmN0aW9uIGluZGljYXRvcihpKSB7XHJcbiAgICBpID0gTWF0aC5hYnMoaSk7XHJcbiAgICB2YXIgY2VudCA9IGkgJSAxMDA7XHJcbiAgICBpZiAoY2VudCA+PSAxMCAmJiBjZW50IDw9IDIwKSB7XHJcbiAgICAgICAgcmV0dXJuICd0aCc7XHJcbiAgICB9XHJcbiAgICB2YXIgZGVjID0gaSAlIDEwO1xyXG4gICAgaWYgKGRlYyA9PT0gMSkge1xyXG4gICAgICAgIHJldHVybiAnc3QnO1xyXG4gICAgfVxyXG4gICAgaWYgKGRlYyA9PT0gMikge1xyXG4gICAgICAgIHJldHVybiAnbmQnO1xyXG4gICAgfVxyXG4gICAgaWYgKGRlYyA9PT0gMykge1xyXG4gICAgICAgIHJldHVybiAncmQnO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuICd0aCc7XHJcbn1cblxuZXhwb3J0IHsgQ09OU1RBTlRTLCBEZWZlcnJlZCwgRXJyb3JGYWN0b3J5LCBGaXJlYmFzZUVycm9yLCBNQVhfVkFMVUVfTUlMTElTLCBSQU5ET01fRkFDVE9SLCBTaGExLCBhcmVDb29raWVzRW5hYmxlZCwgYXNzZXJ0LCBhc3NlcnRpb25FcnJvciwgYXN5bmMsIGJhc2U2NCwgYmFzZTY0RGVjb2RlLCBiYXNlNjRFbmNvZGUsIGNhbGN1bGF0ZUJhY2tvZmZNaWxsaXMsIGNvbnRhaW5zLCBjcmVhdGVTdWJzY3JpYmUsIGRlY29kZSwgZGVlcENvcHksIGRlZXBFeHRlbmQsIGVycm9yUHJlZml4LCBnZXRVQSwgaXNBZG1pbiwgaXNCcm93c2VyLCBpc0Jyb3dzZXJFeHRlbnNpb24sIGlzRWxlY3Ryb24sIGlzRW1wdHksIGlzSUUsIGlzSW5kZXhlZERCQXZhaWxhYmxlLCBpc01vYmlsZUNvcmRvdmEsIGlzTm9kZSwgaXNOb2RlU2RrLCBpc1JlYWN0TmF0aXZlLCBpc1NhZmFyaSwgaXNVV1AsIGlzVmFsaWRGb3JtYXQsIGlzVmFsaWRUaW1lc3RhbXAsIGlzc3VlZEF0VGltZSwganNvbkV2YWwsIG1hcCwgb3JkaW5hbCwgcXVlcnlzdHJpbmcsIHF1ZXJ5c3RyaW5nRGVjb2RlLCBzYWZlR2V0LCBzdHJpbmdMZW5ndGgsIHN0cmluZ1RvQnl0ZUFycmF5JDEgYXMgc3RyaW5nVG9CeXRlQXJyYXksIHN0cmluZ2lmeSwgdmFsaWRhdGVBcmdDb3VudCwgdmFsaWRhdGVDYWxsYmFjaywgdmFsaWRhdGVDb250ZXh0T2JqZWN0LCB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlLCB2YWxpZGF0ZU5hbWVzcGFjZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtLmpzLm1hcFxuIiwiaW1wb3J0IHsgX19hc3NpZ24sIF9fdmFsdWVzLCBfX3JlYWQsIF9fYXdhaXRlciwgX19nZW5lcmF0b3IsIF9fc3ByZWFkIH0gZnJvbSAndHNsaWInO1xuaW1wb3J0IHsgRGVmZXJyZWQgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5cbi8qKlxyXG4gKiBDb21wb25lbnQgZm9yIHNlcnZpY2UgbmFtZSBULCBlLmcuIGBhdXRoYCwgYGF1dGgtaW50ZXJuYWxgXHJcbiAqL1xyXG52YXIgQ29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIHB1YmxpYyBzZXJ2aWNlIG5hbWUsIGUuZy4gYXBwLCBhdXRoLCBmaXJlc3RvcmUsIGRhdGFiYXNlXHJcbiAgICAgKiBAcGFyYW0gaW5zdGFuY2VGYWN0b3J5IFNlcnZpY2UgZmFjdG9yeSByZXNwb25zaWJsZSBmb3IgY3JlYXRpbmcgdGhlIHB1YmxpYyBpbnRlcmZhY2VcclxuICAgICAqIEBwYXJhbSB0eXBlIHdoZXRoZXIgdGhlIHNlcnZpY2UgcHJvdmlkZWQgYnkgdGhlIGNvbXBvbmVudCBpcyBwdWJsaWMgb3IgcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBDb21wb25lbnQobmFtZSwgaW5zdGFuY2VGYWN0b3J5LCB0eXBlKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlRmFjdG9yeSA9IGluc3RhbmNlRmFjdG9yeTtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgIHRoaXMubXVsdGlwbGVJbnN0YW5jZXMgPSBmYWxzZTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBQcm9wZXJ0aWVzIHRvIGJlIGFkZGVkIHRvIHRoZSBzZXJ2aWNlIG5hbWVzcGFjZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuc2VydmljZVByb3BzID0ge307XHJcbiAgICAgICAgdGhpcy5pbnN0YW50aWF0aW9uTW9kZSA9IFwiTEFaWVwiIC8qIExBWlkgKi87XHJcbiAgICB9XHJcbiAgICBDb21wb25lbnQucHJvdG90eXBlLnNldEluc3RhbnRpYXRpb25Nb2RlID0gZnVuY3Rpb24gKG1vZGUpIHtcclxuICAgICAgICB0aGlzLmluc3RhbnRpYXRpb25Nb2RlID0gbW9kZTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBDb21wb25lbnQucHJvdG90eXBlLnNldE11bHRpcGxlSW5zdGFuY2VzID0gZnVuY3Rpb24gKG11bHRpcGxlSW5zdGFuY2VzKSB7XHJcbiAgICAgICAgdGhpcy5tdWx0aXBsZUluc3RhbmNlcyA9IG11bHRpcGxlSW5zdGFuY2VzO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIENvbXBvbmVudC5wcm90b3R5cGUuc2V0U2VydmljZVByb3BzID0gZnVuY3Rpb24gKHByb3BzKSB7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlUHJvcHMgPSBwcm9wcztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICByZXR1cm4gQ29tcG9uZW50O1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgREVGQVVMVF9FTlRSWV9OQU1FID0gJ1tERUZBVUxUXSc7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQcm92aWRlciBmb3IgaW5zdGFuY2UgZm9yIHNlcnZpY2UgbmFtZSBULCBlLmcuICdhdXRoJywgJ2F1dGgtaW50ZXJuYWwnXHJcbiAqIE5hbWVTZXJ2aWNlTWFwcGluZ1tUXSBpcyBhbiBhbGlhcyBmb3IgdGhlIHR5cGUgb2YgdGhlIGluc3RhbmNlXHJcbiAqL1xyXG52YXIgUHJvdmlkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBQcm92aWRlcihuYW1lLCBjb250YWluZXIpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50ID0gbnVsbDtcclxuICAgICAgICB0aGlzLmluc3RhbmNlcyA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlc0RlZmVycmVkID0gbmV3IE1hcCgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gaWRlbnRpZmllciBBIHByb3ZpZGVyIGNhbiBwcm92aWRlIG11bGl0cGxlIGluc3RhbmNlcyBvZiBhIHNlcnZpY2VcclxuICAgICAqIGlmIHRoaXMuY29tcG9uZW50Lm11bHRpcGxlSW5zdGFuY2VzIGlzIHRydWUuXHJcbiAgICAgKi9cclxuICAgIFByb3ZpZGVyLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaWRlbnRpZmllcikge1xyXG4gICAgICAgIGlmIChpZGVudGlmaWVyID09PSB2b2lkIDApIHsgaWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRTsgfVxyXG4gICAgICAgIC8vIGlmIG11bHRpcGxlSW5zdGFuY2VzIGlzIG5vdCBzdXBwb3J0ZWQsIHVzZSB0aGUgZGVmYXVsdCBuYW1lXHJcbiAgICAgICAgdmFyIG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKCF0aGlzLmluc3RhbmNlc0RlZmVycmVkLmhhcyhub3JtYWxpemVkSWRlbnRpZmllcikpIHtcclxuICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuc2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyLCBkZWZlcnJlZCk7XHJcbiAgICAgICAgICAgIC8vIElmIHRoZSBzZXJ2aWNlIGluc3RhbmNlIGlzIGF2YWlsYWJsZSwgcmVzb2x2ZSB0aGUgcHJvbWlzZSB3aXRoIGl0IGltbWVkaWF0ZWx5XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW5zdGFuY2UgPSB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uobm9ybWFsaXplZElkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIHdoZW4gdGhlIGluc3RhbmNlIGZhY3RvcnkgdGhyb3dzIGFuIGV4Y2VwdGlvbiBkdXJpbmcgZ2V0KCksIGl0IHNob3VsZCBub3QgY2F1c2VcclxuICAgICAgICAgICAgICAgIC8vIGEgZmF0YWwgZXJyb3IuIFdlIGp1c3QgcmV0dXJuIHRoZSB1bnJlc29sdmVkIHByb21pc2UgaW4gdGhpcyBjYXNlLlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmdldChub3JtYWxpemVkSWRlbnRpZmllcikucHJvbWlzZTtcclxuICAgIH07XHJcbiAgICBQcm92aWRlci5wcm90b3R5cGUuZ2V0SW1tZWRpYXRlID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgX2EgPSBfX2Fzc2lnbih7IGlkZW50aWZpZXI6IERFRkFVTFRfRU5UUllfTkFNRSwgb3B0aW9uYWw6IGZhbHNlIH0sIG9wdGlvbnMpLCBpZGVudGlmaWVyID0gX2EuaWRlbnRpZmllciwgb3B0aW9uYWwgPSBfYS5vcHRpb25hbDtcclxuICAgICAgICAvLyBpZiBtdWx0aXBsZUluc3RhbmNlcyBpcyBub3Qgc3VwcG9ydGVkLCB1c2UgdGhlIGRlZmF1bHQgbmFtZVxyXG4gICAgICAgIHZhciBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHZhciBpbnN0YW5jZSA9IHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZShub3JtYWxpemVkSWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgIGlmICghaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25hbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJTZXJ2aWNlIFwiICsgdGhpcy5uYW1lICsgXCIgaXMgbm90IGF2YWlsYWJsZVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gaW5zdGFuY2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25hbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFByb3ZpZGVyLnByb3RvdHlwZS5nZXRDb21wb25lbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50O1xyXG4gICAgfTtcclxuICAgIFByb3ZpZGVyLnByb3RvdHlwZS5zZXRDb21wb25lbnQgPSBmdW5jdGlvbiAoY29tcG9uZW50KSB7XHJcbiAgICAgICAgdmFyIGVfMSwgX2E7XHJcbiAgICAgICAgaWYgKGNvbXBvbmVudC5uYW1lICE9PSB0aGlzLm5hbWUpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJNaXNtYXRjaGluZyBDb21wb25lbnQgXCIgKyBjb21wb25lbnQubmFtZSArIFwiIGZvciBQcm92aWRlciBcIiArIHRoaXMubmFtZSArIFwiLlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwiQ29tcG9uZW50IGZvciBcIiArIHRoaXMubmFtZSArIFwiIGhhcyBhbHJlYWR5IGJlZW4gcHJvdmlkZWRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29tcG9uZW50ID0gY29tcG9uZW50O1xyXG4gICAgICAgIC8vIGlmIHRoZSBzZXJ2aWNlIGlzIGVhZ2VyLCBpbml0aWFsaXplIHRoZSBkZWZhdWx0IGluc3RhbmNlXHJcbiAgICAgICAgaWYgKGlzQ29tcG9uZW50RWFnZXIoY29tcG9uZW50KSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKERFRkFVTFRfRU5UUllfTkFNRSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIHdoZW4gdGhlIGluc3RhbmNlIGZhY3RvcnkgZm9yIGFuIGVhZ2VyIENvbXBvbmVudCB0aHJvd3MgYW4gZXhjZXB0aW9uIGR1cmluZyB0aGUgZWFnZXJcclxuICAgICAgICAgICAgICAgIC8vIGluaXRpYWxpemF0aW9uLCBpdCBzaG91bGQgbm90IGNhdXNlIGEgZmF0YWwgZXJyb3IuXHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBJbnZlc3RpZ2F0ZSBpZiB3ZSBuZWVkIHRvIG1ha2UgaXQgY29uZmlndXJhYmxlLCBiZWNhdXNlIHNvbWUgY29tcG9uZW50IG1heSB3YW50IHRvIGNhdXNlXHJcbiAgICAgICAgICAgICAgICAvLyBhIGZhdGFsIGVycm9yIGluIHRoaXMgY2FzZT9cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBDcmVhdGUgc2VydmljZSBpbnN0YW5jZXMgZm9yIHRoZSBwZW5kaW5nIHByb21pc2VzIGFuZCByZXNvbHZlIHRoZW1cclxuICAgICAgICAgICAgLy8gTk9URTogaWYgdGhpcy5tdWx0aXBsZUluc3RhbmNlcyBpcyBmYWxzZSwgb25seSB0aGUgZGVmYXVsdCBpbnN0YW5jZSB3aWxsIGJlIGNyZWF0ZWRcclxuICAgICAgICAgICAgLy8gYW5kIGFsbCBwcm9taXNlcyB3aXRoIHJlc29sdmUgd2l0aCBpdCByZWdhcmRsZXNzIG9mIHRoZSBpZGVudGlmaWVyLlxyXG4gICAgICAgICAgICBmb3IgKHZhciBfYiA9IF9fdmFsdWVzKHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZW50cmllcygpKSwgX2MgPSBfYi5uZXh0KCk7ICFfYy5kb25lOyBfYyA9IF9iLm5leHQoKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIF9kID0gX19yZWFkKF9jLnZhbHVlLCAyKSwgaW5zdGFuY2VJZGVudGlmaWVyID0gX2RbMF0sIGluc3RhbmNlRGVmZXJyZWQgPSBfZFsxXTtcclxuICAgICAgICAgICAgICAgIHZhciBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGBnZXRPckluaXRpYWxpemVTZXJ2aWNlKClgIHNob3VsZCBhbHdheXMgcmV0dXJuIGEgdmFsaWQgaW5zdGFuY2Ugc2luY2UgYSBjb21wb25lbnQgaXMgZ3VhcmFudGVlZC4gdXNlICEgdG8gbWFrZSB0eXBlc2NyaXB0IGhhcHB5LlxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbnN0YW5jZSA9IHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZShub3JtYWxpemVkSWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VEZWZlcnJlZC5yZXNvbHZlKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgaW5zdGFuY2UgZmFjdG9yeSB0aHJvd3MgYW4gZXhjZXB0aW9uLCBpdCBzaG91bGQgbm90IGNhdXNlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYSBmYXRhbCBlcnJvci4gV2UganVzdCBsZWF2ZSB0aGUgcHJvbWlzZSB1bnJlc29sdmVkLlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9XHJcbiAgICAgICAgZmluYWxseSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoX2MgJiYgIV9jLmRvbmUgJiYgKF9hID0gX2IucmV0dXJuKSkgX2EuY2FsbChfYik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBQcm92aWRlci5wcm90b3R5cGUuY2xlYXJJbnN0YW5jZSA9IGZ1bmN0aW9uIChpZGVudGlmaWVyKSB7XHJcbiAgICAgICAgaWYgKGlkZW50aWZpZXIgPT09IHZvaWQgMCkgeyBpZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FOyB9XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5kZWxldGUoaWRlbnRpZmllcik7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXMuZGVsZXRlKGlkZW50aWZpZXIpO1xyXG4gICAgfTtcclxuICAgIC8vIGFwcC5kZWxldGUoKSB3aWxsIGNhbGwgdGhpcyBtZXRob2Qgb24gZXZlcnkgcHJvdmlkZXIgdG8gZGVsZXRlIHRoZSBzZXJ2aWNlc1xyXG4gICAgLy8gVE9ETzogc2hvdWxkIHdlIG1hcmsgdGhlIHByb3ZpZGVyIGFzIGRlbGV0ZWQ/XHJcbiAgICBQcm92aWRlci5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHNlcnZpY2VzO1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlcyA9IEFycmF5LmZyb20odGhpcy5pbnN0YW5jZXMudmFsdWVzKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBQcm9taXNlLmFsbChfX3NwcmVhZChzZXJ2aWNlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKHNlcnZpY2UpIHsgcmV0dXJuICdJTlRFUk5BTCcgaW4gc2VydmljZTsgfSkgLy8gbGVnYWN5IHNlcnZpY2VzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChzZXJ2aWNlKSB7IHJldHVybiBzZXJ2aWNlLklOVEVSTkFMLmRlbGV0ZSgpOyB9KSwgc2VydmljZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChzZXJ2aWNlKSB7IHJldHVybiAnX2RlbGV0ZScgaW4gc2VydmljZTsgfSkgLy8gbW9kdWxhcml6ZWQgc2VydmljZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHNlcnZpY2UpIHsgcmV0dXJuIHNlcnZpY2UuX2RlbGV0ZSgpOyB9KSkpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBQcm92aWRlci5wcm90b3R5cGUuaXNDb21wb25lbnRTZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50ICE9IG51bGw7XHJcbiAgICB9O1xyXG4gICAgUHJvdmlkZXIucHJvdG90eXBlLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2UgPSBmdW5jdGlvbiAoaWRlbnRpZmllcikge1xyXG4gICAgICAgIHZhciBpbnN0YW5jZSA9IHRoaXMuaW5zdGFuY2VzLmdldChpZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAoIWluc3RhbmNlICYmIHRoaXMuY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlID0gdGhpcy5jb21wb25lbnQuaW5zdGFuY2VGYWN0b3J5KHRoaXMuY29udGFpbmVyLCBub3JtYWxpemVJZGVudGlmaWVyRm9yRmFjdG9yeShpZGVudGlmaWVyKSk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzLnNldChpZGVudGlmaWVyLCBpbnN0YW5jZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbnN0YW5jZSB8fCBudWxsO1xyXG4gICAgfTtcclxuICAgIFByb3ZpZGVyLnByb3RvdHlwZS5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIgPSBmdW5jdGlvbiAoaWRlbnRpZmllcikge1xyXG4gICAgICAgIGlmICh0aGlzLmNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnQubXVsdGlwbGVJbnN0YW5jZXMgPyBpZGVudGlmaWVyIDogREVGQVVMVF9FTlRSWV9OQU1FO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGlkZW50aWZpZXI7IC8vIGFzc3VtZSBtdWx0aXBsZSBpbnN0YW5jZXMgYXJlIHN1cHBvcnRlZCBiZWZvcmUgdGhlIGNvbXBvbmVudCBpcyBwcm92aWRlZC5cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFByb3ZpZGVyO1xyXG59KCkpO1xyXG4vLyB1bmRlZmluZWQgc2hvdWxkIGJlIHBhc3NlZCB0byB0aGUgc2VydmljZSBmYWN0b3J5IGZvciB0aGUgZGVmYXVsdCBpbnN0YW5jZVxyXG5mdW5jdGlvbiBub3JtYWxpemVJZGVudGlmaWVyRm9yRmFjdG9yeShpZGVudGlmaWVyKSB7XHJcbiAgICByZXR1cm4gaWRlbnRpZmllciA9PT0gREVGQVVMVF9FTlRSWV9OQU1FID8gdW5kZWZpbmVkIDogaWRlbnRpZmllcjtcclxufVxyXG5mdW5jdGlvbiBpc0NvbXBvbmVudEVhZ2VyKGNvbXBvbmVudCkge1xyXG4gICAgcmV0dXJuIGNvbXBvbmVudC5pbnN0YW50aWF0aW9uTW9kZSA9PT0gXCJFQUdFUlwiIC8qIEVBR0VSICovO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBDb21wb25lbnRDb250YWluZXIgdGhhdCBwcm92aWRlcyBQcm92aWRlcnMgZm9yIHNlcnZpY2UgbmFtZSBULCBlLmcuIGBhdXRoYCwgYGF1dGgtaW50ZXJuYWxgXHJcbiAqL1xyXG52YXIgQ29tcG9uZW50Q29udGFpbmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQ29tcG9uZW50Q29udGFpbmVyKG5hbWUpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJzID0gbmV3IE1hcCgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGNvbXBvbmVudCBDb21wb25lbnQgYmVpbmcgYWRkZWRcclxuICAgICAqIEBwYXJhbSBvdmVyd3JpdGUgV2hlbiBhIGNvbXBvbmVudCB3aXRoIHRoZSBzYW1lIG5hbWUgaGFzIGFscmVhZHkgYmVlbiByZWdpc3RlcmVkLFxyXG4gICAgICogaWYgb3ZlcndyaXRlIGlzIHRydWU6IG92ZXJ3cml0ZSB0aGUgZXhpc3RpbmcgY29tcG9uZW50IHdpdGggdGhlIG5ldyBjb21wb25lbnQgYW5kIGNyZWF0ZSBhIG5ld1xyXG4gICAgICogcHJvdmlkZXIgd2l0aCB0aGUgbmV3IGNvbXBvbmVudC4gSXQgY2FuIGJlIHVzZWZ1bCBpbiB0ZXN0cyB3aGVyZSB5b3Ugd2FudCB0byB1c2UgZGlmZmVyZW50IG1vY2tzXHJcbiAgICAgKiBmb3IgZGlmZmVyZW50IHRlc3RzLlxyXG4gICAgICogaWYgb3ZlcndyaXRlIGlzIGZhbHNlOiB0aHJvdyBhbiBleGNlcHRpb25cclxuICAgICAqL1xyXG4gICAgQ29tcG9uZW50Q29udGFpbmVyLnByb3RvdHlwZS5hZGRDb21wb25lbnQgPSBmdW5jdGlvbiAoY29tcG9uZW50KSB7XHJcbiAgICAgICAgdmFyIHByb3ZpZGVyID0gdGhpcy5nZXRQcm92aWRlcihjb21wb25lbnQubmFtZSk7XHJcbiAgICAgICAgaWYgKHByb3ZpZGVyLmlzQ29tcG9uZW50U2V0KCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ29tcG9uZW50IFwiICsgY29tcG9uZW50Lm5hbWUgKyBcIiBoYXMgYWxyZWFkeSBiZWVuIHJlZ2lzdGVyZWQgd2l0aCBcIiArIHRoaXMubmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHByb3ZpZGVyLnNldENvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgfTtcclxuICAgIENvbXBvbmVudENvbnRhaW5lci5wcm90b3R5cGUuYWRkT3JPdmVyd3JpdGVDb21wb25lbnQgPSBmdW5jdGlvbiAoY29tcG9uZW50KSB7XHJcbiAgICAgICAgdmFyIHByb3ZpZGVyID0gdGhpcy5nZXRQcm92aWRlcihjb21wb25lbnQubmFtZSk7XHJcbiAgICAgICAgaWYgKHByb3ZpZGVyLmlzQ29tcG9uZW50U2V0KCkpIHtcclxuICAgICAgICAgICAgLy8gZGVsZXRlIHRoZSBleGlzdGluZyBwcm92aWRlciBmcm9tIHRoZSBjb250YWluZXIsIHNvIHdlIGNhbiByZWdpc3RlciB0aGUgbmV3IGNvbXBvbmVudFxyXG4gICAgICAgICAgICB0aGlzLnByb3ZpZGVycy5kZWxldGUoY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmFkZENvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogZ2V0UHJvdmlkZXIgcHJvdmlkZXMgYSB0eXBlIHNhZmUgaW50ZXJmYWNlIHdoZXJlIGl0IGNhbiBvbmx5IGJlIGNhbGxlZCB3aXRoIGEgZmllbGQgbmFtZVxyXG4gICAgICogcHJlc2VudCBpbiBOYW1lU2VydmljZU1hcHBpbmcgaW50ZXJmYWNlLlxyXG4gICAgICpcclxuICAgICAqIEZpcmViYXNlIFNES3MgcHJvdmlkaW5nIHNlcnZpY2VzIHNob3VsZCBleHRlbmQgTmFtZVNlcnZpY2VNYXBwaW5nIGludGVyZmFjZSB0byByZWdpc3RlclxyXG4gICAgICogdGhlbXNlbHZlcy5cclxuICAgICAqL1xyXG4gICAgQ29tcG9uZW50Q29udGFpbmVyLnByb3RvdHlwZS5nZXRQcm92aWRlciA9IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucHJvdmlkZXJzLmhhcyhuYW1lKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm92aWRlcnMuZ2V0KG5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjcmVhdGUgYSBQcm92aWRlciBmb3IgYSBzZXJ2aWNlIHRoYXQgaGFzbid0IHJlZ2lzdGVyZWQgd2l0aCBGaXJlYmFzZVxyXG4gICAgICAgIHZhciBwcm92aWRlciA9IG5ldyBQcm92aWRlcihuYW1lLCB0aGlzKTtcclxuICAgICAgICB0aGlzLnByb3ZpZGVycy5zZXQobmFtZSwgcHJvdmlkZXIpO1xyXG4gICAgICAgIHJldHVybiBwcm92aWRlcjtcclxuICAgIH07XHJcbiAgICBDb21wb25lbnRDb250YWluZXIucHJvdG90eXBlLmdldFByb3ZpZGVycyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnByb3ZpZGVycy52YWx1ZXMoKSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIENvbXBvbmVudENvbnRhaW5lcjtcclxufSgpKTtcblxuZXhwb3J0IHsgQ29tcG9uZW50LCBDb21wb25lbnRDb250YWluZXIsIFByb3ZpZGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20uanMubWFwXG4iLCIvKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZVxyXG50aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZVxyXG5MaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG5cclxuVEhJUyBDT0RFIElTIFBST1ZJREVEIE9OIEFOICpBUyBJUyogQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG5LSU5ELCBFSVRIRVIgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgV0lUSE9VVCBMSU1JVEFUSU9OIEFOWSBJTVBMSUVEXHJcbldBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBUSVRMRSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UsXHJcbk1FUkNIQU5UQUJMSVRZIE9SIE5PTi1JTkZSSU5HRU1FTlQuXHJcblxyXG5TZWUgdGhlIEFwYWNoZSBWZXJzaW9uIDIuMCBMaWNlbnNlIGZvciBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnNcclxuYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG5cclxuZnVuY3Rpb24gX19zcHJlYWRBcnJheXMoKSB7XHJcbiAgICBmb3IgKHZhciBzID0gMCwgaSA9IDAsIGlsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHMgKz0gYXJndW1lbnRzW2ldLmxlbmd0aDtcclxuICAgIGZvciAodmFyIHIgPSBBcnJheShzKSwgayA9IDAsIGkgPSAwOyBpIDwgaWw7IGkrKylcclxuICAgICAgICBmb3IgKHZhciBhID0gYXJndW1lbnRzW2ldLCBqID0gMCwgamwgPSBhLmxlbmd0aDsgaiA8IGpsOyBqKyssIGsrKylcclxuICAgICAgICAgICAgcltrXSA9IGFbal07XHJcbiAgICByZXR1cm4gcjtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgX2E7XHJcbi8qKlxyXG4gKiBBIGNvbnRhaW5lciBmb3IgYWxsIG9mIHRoZSBMb2dnZXIgaW5zdGFuY2VzXHJcbiAqL1xyXG52YXIgaW5zdGFuY2VzID0gW107XHJcbi8qKlxyXG4gKiBUaGUgSlMgU0RLIHN1cHBvcnRzIDUgbG9nIGxldmVscyBhbmQgYWxzbyBhbGxvd3MgYSB1c2VyIHRoZSBhYmlsaXR5IHRvXHJcbiAqIHNpbGVuY2UgdGhlIGxvZ3MgYWx0b2dldGhlci5cclxuICpcclxuICogVGhlIG9yZGVyIGlzIGEgZm9sbG93czpcclxuICogREVCVUcgPCBWRVJCT1NFIDwgSU5GTyA8IFdBUk4gPCBFUlJPUlxyXG4gKlxyXG4gKiBBbGwgb2YgdGhlIGxvZyB0eXBlcyBhYm92ZSB0aGUgY3VycmVudCBsb2cgbGV2ZWwgd2lsbCBiZSBjYXB0dXJlZCAoaS5lLiBpZlxyXG4gKiB5b3Ugc2V0IHRoZSBsb2cgbGV2ZWwgdG8gYElORk9gLCBlcnJvcnMgd2lsbCBzdGlsbCBiZSBsb2dnZWQsIGJ1dCBgREVCVUdgIGFuZFxyXG4gKiBgVkVSQk9TRWAgbG9ncyB3aWxsIG5vdClcclxuICovXHJcbnZhciBMb2dMZXZlbDtcclxuKGZ1bmN0aW9uIChMb2dMZXZlbCkge1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJERUJVR1wiXSA9IDBdID0gXCJERUJVR1wiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJWRVJCT1NFXCJdID0gMV0gPSBcIlZFUkJPU0VcIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiSU5GT1wiXSA9IDJdID0gXCJJTkZPXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIldBUk5cIl0gPSAzXSA9IFwiV0FSTlwiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJFUlJPUlwiXSA9IDRdID0gXCJFUlJPUlwiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJTSUxFTlRcIl0gPSA1XSA9IFwiU0lMRU5UXCI7XHJcbn0pKExvZ0xldmVsIHx8IChMb2dMZXZlbCA9IHt9KSk7XHJcbnZhciBsZXZlbFN0cmluZ1RvRW51bSA9IHtcclxuICAgICdkZWJ1Zyc6IExvZ0xldmVsLkRFQlVHLFxyXG4gICAgJ3ZlcmJvc2UnOiBMb2dMZXZlbC5WRVJCT1NFLFxyXG4gICAgJ2luZm8nOiBMb2dMZXZlbC5JTkZPLFxyXG4gICAgJ3dhcm4nOiBMb2dMZXZlbC5XQVJOLFxyXG4gICAgJ2Vycm9yJzogTG9nTGV2ZWwuRVJST1IsXHJcbiAgICAnc2lsZW50JzogTG9nTGV2ZWwuU0lMRU5UXHJcbn07XHJcbi8qKlxyXG4gKiBUaGUgZGVmYXVsdCBsb2cgbGV2ZWxcclxuICovXHJcbnZhciBkZWZhdWx0TG9nTGV2ZWwgPSBMb2dMZXZlbC5JTkZPO1xyXG4vKipcclxuICogQnkgZGVmYXVsdCwgYGNvbnNvbGUuZGVidWdgIGlzIG5vdCBkaXNwbGF5ZWQgaW4gdGhlIGRldmVsb3BlciBjb25zb2xlIChpblxyXG4gKiBjaHJvbWUpLiBUbyBhdm9pZCBmb3JjaW5nIHVzZXJzIHRvIGhhdmUgdG8gb3B0LWluIHRvIHRoZXNlIGxvZ3MgdHdpY2VcclxuICogKGkuZS4gb25jZSBmb3IgZmlyZWJhc2UsIGFuZCBvbmNlIGluIHRoZSBjb25zb2xlKSwgd2UgYXJlIHNlbmRpbmcgYERFQlVHYFxyXG4gKiBsb2dzIHRvIHRoZSBgY29uc29sZS5sb2dgIGZ1bmN0aW9uLlxyXG4gKi9cclxudmFyIENvbnNvbGVNZXRob2QgPSAoX2EgPSB7fSxcclxuICAgIF9hW0xvZ0xldmVsLkRFQlVHXSA9ICdsb2cnLFxyXG4gICAgX2FbTG9nTGV2ZWwuVkVSQk9TRV0gPSAnbG9nJyxcclxuICAgIF9hW0xvZ0xldmVsLklORk9dID0gJ2luZm8nLFxyXG4gICAgX2FbTG9nTGV2ZWwuV0FSTl0gPSAnd2FybicsXHJcbiAgICBfYVtMb2dMZXZlbC5FUlJPUl0gPSAnZXJyb3InLFxyXG4gICAgX2EpO1xyXG4vKipcclxuICogVGhlIGRlZmF1bHQgbG9nIGhhbmRsZXIgd2lsbCBmb3J3YXJkIERFQlVHLCBWRVJCT1NFLCBJTkZPLCBXQVJOLCBhbmQgRVJST1JcclxuICogbWVzc2FnZXMgb24gdG8gdGhlaXIgY29ycmVzcG9uZGluZyBjb25zb2xlIGNvdW50ZXJwYXJ0cyAoaWYgdGhlIGxvZyBtZXRob2RcclxuICogaXMgc3VwcG9ydGVkIGJ5IHRoZSBjdXJyZW50IGxvZyBsZXZlbClcclxuICovXHJcbnZhciBkZWZhdWx0TG9nSGFuZGxlciA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgbG9nVHlwZSkge1xyXG4gICAgdmFyIGFyZ3MgPSBbXTtcclxuICAgIGZvciAodmFyIF9pID0gMjsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgYXJnc1tfaSAtIDJdID0gYXJndW1lbnRzW19pXTtcclxuICAgIH1cclxuICAgIGlmIChsb2dUeXBlIDwgaW5zdGFuY2UubG9nTGV2ZWwpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB2YXIgbm93ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG4gICAgdmFyIG1ldGhvZCA9IENvbnNvbGVNZXRob2RbbG9nVHlwZV07XHJcbiAgICBpZiAobWV0aG9kKSB7XHJcbiAgICAgICAgY29uc29sZVttZXRob2RdLmFwcGx5KGNvbnNvbGUsIF9fc3ByZWFkQXJyYXlzKFtcIltcIiArIG5vdyArIFwiXSAgXCIgKyBpbnN0YW5jZS5uYW1lICsgXCI6XCJdLCBhcmdzKSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBdHRlbXB0ZWQgdG8gbG9nIGEgbWVzc2FnZSB3aXRoIGFuIGludmFsaWQgbG9nVHlwZSAodmFsdWU6IFwiICsgbG9nVHlwZSArIFwiKVwiKTtcclxuICAgIH1cclxufTtcclxudmFyIExvZ2dlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8qKlxyXG4gICAgICogR2l2ZXMgeW91IGFuIGluc3RhbmNlIG9mIGEgTG9nZ2VyIHRvIGNhcHR1cmUgbWVzc2FnZXMgYWNjb3JkaW5nIHRvXHJcbiAgICAgKiBGaXJlYmFzZSdzIGxvZ2dpbmcgc2NoZW1lLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIHRoYXQgdGhlIGxvZ3Mgd2lsbCBiZSBhc3NvY2lhdGVkIHdpdGhcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gTG9nZ2VyKG5hbWUpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBsb2cgbGV2ZWwgb2YgdGhlIGdpdmVuIExvZ2dlciBpbnN0YW5jZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9sb2dMZXZlbCA9IGRlZmF1bHRMb2dMZXZlbDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgbWFpbiAoaW50ZXJuYWwpIGxvZyBoYW5kbGVyIGZvciB0aGUgTG9nZ2VyIGluc3RhbmNlLlxyXG4gICAgICAgICAqIENhbiBiZSBzZXQgdG8gYSBuZXcgZnVuY3Rpb24gaW4gaW50ZXJuYWwgcGFja2FnZSBjb2RlIGJ1dCBub3QgYnkgdXNlci5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyID0gZGVmYXVsdExvZ0hhbmRsZXI7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIG9wdGlvbmFsLCBhZGRpdGlvbmFsLCB1c2VyLWRlZmluZWQgbG9nIGhhbmRsZXIgZm9yIHRoZSBMb2dnZXIgaW5zdGFuY2UuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENhcHR1cmUgdGhlIGN1cnJlbnQgaW5zdGFuY2UgZm9yIGxhdGVyIHVzZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGluc3RhbmNlcy5wdXNoKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KExvZ2dlci5wcm90b3R5cGUsIFwibG9nTGV2ZWxcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbG9nTGV2ZWw7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICAgICAgaWYgKCEodmFsIGluIExvZ0xldmVsKSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgdmFsdWUgXFxcIlwiICsgdmFsICsgXCJcXFwiIGFzc2lnbmVkIHRvIGBsb2dMZXZlbGBcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fbG9nTGV2ZWwgPSB2YWw7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgLy8gV29ya2Fyb3VuZCBmb3Igc2V0dGVyL2dldHRlciBoYXZpbmcgdG8gYmUgdGhlIHNhbWUgdHlwZS5cclxuICAgIExvZ2dlci5wcm90b3R5cGUuc2V0TG9nTGV2ZWwgPSBmdW5jdGlvbiAodmFsKSB7XHJcbiAgICAgICAgdGhpcy5fbG9nTGV2ZWwgPSB0eXBlb2YgdmFsID09PSAnc3RyaW5nJyA/IGxldmVsU3RyaW5nVG9FbnVtW3ZhbF0gOiB2YWw7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KExvZ2dlci5wcm90b3R5cGUsIFwibG9nSGFuZGxlclwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9sb2dIYW5kbGVyO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBhc3NpZ25lZCB0byBgbG9nSGFuZGxlcmAgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fbG9nSGFuZGxlciA9IHZhbDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTG9nZ2VyLnByb3RvdHlwZSwgXCJ1c2VyTG9nSGFuZGxlclwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl91c2VyTG9nSGFuZGxlcjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbCkge1xyXG4gICAgICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciA9IHZhbDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBmdW5jdGlvbnMgYmVsb3cgYXJlIGFsbCBiYXNlZCBvbiB0aGUgYGNvbnNvbGVgIGludGVyZmFjZVxyXG4gICAgICovXHJcbiAgICBMb2dnZXIucHJvdG90eXBlLmRlYnVnID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBhcmdzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJiB0aGlzLl91c2VyTG9nSGFuZGxlci5hcHBseSh0aGlzLCBfX3NwcmVhZEFycmF5cyhbdGhpcywgTG9nTGV2ZWwuREVCVUddLCBhcmdzKSk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlci5hcHBseSh0aGlzLCBfX3NwcmVhZEFycmF5cyhbdGhpcywgTG9nTGV2ZWwuREVCVUddLCBhcmdzKSk7XHJcbiAgICB9O1xyXG4gICAgTG9nZ2VyLnByb3RvdHlwZS5sb2cgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmIHRoaXMuX3VzZXJMb2dIYW5kbGVyLmFwcGx5KHRoaXMsIF9fc3ByZWFkQXJyYXlzKFt0aGlzLCBMb2dMZXZlbC5WRVJCT1NFXSwgYXJncykpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIuYXBwbHkodGhpcywgX19zcHJlYWRBcnJheXMoW3RoaXMsIExvZ0xldmVsLlZFUkJPU0VdLCBhcmdzKSk7XHJcbiAgICB9O1xyXG4gICAgTG9nZ2VyLnByb3RvdHlwZS5pbmZvID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBhcmdzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJiB0aGlzLl91c2VyTG9nSGFuZGxlci5hcHBseSh0aGlzLCBfX3NwcmVhZEFycmF5cyhbdGhpcywgTG9nTGV2ZWwuSU5GT10sIGFyZ3MpKTtcclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyLmFwcGx5KHRoaXMsIF9fc3ByZWFkQXJyYXlzKFt0aGlzLCBMb2dMZXZlbC5JTkZPXSwgYXJncykpO1xyXG4gICAgfTtcclxuICAgIExvZ2dlci5wcm90b3R5cGUud2FybiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIuYXBwbHkodGhpcywgX19zcHJlYWRBcnJheXMoW3RoaXMsIExvZ0xldmVsLldBUk5dLCBhcmdzKSk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlci5hcHBseSh0aGlzLCBfX3NwcmVhZEFycmF5cyhbdGhpcywgTG9nTGV2ZWwuV0FSTl0sIGFyZ3MpKTtcclxuICAgIH07XHJcbiAgICBMb2dnZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBhcmdzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJiB0aGlzLl91c2VyTG9nSGFuZGxlci5hcHBseSh0aGlzLCBfX3NwcmVhZEFycmF5cyhbdGhpcywgTG9nTGV2ZWwuRVJST1JdLCBhcmdzKSk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlci5hcHBseSh0aGlzLCBfX3NwcmVhZEFycmF5cyhbdGhpcywgTG9nTGV2ZWwuRVJST1JdLCBhcmdzKSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIExvZ2dlcjtcclxufSgpKTtcclxuZnVuY3Rpb24gc2V0TG9nTGV2ZWwobGV2ZWwpIHtcclxuICAgIGluc3RhbmNlcy5mb3JFYWNoKGZ1bmN0aW9uIChpbnN0KSB7XHJcbiAgICAgICAgaW5zdC5zZXRMb2dMZXZlbChsZXZlbCk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBzZXRVc2VyTG9nSGFuZGxlcihsb2dDYWxsYmFjaywgb3B0aW9ucykge1xyXG4gICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcclxuICAgICAgICB2YXIgY3VzdG9tTG9nTGV2ZWwgPSBudWxsO1xyXG4gICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMubGV2ZWwpIHtcclxuICAgICAgICAgICAgY3VzdG9tTG9nTGV2ZWwgPSBsZXZlbFN0cmluZ1RvRW51bVtvcHRpb25zLmxldmVsXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxvZ0NhbGxiYWNrID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLnVzZXJMb2dIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLnVzZXJMb2dIYW5kbGVyID0gZnVuY3Rpb24gKGluc3RhbmNlLCBsZXZlbCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMjsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJnc1tfaSAtIDJdID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gYXJnc1xyXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGFyZykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhcmcgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGFyZyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGFyZyA9PT0gJ251bWJlcicgfHwgdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcmcudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYXJnIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZy5tZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShhcmcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChpZ25vcmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoYXJnKSB7IHJldHVybiBhcmc7IH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmpvaW4oJyAnKTtcclxuICAgICAgICAgICAgICAgIGlmIChsZXZlbCA+PSAoY3VzdG9tTG9nTGV2ZWwgIT09IG51bGwgJiYgY3VzdG9tTG9nTGV2ZWwgIT09IHZvaWQgMCA/IGN1c3RvbUxvZ0xldmVsIDogaW5zdGFuY2UubG9nTGV2ZWwpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9nQ2FsbGJhY2soe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXZlbDogTG9nTGV2ZWxbbGV2ZWxdLnRvTG93ZXJDYXNlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3M6IGFyZ3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGluc3RhbmNlLm5hbWVcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgZm9yICh2YXIgX2kgPSAwLCBpbnN0YW5jZXNfMSA9IGluc3RhbmNlczsgX2kgPCBpbnN0YW5jZXNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICB2YXIgaW5zdGFuY2UgPSBpbnN0YW5jZXNfMVtfaV07XHJcbiAgICAgICAgX2xvb3BfMShpbnN0YW5jZSk7XHJcbiAgICB9XHJcbn1cblxuZXhwb3J0IHsgTG9nTGV2ZWwsIExvZ2dlciwgc2V0TG9nTGV2ZWwsIHNldFVzZXJMb2dIYW5kbGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20uanMubWFwXG4iLCJpbXBvcnQgeyBfX3ZhbHVlcywgX19hc3NpZ24gfSBmcm9tICd0c2xpYic7XG5pbXBvcnQgeyBFcnJvckZhY3RvcnksIGRlZXBDb3B5LCBjb250YWlucywgZGVlcEV4dGVuZCwgY3JlYXRlU3Vic2NyaWJlLCBpc0Jyb3dzZXIsIGlzTm9kZSB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IENvbXBvbmVudENvbnRhaW5lciwgQ29tcG9uZW50IH0gZnJvbSAnQGZpcmViYXNlL2NvbXBvbmVudCc7XG5pbXBvcnQgeyBMb2dnZXIsIHNldExvZ0xldmVsLCBzZXRVc2VyTG9nSGFuZGxlciB9IGZyb20gJ0BmaXJlYmFzZS9sb2dnZXInO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgX2E7XHJcbnZhciBFUlJPUlMgPSAoX2EgPSB7fSxcclxuICAgIF9hW1wibm8tYXBwXCIgLyogTk9fQVBQICovXSA9IFwiTm8gRmlyZWJhc2UgQXBwICd7JGFwcE5hbWV9JyBoYXMgYmVlbiBjcmVhdGVkIC0gXCIgK1xyXG4gICAgICAgICdjYWxsIEZpcmViYXNlIEFwcC5pbml0aWFsaXplQXBwKCknLFxyXG4gICAgX2FbXCJiYWQtYXBwLW5hbWVcIiAvKiBCQURfQVBQX05BTUUgKi9dID0gXCJJbGxlZ2FsIEFwcCBuYW1lOiAneyRhcHBOYW1lfVwiLFxyXG4gICAgX2FbXCJkdXBsaWNhdGUtYXBwXCIgLyogRFVQTElDQVRFX0FQUCAqL10gPSBcIkZpcmViYXNlIEFwcCBuYW1lZCAneyRhcHBOYW1lfScgYWxyZWFkeSBleGlzdHNcIixcclxuICAgIF9hW1wiYXBwLWRlbGV0ZWRcIiAvKiBBUFBfREVMRVRFRCAqL10gPSBcIkZpcmViYXNlIEFwcCBuYW1lZCAneyRhcHBOYW1lfScgYWxyZWFkeSBkZWxldGVkXCIsXHJcbiAgICBfYVtcImludmFsaWQtYXBwLWFyZ3VtZW50XCIgLyogSU5WQUxJRF9BUFBfQVJHVU1FTlQgKi9dID0gJ2ZpcmViYXNlLnskYXBwTmFtZX0oKSB0YWtlcyBlaXRoZXIgbm8gYXJndW1lbnQgb3IgYSAnICtcclxuICAgICAgICAnRmlyZWJhc2UgQXBwIGluc3RhbmNlLicsXHJcbiAgICBfYVtcImludmFsaWQtbG9nLWFyZ3VtZW50XCIgLyogSU5WQUxJRF9MT0dfQVJHVU1FTlQgKi9dID0gJ0ZpcnN0IGFyZ3VtZW50IHRvIGBvbkxvZ2AgbXVzdCBiZSBudWxsIG9yIGEgZnVuY3Rpb24uJyxcclxuICAgIF9hKTtcclxudmFyIEVSUk9SX0ZBQ1RPUlkgPSBuZXcgRXJyb3JGYWN0b3J5KCdhcHAnLCAnRmlyZWJhc2UnLCBFUlJPUlMpO1xuXG52YXIgbmFtZSQxID0gXCJAZmlyZWJhc2UvYXBwXCI7XG52YXIgdmVyc2lvbiA9IFwiMC42LjEzXCI7XG5cbnZhciBuYW1lJDIgPSBcIkBmaXJlYmFzZS9hbmFseXRpY3NcIjtcblxudmFyIG5hbWUkMyA9IFwiQGZpcmViYXNlL2F1dGhcIjtcblxudmFyIG5hbWUkNCA9IFwiQGZpcmViYXNlL2RhdGFiYXNlXCI7XG5cbnZhciBuYW1lJDUgPSBcIkBmaXJlYmFzZS9mdW5jdGlvbnNcIjtcblxudmFyIG5hbWUkNiA9IFwiQGZpcmViYXNlL2luc3RhbGxhdGlvbnNcIjtcblxudmFyIG5hbWUkNyA9IFwiQGZpcmViYXNlL21lc3NhZ2luZ1wiO1xuXG52YXIgbmFtZSQ4ID0gXCJAZmlyZWJhc2UvcGVyZm9ybWFuY2VcIjtcblxudmFyIG5hbWUkOSA9IFwiQGZpcmViYXNlL3JlbW90ZS1jb25maWdcIjtcblxudmFyIG5hbWUkYSA9IFwiQGZpcmViYXNlL3N0b3JhZ2VcIjtcblxudmFyIG5hbWUkYiA9IFwiQGZpcmViYXNlL2ZpcmVzdG9yZVwiO1xuXG52YXIgbmFtZSRjID0gXCJmaXJlYmFzZS13cmFwcGVyXCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBfYSQxO1xyXG52YXIgREVGQVVMVF9FTlRSWV9OQU1FID0gJ1tERUZBVUxUXSc7XHJcbnZhciBQTEFURk9STV9MT0dfU1RSSU5HID0gKF9hJDEgPSB7fSxcclxuICAgIF9hJDFbbmFtZSQxXSA9ICdmaXJlLWNvcmUnLFxyXG4gICAgX2EkMVtuYW1lJDJdID0gJ2ZpcmUtYW5hbHl0aWNzJyxcclxuICAgIF9hJDFbbmFtZSQzXSA9ICdmaXJlLWF1dGgnLFxyXG4gICAgX2EkMVtuYW1lJDRdID0gJ2ZpcmUtcnRkYicsXHJcbiAgICBfYSQxW25hbWUkNV0gPSAnZmlyZS1mbicsXHJcbiAgICBfYSQxW25hbWUkNl0gPSAnZmlyZS1paWQnLFxyXG4gICAgX2EkMVtuYW1lJDddID0gJ2ZpcmUtZmNtJyxcclxuICAgIF9hJDFbbmFtZSQ4XSA9ICdmaXJlLXBlcmYnLFxyXG4gICAgX2EkMVtuYW1lJDldID0gJ2ZpcmUtcmMnLFxyXG4gICAgX2EkMVtuYW1lJGFdID0gJ2ZpcmUtZ2NzJyxcclxuICAgIF9hJDFbbmFtZSRiXSA9ICdmaXJlLWZzdCcsXHJcbiAgICBfYSQxWydmaXJlLWpzJ10gPSAnZmlyZS1qcycsXHJcbiAgICBfYSQxW25hbWUkY10gPSAnZmlyZS1qcy1hbGwnLFxyXG4gICAgX2EkMSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBsb2dnZXIgPSBuZXcgTG9nZ2VyKCdAZmlyZWJhc2UvYXBwJyk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBHbG9iYWwgY29udGV4dCBvYmplY3QgZm9yIGEgY29sbGVjdGlvbiBvZiBzZXJ2aWNlcyB1c2luZ1xyXG4gKiBhIHNoYXJlZCBhdXRoZW50aWNhdGlvbiBzdGF0ZS5cclxuICovXHJcbnZhciBGaXJlYmFzZUFwcEltcGwgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBGaXJlYmFzZUFwcEltcGwob3B0aW9ucywgY29uZmlnLCBmaXJlYmFzZV8pIHtcclxuICAgICAgICB2YXIgZV8xLCBfYTtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuZmlyZWJhc2VfID0gZmlyZWJhc2VfO1xyXG4gICAgICAgIHRoaXMuaXNEZWxldGVkXyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMubmFtZV8gPSBjb25maWcubmFtZTtcclxuICAgICAgICB0aGlzLmF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZF8gPVxyXG4gICAgICAgICAgICBjb25maWcuYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkIHx8IGZhbHNlO1xyXG4gICAgICAgIHRoaXMub3B0aW9uc18gPSBkZWVwQ29weShvcHRpb25zKTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IG5ldyBDb21wb25lbnRDb250YWluZXIoY29uZmlnLm5hbWUpO1xyXG4gICAgICAgIC8vIGFkZCBpdHNlbGYgdG8gY29udGFpbmVyXHJcbiAgICAgICAgdGhpcy5fYWRkQ29tcG9uZW50KG5ldyBDb21wb25lbnQoJ2FwcCcsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzOyB9LCBcIlBVQkxJQ1wiIC8qIFBVQkxJQyAqLykpO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIHBvcHVsYXRlIENvbXBvbmVudENvbnRhaW5lciB3aXRoIGV4aXN0aW5nIGNvbXBvbmVudHNcclxuICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyh0aGlzLmZpcmViYXNlXy5JTlRFUk5BTC5jb21wb25lbnRzLnZhbHVlcygpKSwgX2MgPSBfYi5uZXh0KCk7ICFfYy5kb25lOyBfYyA9IF9iLm5leHQoKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbXBvbmVudCA9IF9jLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYWRkQ29tcG9uZW50KGNvbXBvbmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH1cclxuICAgICAgICBmaW5hbGx5IHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYi5yZXR1cm4pKSBfYS5jYWxsKF9iKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpcmViYXNlQXBwSW1wbC5wcm90b3R5cGUsIFwiYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZF8oKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkXztcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbCkge1xyXG4gICAgICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkXygpO1xyXG4gICAgICAgICAgICB0aGlzLmF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZF8gPSB2YWw7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpcmViYXNlQXBwSW1wbC5wcm90b3R5cGUsIFwibmFtZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWRfKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5hbWVfO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGaXJlYmFzZUFwcEltcGwucHJvdG90eXBlLCBcIm9wdGlvbnNcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkXygpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zXztcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBGaXJlYmFzZUFwcEltcGwucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgICAgICAgICBfdGhpcy5jaGVja0Rlc3Ryb3llZF8oKTtcclxuICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMuZmlyZWJhc2VfLklOVEVSTkFMLnJlbW92ZUFwcChfdGhpcy5uYW1lXyk7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChfdGhpcy5jb250YWluZXIuZ2V0UHJvdmlkZXJzKCkubWFwKGZ1bmN0aW9uIChwcm92aWRlcikgeyByZXR1cm4gcHJvdmlkZXIuZGVsZXRlKCk7IH0pKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmlzRGVsZXRlZF8gPSB0cnVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJuIGEgc2VydmljZSBpbnN0YW5jZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBhcHAgKGNyZWF0aW5nIGl0XHJcbiAgICAgKiBvbiBkZW1hbmQpLCBpZGVudGlmaWVkIGJ5IHRoZSBwYXNzZWQgaW5zdGFuY2VJZGVudGlmaWVyLlxyXG4gICAgICpcclxuICAgICAqIE5PVEU6IEN1cnJlbnRseSBzdG9yYWdlIGFuZCBmdW5jdGlvbnMgYXJlIHRoZSBvbmx5IG9uZXMgdGhhdCBhcmUgbGV2ZXJhZ2luZyB0aGlzXHJcbiAgICAgKiBmdW5jdGlvbmFsaXR5LiBUaGV5IGludm9rZSBpdCBieSBjYWxsaW5nOlxyXG4gICAgICpcclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIGZpcmViYXNlLmFwcCgpLnN0b3JhZ2UoJ1NUT1JBR0UgQlVDS0VUIElEJylcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIFRoZSBzZXJ2aWNlIG5hbWUgaXMgcGFzc2VkIHRvIHRoaXMgYWxyZWFkeVxyXG4gICAgICogQGludGVybmFsXHJcbiAgICAgKi9cclxuICAgIEZpcmViYXNlQXBwSW1wbC5wcm90b3R5cGUuX2dldFNlcnZpY2UgPSBmdW5jdGlvbiAobmFtZSwgaW5zdGFuY2VJZGVudGlmaWVyKSB7XHJcbiAgICAgICAgaWYgKGluc3RhbmNlSWRlbnRpZmllciA9PT0gdm9pZCAwKSB7IGluc3RhbmNlSWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRTsgfVxyXG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWRfKCk7XHJcbiAgICAgICAgLy8gZ2V0SW1tZWRpYXRlIHdpbGwgYWx3YXlzIHN1Y2NlZWQgYmVjYXVzZSBfZ2V0U2VydmljZSBpcyBvbmx5IGNhbGxlZCBmb3IgcmVnaXN0ZXJlZCBjb21wb25lbnRzLlxyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5lci5nZXRQcm92aWRlcihuYW1lKS5nZXRJbW1lZGlhdGUoe1xyXG4gICAgICAgICAgICBpZGVudGlmaWVyOiBpbnN0YW5jZUlkZW50aWZpZXJcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZSBhIHNlcnZpY2UgaW5zdGFuY2UgZnJvbSB0aGUgY2FjaGUsIHNvIHdlIHdpbGwgY3JlYXRlIGEgbmV3IGluc3RhbmNlIGZvciB0aGlzIHNlcnZpY2VcclxuICAgICAqIHdoZW4gcGVvcGxlIHRyeSB0byBnZXQgdGhpcyBzZXJ2aWNlIGFnYWluLlxyXG4gICAgICpcclxuICAgICAqIE5PVEU6IGN1cnJlbnRseSBvbmx5IGZpcmVzdG9yZSBpcyB1c2luZyB0aGlzIGZ1bmN0aW9uYWxpdHkgdG8gc3VwcG9ydCBmaXJlc3RvcmUgc2h1dGRvd24uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIHNlcnZpY2UgbmFtZVxyXG4gICAgICogQHBhcmFtIGluc3RhbmNlSWRlbnRpZmllciBpbnN0YW5jZSBpZGVudGlmaWVyIGluIGNhc2UgbXVsdGlwbGUgaW5zdGFuY2VzIGFyZSBhbGxvd2VkXHJcbiAgICAgKiBAaW50ZXJuYWxcclxuICAgICAqL1xyXG4gICAgRmlyZWJhc2VBcHBJbXBsLnByb3RvdHlwZS5fcmVtb3ZlU2VydmljZUluc3RhbmNlID0gZnVuY3Rpb24gKG5hbWUsIGluc3RhbmNlSWRlbnRpZmllcikge1xyXG4gICAgICAgIGlmIChpbnN0YW5jZUlkZW50aWZpZXIgPT09IHZvaWQgMCkgeyBpbnN0YW5jZUlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUU7IH1cclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmdldFByb3ZpZGVyKG5hbWUpLmNsZWFySW5zdGFuY2UoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBjb21wb25lbnQgdGhlIGNvbXBvbmVudCBiZWluZyBhZGRlZCB0byB0aGlzIGFwcCdzIGNvbnRhaW5lclxyXG4gICAgICovXHJcbiAgICBGaXJlYmFzZUFwcEltcGwucHJvdG90eXBlLl9hZGRDb21wb25lbnQgPSBmdW5jdGlvbiAoY29tcG9uZW50KSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ29tcG9uZW50KGNvbXBvbmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhcIkNvbXBvbmVudCBcIiArIGNvbXBvbmVudC5uYW1lICsgXCIgZmFpbGVkIHRvIHJlZ2lzdGVyIHdpdGggRmlyZWJhc2VBcHAgXCIgKyB0aGlzLm5hbWUsIGUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBGaXJlYmFzZUFwcEltcGwucHJvdG90eXBlLl9hZGRPck92ZXJ3cml0ZUNvbXBvbmVudCA9IGZ1bmN0aW9uIChjb21wb25lbnQpIHtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5hZGRPck92ZXJ3cml0ZUNvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBmdW5jdGlvbiB3aWxsIHRocm93IGFuIEVycm9yIGlmIHRoZSBBcHAgaGFzIGFscmVhZHkgYmVlbiBkZWxldGVkIC1cclxuICAgICAqIHVzZSBiZWZvcmUgcGVyZm9ybWluZyBBUEkgYWN0aW9ucyBvbiB0aGUgQXBwLlxyXG4gICAgICovXHJcbiAgICBGaXJlYmFzZUFwcEltcGwucHJvdG90eXBlLmNoZWNrRGVzdHJveWVkXyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5pc0RlbGV0ZWRfKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiYXBwLWRlbGV0ZWRcIiAvKiBBUFBfREVMRVRFRCAqLywgeyBhcHBOYW1lOiB0aGlzLm5hbWVfIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gRmlyZWJhc2VBcHBJbXBsO1xyXG59KCkpO1xyXG4vLyBQcmV2ZW50IGRlYWQtY29kZSBlbGltaW5hdGlvbiBvZiB0aGVzZSBtZXRob2RzIHcvbyBpbnZhbGlkIHByb3BlcnR5XHJcbi8vIGNvcHlpbmcuXHJcbihGaXJlYmFzZUFwcEltcGwucHJvdG90eXBlLm5hbWUgJiYgRmlyZWJhc2VBcHBJbXBsLnByb3RvdHlwZS5vcHRpb25zKSB8fFxyXG4gICAgRmlyZWJhc2VBcHBJbXBsLnByb3RvdHlwZS5kZWxldGUgfHxcclxuICAgIGNvbnNvbGUubG9nKCdkYycpO1xuXG52YXIgdmVyc2lvbiQxID0gXCI4LjAuMVwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQmVjYXVzZSBhdXRoIGNhbid0IHNoYXJlIGNvZGUgd2l0aCBvdGhlciBjb21wb25lbnRzLCB3ZSBhdHRhY2ggdGhlIHV0aWxpdHkgZnVuY3Rpb25zXHJcbiAqIGluIGFuIGludGVybmFsIG5hbWVzcGFjZSB0byBzaGFyZSBjb2RlLlxyXG4gKiBUaGlzIGZ1bmN0aW9uIHJldHVybiBhIGZpcmViYXNlIG5hbWVzcGFjZSBvYmplY3Qgd2l0aG91dFxyXG4gKiBhbnkgdXRpbGl0eSBmdW5jdGlvbnMsIHNvIGl0IGNhbiBiZSBzaGFyZWQgYmV0d2VlbiB0aGUgcmVndWxhciBmaXJlYmFzZU5hbWVzcGFjZSBhbmRcclxuICogdGhlIGxpdGUgdmVyc2lvbi5cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZUZpcmViYXNlTmFtZXNwYWNlQ29yZShmaXJlYmFzZUFwcEltcGwpIHtcclxuICAgIHZhciBhcHBzID0ge307XHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgdmFyIGNvbXBvbmVudHMgPSBuZXcgTWFwKCk7XHJcbiAgICAvLyBBIG5hbWVzcGFjZSBpcyBhIHBsYWluIEphdmFTY3JpcHQgT2JqZWN0LlxyXG4gICAgdmFyIG5hbWVzcGFjZSA9IHtcclxuICAgICAgICAvLyBIYWNrIHRvIHByZXZlbnQgQmFiZWwgZnJvbSBtb2RpZnlpbmcgdGhlIG9iamVjdCByZXR1cm5lZFxyXG4gICAgICAgIC8vIGFzIHRoZSBmaXJlYmFzZSBuYW1lc3BhY2UuXHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIF9fZXNNb2R1bGU6IHRydWUsXHJcbiAgICAgICAgaW5pdGlhbGl6ZUFwcDogaW5pdGlhbGl6ZUFwcCxcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgYXBwOiBhcHAsXHJcbiAgICAgICAgcmVnaXN0ZXJWZXJzaW9uOiByZWdpc3RlclZlcnNpb24sXHJcbiAgICAgICAgc2V0TG9nTGV2ZWw6IHNldExvZ0xldmVsLFxyXG4gICAgICAgIG9uTG9nOiBvbkxvZyxcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgYXBwczogbnVsbCxcclxuICAgICAgICBTREtfVkVSU0lPTjogdmVyc2lvbiQxLFxyXG4gICAgICAgIElOVEVSTkFMOiB7XHJcbiAgICAgICAgICAgIHJlZ2lzdGVyQ29tcG9uZW50OiByZWdpc3RlckNvbXBvbmVudCxcclxuICAgICAgICAgICAgcmVtb3ZlQXBwOiByZW1vdmVBcHAsXHJcbiAgICAgICAgICAgIGNvbXBvbmVudHM6IGNvbXBvbmVudHMsXHJcbiAgICAgICAgICAgIHVzZUFzU2VydmljZTogdXNlQXNTZXJ2aWNlXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8vIEluamVjdCBhIGNpcmN1bGFyIGRlZmF1bHQgZXhwb3J0IHRvIGFsbG93IEJhYmVsIHVzZXJzIHdobyB3ZXJlIHByZXZpb3VzbHlcclxuICAgIC8vIHVzaW5nOlxyXG4gICAgLy9cclxuICAgIC8vICAgaW1wb3J0IGZpcmViYXNlIGZyb20gJ2ZpcmViYXNlJztcclxuICAgIC8vICAgd2hpY2ggYmVjb21lczogdmFyIGZpcmViYXNlID0gcmVxdWlyZSgnZmlyZWJhc2UnKS5kZWZhdWx0O1xyXG4gICAgLy9cclxuICAgIC8vIGluc3RlYWQgb2ZcclxuICAgIC8vXHJcbiAgICAvLyAgIGltcG9ydCAqIGFzIGZpcmViYXNlIGZyb20gJ2ZpcmViYXNlJztcclxuICAgIC8vICAgd2hpY2ggYmVjb21lczogdmFyIGZpcmViYXNlID0gcmVxdWlyZSgnZmlyZWJhc2UnKTtcclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICBuYW1lc3BhY2VbJ2RlZmF1bHQnXSA9IG5hbWVzcGFjZTtcclxuICAgIC8vIGZpcmViYXNlLmFwcHMgaXMgYSByZWFkLW9ubHkgZ2V0dGVyLlxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5hbWVzcGFjZSwgJ2FwcHMnLCB7XHJcbiAgICAgICAgZ2V0OiBnZXRBcHBzXHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICogQ2FsbGVkIGJ5IEFwcC5kZWxldGUoKSAtIGJ1dCBiZWZvcmUgYW55IHNlcnZpY2VzIGFzc29jaWF0ZWQgd2l0aCB0aGUgQXBwXHJcbiAgICAgKiBhcmUgZGVsZXRlZC5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gcmVtb3ZlQXBwKG5hbWUpIHtcclxuICAgICAgICBkZWxldGUgYXBwc1tuYW1lXTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogR2V0IHRoZSBBcHAgb2JqZWN0IGZvciBhIGdpdmVuIG5hbWUgKG9yIERFRkFVTFQpLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBhcHAobmFtZSkge1xyXG4gICAgICAgIG5hbWUgPSBuYW1lIHx8IERFRkFVTFRfRU5UUllfTkFNRTtcclxuICAgICAgICBpZiAoIWNvbnRhaW5zKGFwcHMsIG5hbWUpKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwibm8tYXBwXCIgLyogTk9fQVBQICovLCB7IGFwcE5hbWU6IG5hbWUgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhcHBzW25hbWVdO1xyXG4gICAgfVxyXG4gICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgYXBwWydBcHAnXSA9IGZpcmViYXNlQXBwSW1wbDtcclxuICAgIGZ1bmN0aW9uIGluaXRpYWxpemVBcHAob3B0aW9ucywgcmF3Q29uZmlnKSB7XHJcbiAgICAgICAgaWYgKHJhd0NvbmZpZyA9PT0gdm9pZCAwKSB7IHJhd0NvbmZpZyA9IHt9OyB9XHJcbiAgICAgICAgaWYgKHR5cGVvZiByYXdDb25maWcgIT09ICdvYmplY3QnIHx8IHJhd0NvbmZpZyA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICB2YXIgbmFtZV8xID0gcmF3Q29uZmlnO1xyXG4gICAgICAgICAgICByYXdDb25maWcgPSB7IG5hbWU6IG5hbWVfMSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgY29uZmlnID0gcmF3Q29uZmlnO1xyXG4gICAgICAgIGlmIChjb25maWcubmFtZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGNvbmZpZy5uYW1lID0gREVGQVVMVF9FTlRSWV9OQU1FO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbmFtZSA9IGNvbmZpZy5uYW1lO1xyXG4gICAgICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycgfHwgIW5hbWUpIHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJiYWQtYXBwLW5hbWVcIiAvKiBCQURfQVBQX05BTUUgKi8sIHtcclxuICAgICAgICAgICAgICAgIGFwcE5hbWU6IFN0cmluZyhuYW1lKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNvbnRhaW5zKGFwcHMsIG5hbWUpKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiZHVwbGljYXRlLWFwcFwiIC8qIERVUExJQ0FURV9BUFAgKi8sIHsgYXBwTmFtZTogbmFtZSB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGFwcCA9IG5ldyBmaXJlYmFzZUFwcEltcGwob3B0aW9ucywgY29uZmlnLCBuYW1lc3BhY2UpO1xyXG4gICAgICAgIGFwcHNbbmFtZV0gPSBhcHA7XHJcbiAgICAgICAgcmV0dXJuIGFwcDtcclxuICAgIH1cclxuICAgIC8qXHJcbiAgICAgKiBSZXR1cm4gYW4gYXJyYXkgb2YgYWxsIHRoZSBub24tZGVsZXRlZCBGaXJlYmFzZUFwcHMuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGdldEFwcHMoKSB7XHJcbiAgICAgICAgLy8gTWFrZSBhIGNvcHkgc28gY2FsbGVyIGNhbm5vdCBtdXRhdGUgdGhlIGFwcHMgbGlzdC5cclxuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMoYXBwcykubWFwKGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBhcHBzW25hbWVdOyB9KTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHJlZ2lzdGVyQ29tcG9uZW50KGNvbXBvbmVudCkge1xyXG4gICAgICAgIHZhciBlXzEsIF9hO1xyXG4gICAgICAgIHZhciBjb21wb25lbnROYW1lID0gY29tcG9uZW50Lm5hbWU7XHJcbiAgICAgICAgaWYgKGNvbXBvbmVudHMuaGFzKGNvbXBvbmVudE5hbWUpKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhcIlRoZXJlIHdlcmUgbXVsdGlwbGUgYXR0ZW1wdHMgdG8gcmVnaXN0ZXIgY29tcG9uZW50IFwiICsgY29tcG9uZW50TmFtZSArIFwiLlwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbXBvbmVudC50eXBlID09PSBcIlBVQkxJQ1wiIC8qIFBVQkxJQyAqL1xyXG4gICAgICAgICAgICAgICAgPyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWVzcGFjZVtjb21wb25lbnROYW1lXVxyXG4gICAgICAgICAgICAgICAgOiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb21wb25lbnRzLnNldChjb21wb25lbnROYW1lLCBjb21wb25lbnQpO1xyXG4gICAgICAgIC8vIGNyZWF0ZSBzZXJ2aWNlIG5hbWVzcGFjZSBmb3IgcHVibGljIGNvbXBvbmVudHNcclxuICAgICAgICBpZiAoY29tcG9uZW50LnR5cGUgPT09IFwiUFVCTElDXCIgLyogUFVCTElDICovKSB7XHJcbiAgICAgICAgICAgIC8vIFRoZSBTZXJ2aWNlIG5hbWVzcGFjZSBpcyBhbiBhY2Nlc3NvciBmdW5jdGlvbiAuLi5cclxuICAgICAgICAgICAgdmFyIHNlcnZpY2VOYW1lc3BhY2UgPSBmdW5jdGlvbiAoYXBwQXJnKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXBwQXJnID09PSB2b2lkIDApIHsgYXBwQXJnID0gYXBwKCk7IH1cclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFwcEFyZ1tjb21wb25lbnROYW1lXSAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEludmFsaWQgYXJndW1lbnQuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBoYXBwZW5zIGluIHRoZSBmb2xsb3dpbmcgY2FzZTogZmlyZWJhc2Uuc3RvcmFnZSgnZ3M6LycpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpbnZhbGlkLWFwcC1hcmd1bWVudFwiIC8qIElOVkFMSURfQVBQX0FSR1VNRU5UICovLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcE5hbWU6IGNvbXBvbmVudE5hbWVcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIEZvcndhcmQgc2VydmljZSBpbnN0YW5jZSBsb29rdXAgdG8gdGhlIEZpcmViYXNlQXBwLlxyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgICAgIHJldHVybiBhcHBBcmdbY29tcG9uZW50TmFtZV0oKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgLy8gLi4uIGFuZCBhIGNvbnRhaW5lciBmb3Igc2VydmljZS1sZXZlbCBwcm9wZXJ0aWVzLlxyXG4gICAgICAgICAgICBpZiAoY29tcG9uZW50LnNlcnZpY2VQcm9wcyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBkZWVwRXh0ZW5kKHNlcnZpY2VOYW1lc3BhY2UsIGNvbXBvbmVudC5zZXJ2aWNlUHJvcHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgIG5hbWVzcGFjZVtjb21wb25lbnROYW1lXSA9IHNlcnZpY2VOYW1lc3BhY2U7XHJcbiAgICAgICAgICAgIC8vIFBhdGNoIHRoZSBGaXJlYmFzZUFwcEltcGwgcHJvdG90eXBlXHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgIGZpcmViYXNlQXBwSW1wbC5wcm90b3R5cGVbY29tcG9uZW50TmFtZV0gPVxyXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogVGhlIGVzbGludCBkaXNhYmxlIGNhbiBiZSByZW1vdmVkIGFuZCB0aGUgJ2lnbm9yZVJlc3RBcmdzJ1xyXG4gICAgICAgICAgICAgICAgLy8gb3B0aW9uIGFkZGVkIHRvIHRoZSBuby1leHBsaWNpdC1hbnkgcnVsZSB3aGVuIEVTbGludCByZWxlYXNlcyBpdC5cclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzZXJ2aWNlRnhuID0gdGhpcy5fZ2V0U2VydmljZS5iaW5kKHRoaXMsIGNvbXBvbmVudE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlRnhuLmFwcGx5KHRoaXMsIGNvbXBvbmVudC5tdWx0aXBsZUluc3RhbmNlcyA/IGFyZ3MgOiBbXSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBhZGQgdGhlIGNvbXBvbmVudCB0byBleGlzdGluZyBhcHAgaW5zdGFuY2VzXHJcbiAgICAgICAgICAgIGZvciAodmFyIF9iID0gX192YWx1ZXMoT2JqZWN0LmtleXMoYXBwcykpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXBwTmFtZSA9IF9jLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgYXBwc1thcHBOYW1lXS5fYWRkQ29tcG9uZW50KGNvbXBvbmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH1cclxuICAgICAgICBmaW5hbGx5IHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYi5yZXR1cm4pKSBfYS5jYWxsKF9iKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjb21wb25lbnQudHlwZSA9PT0gXCJQVUJMSUNcIiAvKiBQVUJMSUMgKi9cclxuICAgICAgICAgICAgPyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICAgICAgbmFtZXNwYWNlW2NvbXBvbmVudE5hbWVdXHJcbiAgICAgICAgICAgIDogbnVsbDtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHJlZ2lzdGVyVmVyc2lvbihsaWJyYXJ5S2V5T3JOYW1lLCB2ZXJzaW9uLCB2YXJpYW50KSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIC8vIFRPRE86IFdlIGNhbiB1c2UgdGhpcyBjaGVjayB0byB3aGl0ZWxpc3Qgc3RyaW5ncyB3aGVuL2lmIHdlIHNldCB1cFxyXG4gICAgICAgIC8vIGEgZ29vZCB3aGl0ZWxpc3Qgc3lzdGVtLlxyXG4gICAgICAgIHZhciBsaWJyYXJ5ID0gKF9hID0gUExBVEZPUk1fTE9HX1NUUklOR1tsaWJyYXJ5S2V5T3JOYW1lXSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogbGlicmFyeUtleU9yTmFtZTtcclxuICAgICAgICBpZiAodmFyaWFudCkge1xyXG4gICAgICAgICAgICBsaWJyYXJ5ICs9IFwiLVwiICsgdmFyaWFudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGxpYnJhcnlNaXNtYXRjaCA9IGxpYnJhcnkubWF0Y2goL1xcc3xcXC8vKTtcclxuICAgICAgICB2YXIgdmVyc2lvbk1pc21hdGNoID0gdmVyc2lvbi5tYXRjaCgvXFxzfFxcLy8pO1xyXG4gICAgICAgIGlmIChsaWJyYXJ5TWlzbWF0Y2ggfHwgdmVyc2lvbk1pc21hdGNoKSB7XHJcbiAgICAgICAgICAgIHZhciB3YXJuaW5nID0gW1xyXG4gICAgICAgICAgICAgICAgXCJVbmFibGUgdG8gcmVnaXN0ZXIgbGlicmFyeSBcXFwiXCIgKyBsaWJyYXJ5ICsgXCJcXFwiIHdpdGggdmVyc2lvbiBcXFwiXCIgKyB2ZXJzaW9uICsgXCJcXFwiOlwiXHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgIGlmIChsaWJyYXJ5TWlzbWF0Y2gpIHtcclxuICAgICAgICAgICAgICAgIHdhcm5pbmcucHVzaChcImxpYnJhcnkgbmFtZSBcXFwiXCIgKyBsaWJyYXJ5ICsgXCJcXFwiIGNvbnRhaW5zIGlsbGVnYWwgY2hhcmFjdGVycyAod2hpdGVzcGFjZSBvciBcXFwiL1xcXCIpXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChsaWJyYXJ5TWlzbWF0Y2ggJiYgdmVyc2lvbk1pc21hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICB3YXJuaW5nLnB1c2goJ2FuZCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh2ZXJzaW9uTWlzbWF0Y2gpIHtcclxuICAgICAgICAgICAgICAgIHdhcm5pbmcucHVzaChcInZlcnNpb24gbmFtZSBcXFwiXCIgKyB2ZXJzaW9uICsgXCJcXFwiIGNvbnRhaW5zIGlsbGVnYWwgY2hhcmFjdGVycyAod2hpdGVzcGFjZSBvciBcXFwiL1xcXCIpXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKHdhcm5pbmcuam9pbignICcpKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KGxpYnJhcnkgKyBcIi12ZXJzaW9uXCIsIGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7IGxpYnJhcnk6IGxpYnJhcnksIHZlcnNpb246IHZlcnNpb24gfSk7IH0sIFwiVkVSU0lPTlwiIC8qIFZFUlNJT04gKi8pKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIG9uTG9nKGxvZ0NhbGxiYWNrLCBvcHRpb25zKSB7XHJcbiAgICAgICAgaWYgKGxvZ0NhbGxiYWNrICE9PSBudWxsICYmIHR5cGVvZiBsb2dDYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImludmFsaWQtbG9nLWFyZ3VtZW50XCIgLyogSU5WQUxJRF9MT0dfQVJHVU1FTlQgKi8sIHtcclxuICAgICAgICAgICAgICAgIGFwcE5hbWU6IG5hbWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNldFVzZXJMb2dIYW5kbGVyKGxvZ0NhbGxiYWNrLCBvcHRpb25zKTtcclxuICAgIH1cclxuICAgIC8vIE1hcCB0aGUgcmVxdWVzdGVkIHNlcnZpY2UgdG8gYSByZWdpc3RlcmVkIHNlcnZpY2UgbmFtZVxyXG4gICAgLy8gKHVzZWQgdG8gbWFwIGF1dGggdG8gc2VydmVyQXV0aCBzZXJ2aWNlIHdoZW4gbmVlZGVkKS5cclxuICAgIGZ1bmN0aW9uIHVzZUFzU2VydmljZShhcHAsIG5hbWUpIHtcclxuICAgICAgICBpZiAobmFtZSA9PT0gJ3NlcnZlckF1dGgnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdXNlU2VydmljZSA9IG5hbWU7XHJcbiAgICAgICAgcmV0dXJuIHVzZVNlcnZpY2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmFtZXNwYWNlO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBSZXR1cm4gYSBmaXJlYmFzZSBuYW1lc3BhY2Ugb2JqZWN0LlxyXG4gKlxyXG4gKiBJbiBwcm9kdWN0aW9uLCB0aGlzIHdpbGwgYmUgY2FsbGVkIGV4YWN0bHkgb25jZSBhbmQgdGhlIHJlc3VsdFxyXG4gKiBhc3NpZ25lZCB0byB0aGUgJ2ZpcmViYXNlJyBnbG9iYWwuICBJdCBtYXkgYmUgY2FsbGVkIG11bHRpcGxlIHRpbWVzXHJcbiAqIGluIHVuaXQgdGVzdHMuXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVGaXJlYmFzZU5hbWVzcGFjZSgpIHtcclxuICAgIHZhciBuYW1lc3BhY2UgPSBjcmVhdGVGaXJlYmFzZU5hbWVzcGFjZUNvcmUoRmlyZWJhc2VBcHBJbXBsKTtcclxuICAgIG5hbWVzcGFjZS5JTlRFUk5BTCA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBuYW1lc3BhY2UuSU5URVJOQUwpLCB7IGNyZWF0ZUZpcmViYXNlTmFtZXNwYWNlOiBjcmVhdGVGaXJlYmFzZU5hbWVzcGFjZSxcclxuICAgICAgICBleHRlbmROYW1lc3BhY2U6IGV4dGVuZE5hbWVzcGFjZSxcclxuICAgICAgICBjcmVhdGVTdWJzY3JpYmU6IGNyZWF0ZVN1YnNjcmliZSxcclxuICAgICAgICBFcnJvckZhY3Rvcnk6IEVycm9yRmFjdG9yeSxcclxuICAgICAgICBkZWVwRXh0ZW5kOiBkZWVwRXh0ZW5kIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBQYXRjaCB0aGUgdG9wLWxldmVsIGZpcmViYXNlIG5hbWVzcGFjZSB3aXRoIGFkZGl0aW9uYWwgcHJvcGVydGllcy5cclxuICAgICAqXHJcbiAgICAgKiBmaXJlYmFzZS5JTlRFUk5BTC5leHRlbmROYW1lc3BhY2UoKVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBleHRlbmROYW1lc3BhY2UocHJvcHMpIHtcclxuICAgICAgICBkZWVwRXh0ZW5kKG5hbWVzcGFjZSwgcHJvcHMpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5hbWVzcGFjZTtcclxufVxyXG52YXIgZmlyZWJhc2UgPSBjcmVhdGVGaXJlYmFzZU5hbWVzcGFjZSgpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgUGxhdGZvcm1Mb2dnZXJTZXJ2aWNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUGxhdGZvcm1Mb2dnZXJTZXJ2aWNlKGNvbnRhaW5lcikge1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgfVxyXG4gICAgLy8gSW4gaW5pdGlhbCBpbXBsZW1lbnRhdGlvbiwgdGhpcyB3aWxsIGJlIGNhbGxlZCBieSBpbnN0YWxsYXRpb25zIG9uXHJcbiAgICAvLyBhdXRoIHRva2VuIHJlZnJlc2gsIGFuZCBpbnN0YWxsYXRpb25zIHdpbGwgc2VuZCB0aGlzIHN0cmluZy5cclxuICAgIFBsYXRmb3JtTG9nZ2VyU2VydmljZS5wcm90b3R5cGUuZ2V0UGxhdGZvcm1JbmZvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBwcm92aWRlcnMgPSB0aGlzLmNvbnRhaW5lci5nZXRQcm92aWRlcnMoKTtcclxuICAgICAgICAvLyBMb29wIHRocm91Z2ggcHJvdmlkZXJzIGFuZCBnZXQgbGlicmFyeS92ZXJzaW9uIHBhaXJzIGZyb20gYW55IHRoYXQgYXJlXHJcbiAgICAgICAgLy8gdmVyc2lvbiBjb21wb25lbnRzLlxyXG4gICAgICAgIHJldHVybiBwcm92aWRlcnNcclxuICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAocHJvdmlkZXIpIHtcclxuICAgICAgICAgICAgaWYgKGlzVmVyc2lvblNlcnZpY2VQcm92aWRlcihwcm92aWRlcikpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzZXJ2aWNlID0gcHJvdmlkZXIuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VydmljZS5saWJyYXJ5ICsgXCIvXCIgKyBzZXJ2aWNlLnZlcnNpb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGxvZ1N0cmluZykgeyByZXR1cm4gbG9nU3RyaW5nOyB9KVxyXG4gICAgICAgICAgICAuam9pbignICcpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBQbGF0Zm9ybUxvZ2dlclNlcnZpY2U7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gcHJvdmlkZXIgY2hlY2sgaWYgdGhpcyBwcm92aWRlciBwcm92aWRlcyBhIFZlcnNpb25TZXJ2aWNlXHJcbiAqXHJcbiAqIE5PVEU6IFVzaW5nIFByb3ZpZGVyPCdhcHAtdmVyc2lvbic+IGlzIGEgaGFjayB0byBpbmRpY2F0ZSB0aGF0IHRoZSBwcm92aWRlclxyXG4gKiBwcm92aWRlcyBWZXJzaW9uU2VydmljZS4gVGhlIHByb3ZpZGVyIGlzIG5vdCBuZWNlc3NhcmlseSBhICdhcHAtdmVyc2lvbidcclxuICogcHJvdmlkZXIuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1ZlcnNpb25TZXJ2aWNlUHJvdmlkZXIocHJvdmlkZXIpIHtcclxuICAgIHZhciBjb21wb25lbnQgPSBwcm92aWRlci5nZXRDb21wb25lbnQoKTtcclxuICAgIHJldHVybiAoY29tcG9uZW50ID09PSBudWxsIHx8IGNvbXBvbmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29tcG9uZW50LnR5cGUpID09PSBcIlZFUlNJT05cIiAvKiBWRVJTSU9OICovO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIHJlZ2lzdGVyQ29yZUNvbXBvbmVudHMoZmlyZWJhc2UsIHZhcmlhbnQpIHtcclxuICAgIGZpcmViYXNlLklOVEVSTkFMLnJlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoJ3BsYXRmb3JtLWxvZ2dlcicsIGZ1bmN0aW9uIChjb250YWluZXIpIHsgcmV0dXJuIG5ldyBQbGF0Zm9ybUxvZ2dlclNlcnZpY2UoY29udGFpbmVyKTsgfSwgXCJQUklWQVRFXCIgLyogUFJJVkFURSAqLykpO1xyXG4gICAgLy8gUmVnaXN0ZXIgYGFwcGAgcGFja2FnZS5cclxuICAgIGZpcmViYXNlLnJlZ2lzdGVyVmVyc2lvbihuYW1lJDEsIHZlcnNpb24sIHZhcmlhbnQpO1xyXG4gICAgLy8gUmVnaXN0ZXIgcGxhdGZvcm0gU0RLIGlkZW50aWZpZXIgKG5vIHZlcnNpb24pLlxyXG4gICAgZmlyZWJhc2UucmVnaXN0ZXJWZXJzaW9uKCdmaXJlLWpzJywgJycpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8vIEZpcmViYXNlIExpdGUgZGV0ZWN0aW9uIHRlc3RcclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuaWYgKGlzQnJvd3NlcigpICYmIHNlbGYuZmlyZWJhc2UgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgbG9nZ2VyLndhcm4oXCJcXG4gICAgV2FybmluZzogRmlyZWJhc2UgaXMgYWxyZWFkeSBkZWZpbmVkIGluIHRoZSBnbG9iYWwgc2NvcGUuIFBsZWFzZSBtYWtlIHN1cmVcXG4gICAgRmlyZWJhc2UgbGlicmFyeSBpcyBvbmx5IGxvYWRlZCBvbmNlLlxcbiAgXCIpO1xyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXHJcbiAgICB2YXIgc2RrVmVyc2lvbiA9IHNlbGYuZmlyZWJhc2UuU0RLX1ZFUlNJT047XHJcbiAgICBpZiAoc2RrVmVyc2lvbiAmJiBzZGtWZXJzaW9uLmluZGV4T2YoJ0xJVEUnKSA+PSAwKSB7XHJcbiAgICAgICAgbG9nZ2VyLndhcm4oXCJcXG4gICAgV2FybmluZzogWW91IGFyZSB0cnlpbmcgdG8gbG9hZCBGaXJlYmFzZSB3aGlsZSB1c2luZyBGaXJlYmFzZSBQZXJmb3JtYW5jZSBzdGFuZGFsb25lIHNjcmlwdC5cXG4gICAgWW91IHNob3VsZCBsb2FkIEZpcmViYXNlIFBlcmZvcm1hbmNlIHdpdGggdGhpcyBpbnN0YW5jZSBvZiBGaXJlYmFzZSB0byBhdm9pZCBsb2FkaW5nIGR1cGxpY2F0ZSBjb2RlLlxcbiAgICBcIik7XHJcbiAgICB9XHJcbn1cclxudmFyIGluaXRpYWxpemVBcHAgPSBmaXJlYmFzZS5pbml0aWFsaXplQXBwO1xyXG4vLyBUT0RPOiBUaGlzIGRpc2FibGUgY2FuIGJlIHJlbW92ZWQgYW5kIHRoZSAnaWdub3JlUmVzdEFyZ3MnIG9wdGlvbiBhZGRlZCB0b1xyXG4vLyB0aGUgbm8tZXhwbGljaXQtYW55IHJ1bGUgd2hlbiBFU2xpbnQgcmVsZWFzZXMgaXQuXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbmZpcmViYXNlLmluaXRpYWxpemVBcHAgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgYXJncyA9IFtdO1xyXG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICB9XHJcbiAgICAvLyBFbnZpcm9ubWVudCBjaGVjayBiZWZvcmUgaW5pdGlhbGl6aW5nIGFwcFxyXG4gICAgLy8gRG8gdGhlIGNoZWNrIGluIGluaXRpYWxpemVBcHAsIHNvIHBlb3BsZSBoYXZlIGEgY2hhbmNlIHRvIGRpc2FibGUgaXQgYnkgc2V0dGluZyBsb2dMZXZlbFxyXG4gICAgLy8gaW4gQGZpcmViYXNlL2xvZ2dlclxyXG4gICAgaWYgKGlzTm9kZSgpKSB7XHJcbiAgICAgICAgbG9nZ2VyLndhcm4oXCJcXG4gICAgICBXYXJuaW5nOiBUaGlzIGlzIGEgYnJvd3Nlci10YXJnZXRlZCBGaXJlYmFzZSBidW5kbGUgYnV0IGl0IGFwcGVhcnMgaXQgaXMgYmVpbmdcXG4gICAgICBydW4gaW4gYSBOb2RlIGVudmlyb25tZW50LiAgSWYgcnVubmluZyBpbiBhIE5vZGUgZW52aXJvbm1lbnQsIG1ha2Ugc3VyZSB5b3VcXG4gICAgICBhcmUgdXNpbmcgdGhlIGJ1bmRsZSBzcGVjaWZpZWQgYnkgdGhlIFxcXCJtYWluXFxcIiBmaWVsZCBpbiBwYWNrYWdlLmpzb24uXFxuICAgICAgXFxuICAgICAgSWYgeW91IGFyZSB1c2luZyBXZWJwYWNrLCB5b3UgY2FuIHNwZWNpZnkgXFxcIm1haW5cXFwiIGFzIHRoZSBmaXJzdCBpdGVtIGluXFxuICAgICAgXFxcInJlc29sdmUubWFpbkZpZWxkc1xcXCI6XFxuICAgICAgaHR0cHM6Ly93ZWJwYWNrLmpzLm9yZy9jb25maWd1cmF0aW9uL3Jlc29sdmUvI3Jlc29sdmVtYWluZmllbGRzXFxuICAgICAgXFxuICAgICAgSWYgdXNpbmcgUm9sbHVwLCB1c2UgdGhlIEByb2xsdXAvcGx1Z2luLW5vZGUtcmVzb2x2ZSBwbHVnaW4gYW5kIHNwZWNpZnkgXFxcIm1haW5cXFwiXFxuICAgICAgYXMgdGhlIGZpcnN0IGl0ZW0gaW4gXFxcIm1haW5GaWVsZHNcXFwiLCBlLmcuIFsnbWFpbicsICdtb2R1bGUnXS5cXG4gICAgICBodHRwczovL2dpdGh1Yi5jb20vcm9sbHVwL0Byb2xsdXAvcGx1Z2luLW5vZGUtcmVzb2x2ZVxcbiAgICAgIFwiKTtcclxuICAgIH1cclxuICAgIHJldHVybiBpbml0aWFsaXplQXBwLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XHJcbn07XHJcbnZhciBmaXJlYmFzZSQxID0gZmlyZWJhc2U7XHJcbnJlZ2lzdGVyQ29yZUNvbXBvbmVudHMoZmlyZWJhc2UkMSk7XG5cbmV4cG9ydCBkZWZhdWx0IGZpcmViYXNlJDE7XG5leHBvcnQgeyBmaXJlYmFzZSQxIGFzIGZpcmViYXNlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20uanMubWFwXG4iLCJpbXBvcnQgZmlyZWJhc2UgZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5leHBvcnQgeyBkZWZhdWx0IH0gZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5cbnZhciBuYW1lID0gXCJmaXJlYmFzZVwiO1xudmFyIHZlcnNpb24gPSBcIjguMS4xXCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZpcmViYXNlLnJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uLCAnYXBwJyk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20uanMubWFwXG4iLCJpbXBvcnQgZmlyZWJhc2UgZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcbmltcG9ydCB7IF9fYXdhaXRlciwgX19nZW5lcmF0b3IsIF9fc3ByZWFkLCBfX3ZhbHVlcywgX19hc3NpZ24gfSBmcm9tICd0c2xpYic7XG5pbXBvcnQgeyBFcnJvckZhY3RvcnksIEZpcmViYXNlRXJyb3IgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBvcGVuRGIgfSBmcm9tICdpZGInO1xuXG52YXIgbmFtZSA9IFwiQGZpcmViYXNlL2luc3RhbGxhdGlvbnNcIjtcbnZhciB2ZXJzaW9uID0gXCIwLjQuMTlcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIFBFTkRJTkdfVElNRU9VVF9NUyA9IDEwMDAwO1xyXG52YXIgUEFDS0FHRV9WRVJTSU9OID0gXCJ3OlwiICsgdmVyc2lvbjtcclxudmFyIElOVEVSTkFMX0FVVEhfVkVSU0lPTiA9ICdGSVNfdjInO1xyXG52YXIgSU5TVEFMTEFUSU9OU19BUElfVVJMID0gJ2h0dHBzOi8vZmlyZWJhc2VpbnN0YWxsYXRpb25zLmdvb2dsZWFwaXMuY29tL3YxJztcclxudmFyIFRPS0VOX0VYUElSQVRJT05fQlVGRkVSID0gNjAgKiA2MCAqIDEwMDA7IC8vIE9uZSBob3VyXHJcbnZhciBTRVJWSUNFID0gJ2luc3RhbGxhdGlvbnMnO1xyXG52YXIgU0VSVklDRV9OQU1FID0gJ0luc3RhbGxhdGlvbnMnO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgX2E7XHJcbnZhciBFUlJPUl9ERVNDUklQVElPTl9NQVAgPSAoX2EgPSB7fSxcclxuICAgIF9hW1wibWlzc2luZy1hcHAtY29uZmlnLXZhbHVlc1wiIC8qIE1JU1NJTkdfQVBQX0NPTkZJR19WQUxVRVMgKi9dID0gJ01pc3NpbmcgQXBwIGNvbmZpZ3VyYXRpb24gdmFsdWU6IFwieyR2YWx1ZU5hbWV9XCInLFxyXG4gICAgX2FbXCJub3QtcmVnaXN0ZXJlZFwiIC8qIE5PVF9SRUdJU1RFUkVEICovXSA9ICdGaXJlYmFzZSBJbnN0YWxsYXRpb24gaXMgbm90IHJlZ2lzdGVyZWQuJyxcclxuICAgIF9hW1wiaW5zdGFsbGF0aW9uLW5vdC1mb3VuZFwiIC8qIElOU1RBTExBVElPTl9OT1RfRk9VTkQgKi9dID0gJ0ZpcmViYXNlIEluc3RhbGxhdGlvbiBub3QgZm91bmQuJyxcclxuICAgIF9hW1wicmVxdWVzdC1mYWlsZWRcIiAvKiBSRVFVRVNUX0ZBSUxFRCAqL10gPSAneyRyZXF1ZXN0TmFtZX0gcmVxdWVzdCBmYWlsZWQgd2l0aCBlcnJvciBcInskc2VydmVyQ29kZX0geyRzZXJ2ZXJTdGF0dXN9OiB7JHNlcnZlck1lc3NhZ2V9XCInLFxyXG4gICAgX2FbXCJhcHAtb2ZmbGluZVwiIC8qIEFQUF9PRkZMSU5FICovXSA9ICdDb3VsZCBub3QgcHJvY2VzcyByZXF1ZXN0LiBBcHBsaWNhdGlvbiBvZmZsaW5lLicsXHJcbiAgICBfYVtcImRlbGV0ZS1wZW5kaW5nLXJlZ2lzdHJhdGlvblwiIC8qIERFTEVURV9QRU5ESU5HX1JFR0lTVFJBVElPTiAqL10gPSBcIkNhbid0IGRlbGV0ZSBpbnN0YWxsYXRpb24gd2hpbGUgdGhlcmUgaXMgYSBwZW5kaW5nIHJlZ2lzdHJhdGlvbiByZXF1ZXN0LlwiLFxyXG4gICAgX2EpO1xyXG52YXIgRVJST1JfRkFDVE9SWSA9IG5ldyBFcnJvckZhY3RvcnkoU0VSVklDRSwgU0VSVklDRV9OQU1FLCBFUlJPUl9ERVNDUklQVElPTl9NQVApO1xyXG4vKiogUmV0dXJucyB0cnVlIGlmIGVycm9yIGlzIGEgRmlyZWJhc2VFcnJvciB0aGF0IGlzIGJhc2VkIG9uIGFuIGVycm9yIGZyb20gdGhlIHNlcnZlci4gKi9cclxuZnVuY3Rpb24gaXNTZXJ2ZXJFcnJvcihlcnJvcikge1xyXG4gICAgcmV0dXJuIChlcnJvciBpbnN0YW5jZW9mIEZpcmViYXNlRXJyb3IgJiZcclxuICAgICAgICBlcnJvci5jb2RlLmluY2x1ZGVzKFwicmVxdWVzdC1mYWlsZWRcIiAvKiBSRVFVRVNUX0ZBSUxFRCAqLykpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGdldEluc3RhbGxhdGlvbnNFbmRwb2ludChfYSkge1xyXG4gICAgdmFyIHByb2plY3RJZCA9IF9hLnByb2plY3RJZDtcclxuICAgIHJldHVybiBJTlNUQUxMQVRJT05TX0FQSV9VUkwgKyBcIi9wcm9qZWN0cy9cIiArIHByb2plY3RJZCArIFwiL2luc3RhbGxhdGlvbnNcIjtcclxufVxyXG5mdW5jdGlvbiBleHRyYWN0QXV0aFRva2VuSW5mb0Zyb21SZXNwb25zZShyZXNwb25zZSkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB0b2tlbjogcmVzcG9uc2UudG9rZW4sXHJcbiAgICAgICAgcmVxdWVzdFN0YXR1czogMiAvKiBDT01QTEVURUQgKi8sXHJcbiAgICAgICAgZXhwaXJlc0luOiBnZXRFeHBpcmVzSW5Gcm9tUmVzcG9uc2VFeHBpcmVzSW4ocmVzcG9uc2UuZXhwaXJlc0luKSxcclxuICAgICAgICBjcmVhdGlvblRpbWU6IERhdGUubm93KClcclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gZ2V0RXJyb3JGcm9tUmVzcG9uc2UocmVxdWVzdE5hbWUsIHJlc3BvbnNlKSB7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHJlc3BvbnNlSnNvbiwgZXJyb3JEYXRhO1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCByZXNwb25zZS5qc29uKCldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSnNvbiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBlcnJvckRhdGEgPSByZXNwb25zZUpzb24uZXJyb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwicmVxdWVzdC1mYWlsZWRcIiAvKiBSRVFVRVNUX0ZBSUxFRCAqLywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdE5hbWU6IHJlcXVlc3ROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmVyQ29kZTogZXJyb3JEYXRhLmNvZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJNZXNzYWdlOiBlcnJvckRhdGEubWVzc2FnZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZlclN0YXR1czogZXJyb3JEYXRhLnN0YXR1c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGdldEhlYWRlcnMoX2EpIHtcclxuICAgIHZhciBhcGlLZXkgPSBfYS5hcGlLZXk7XHJcbiAgICByZXR1cm4gbmV3IEhlYWRlcnMoe1xyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgJ3gtZ29vZy1hcGkta2V5JzogYXBpS2V5XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBnZXRIZWFkZXJzV2l0aEF1dGgoYXBwQ29uZmlnLCBfYSkge1xyXG4gICAgdmFyIHJlZnJlc2hUb2tlbiA9IF9hLnJlZnJlc2hUb2tlbjtcclxuICAgIHZhciBoZWFkZXJzID0gZ2V0SGVhZGVycyhhcHBDb25maWcpO1xyXG4gICAgaGVhZGVycy5hcHBlbmQoJ0F1dGhvcml6YXRpb24nLCBnZXRBdXRob3JpemF0aW9uSGVhZGVyKHJlZnJlc2hUb2tlbikpO1xyXG4gICAgcmV0dXJuIGhlYWRlcnM7XHJcbn1cclxuLyoqXHJcbiAqIENhbGxzIHRoZSBwYXNzZWQgaW4gZmV0Y2ggd3JhcHBlciBhbmQgcmV0dXJucyB0aGUgcmVzcG9uc2UuXHJcbiAqIElmIHRoZSByZXR1cm5lZCByZXNwb25zZSBoYXMgYSBzdGF0dXMgb2YgNXh4LCByZS1ydW5zIHRoZSBmdW5jdGlvbiBvbmNlIGFuZFxyXG4gKiByZXR1cm5zIHRoZSByZXNwb25zZS5cclxuICovXHJcbmZ1bmN0aW9uIHJldHJ5SWZTZXJ2ZXJFcnJvcihmbikge1xyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciByZXN1bHQ7XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIGZuKCldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA+PSA1MDAgJiYgcmVzdWx0LnN0YXR1cyA8IDYwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IuIFJldHJ5IHJlcXVlc3QuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBmbigpXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3VsdF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGdldEV4cGlyZXNJbkZyb21SZXNwb25zZUV4cGlyZXNJbihyZXNwb25zZUV4cGlyZXNJbikge1xyXG4gICAgLy8gVGhpcyB3b3JrcyBiZWNhdXNlIHRoZSBzZXJ2ZXIgd2lsbCBuZXZlciByZXNwb25kIHdpdGggZnJhY3Rpb25zIG9mIGEgc2Vjb25kLlxyXG4gICAgcmV0dXJuIE51bWJlcihyZXNwb25zZUV4cGlyZXNJbi5yZXBsYWNlKCdzJywgJzAwMCcpKTtcclxufVxyXG5mdW5jdGlvbiBnZXRBdXRob3JpemF0aW9uSGVhZGVyKHJlZnJlc2hUb2tlbikge1xyXG4gICAgcmV0dXJuIElOVEVSTkFMX0FVVEhfVkVSU0lPTiArIFwiIFwiICsgcmVmcmVzaFRva2VuO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZUluc3RhbGxhdGlvblJlcXVlc3QoYXBwQ29uZmlnLCBfYSkge1xyXG4gICAgdmFyIGZpZCA9IF9hLmZpZDtcclxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZW5kcG9pbnQsIGhlYWRlcnMsIGJvZHksIHJlcXVlc3QsIHJlc3BvbnNlLCByZXNwb25zZVZhbHVlLCByZWdpc3RlcmVkSW5zdGFsbGF0aW9uRW50cnk7XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgZW5kcG9pbnQgPSBnZXRJbnN0YWxsYXRpb25zRW5kcG9pbnQoYXBwQ29uZmlnKTtcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzID0gZ2V0SGVhZGVycyhhcHBDb25maWcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJvZHkgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZDogZmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRoVmVyc2lvbjogSU5URVJOQUxfQVVUSF9WRVJTSU9OLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBJZDogYXBwQ29uZmlnLmFwcElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZGtWZXJzaW9uOiBQQUNLQUdFX1ZFUlNJT05cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3QgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmV0cnlJZlNlcnZlckVycm9yKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZldGNoKGVuZHBvaW50LCByZXF1ZXN0KTsgfSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlc3BvbnNlLmpzb24oKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VWYWx1ZSA9IF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZWdpc3RlcmVkSW5zdGFsbGF0aW9uRW50cnkgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZDogcmVzcG9uc2VWYWx1ZS5maWQgfHwgZmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWdpc3RyYXRpb25TdGF0dXM6IDIgLyogQ09NUExFVEVEICovLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWZyZXNoVG9rZW46IHJlc3BvbnNlVmFsdWUucmVmcmVzaFRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRoVG9rZW46IGV4dHJhY3RBdXRoVG9rZW5JbmZvRnJvbVJlc3BvbnNlKHJlc3BvbnNlVmFsdWUuYXV0aFRva2VuKVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlZ2lzdGVyZWRJbnN0YWxsYXRpb25FbnRyeV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbNCAvKnlpZWxkKi8sIGdldEVycm9yRnJvbVJlc3BvbnNlKCdDcmVhdGUgSW5zdGFsbGF0aW9uJywgcmVzcG9uc2UpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogdGhyb3cgX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKiogUmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyBhZnRlciBnaXZlbiB0aW1lIHBhc3Nlcy4gKi9cclxuZnVuY3Rpb24gc2xlZXAobXMpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgICAgIHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpO1xyXG4gICAgfSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gYnVmZmVyVG9CYXNlNjRVcmxTYWZlKGFycmF5KSB7XHJcbiAgICB2YXIgYjY0ID0gYnRvYShTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZywgX19zcHJlYWQoYXJyYXkpKSk7XHJcbiAgICByZXR1cm4gYjY0LnJlcGxhY2UoL1xcKy9nLCAnLScpLnJlcGxhY2UoL1xcLy9nLCAnXycpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBWQUxJRF9GSURfUEFUVEVSTiA9IC9eW2NkZWZdW1xcdy1dezIxfSQvO1xyXG52YXIgSU5WQUxJRF9GSUQgPSAnJztcclxuLyoqXHJcbiAqIEdlbmVyYXRlcyBhIG5ldyBGSUQgdXNpbmcgcmFuZG9tIHZhbHVlcyBmcm9tIFdlYiBDcnlwdG8gQVBJLlxyXG4gKiBSZXR1cm5zIGFuIGVtcHR5IHN0cmluZyBpZiBGSUQgZ2VuZXJhdGlvbiBmYWlscyBmb3IgYW55IHJlYXNvbi5cclxuICovXHJcbmZ1bmN0aW9uIGdlbmVyYXRlRmlkKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyBBIHZhbGlkIEZJRCBoYXMgZXhhY3RseSAyMiBiYXNlNjQgY2hhcmFjdGVycywgd2hpY2ggaXMgMTMyIGJpdHMsIG9yIDE2LjVcclxuICAgICAgICAvLyBieXRlcy4gb3VyIGltcGxlbWVudGF0aW9uIGdlbmVyYXRlcyBhIDE3IGJ5dGUgYXJyYXkgaW5zdGVhZC5cclxuICAgICAgICB2YXIgZmlkQnl0ZUFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoMTcpO1xyXG4gICAgICAgIHZhciBjcnlwdG9fMSA9IHNlbGYuY3J5cHRvIHx8IHNlbGYubXNDcnlwdG87XHJcbiAgICAgICAgY3J5cHRvXzEuZ2V0UmFuZG9tVmFsdWVzKGZpZEJ5dGVBcnJheSk7XHJcbiAgICAgICAgLy8gUmVwbGFjZSB0aGUgZmlyc3QgNCByYW5kb20gYml0cyB3aXRoIHRoZSBjb25zdGFudCBGSUQgaGVhZGVyIG9mIDBiMDExMS5cclxuICAgICAgICBmaWRCeXRlQXJyYXlbMF0gPSAxMTIgKyAoZmlkQnl0ZUFycmF5WzBdICUgMTYpO1xyXG4gICAgICAgIHZhciBmaWQgPSBlbmNvZGUoZmlkQnl0ZUFycmF5KTtcclxuICAgICAgICByZXR1cm4gVkFMSURfRklEX1BBVFRFUk4udGVzdChmaWQpID8gZmlkIDogSU5WQUxJRF9GSUQ7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAvLyBGSUQgZ2VuZXJhdGlvbiBlcnJvcmVkXHJcbiAgICAgICAgcmV0dXJuIElOVkFMSURfRklEO1xyXG4gICAgfVxyXG59XHJcbi8qKiBDb252ZXJ0cyBhIEZJRCBVaW50OEFycmF5IHRvIGEgYmFzZTY0IHN0cmluZyByZXByZXNlbnRhdGlvbi4gKi9cclxuZnVuY3Rpb24gZW5jb2RlKGZpZEJ5dGVBcnJheSkge1xyXG4gICAgdmFyIGI2NFN0cmluZyA9IGJ1ZmZlclRvQmFzZTY0VXJsU2FmZShmaWRCeXRlQXJyYXkpO1xyXG4gICAgLy8gUmVtb3ZlIHRoZSAyM3JkIGNoYXJhY3RlciB0aGF0IHdhcyBhZGRlZCBiZWNhdXNlIG9mIHRoZSBleHRyYSA0IGJpdHMgYXQgdGhlXHJcbiAgICAvLyBlbmQgb2Ygb3VyIDE3IGJ5dGUgYXJyYXksIGFuZCB0aGUgJz0nIHBhZGRpbmcuXHJcbiAgICByZXR1cm4gYjY0U3RyaW5nLnN1YnN0cigwLCAyMik7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqIFJldHVybnMgYSBzdHJpbmcga2V5IHRoYXQgY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgdGhlIGFwcC4gKi9cclxuZnVuY3Rpb24gZ2V0S2V5KGFwcENvbmZpZykge1xyXG4gICAgcmV0dXJuIGFwcENvbmZpZy5hcHBOYW1lICsgXCIhXCIgKyBhcHBDb25maWcuYXBwSWQ7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIGZpZENoYW5nZUNhbGxiYWNrcyA9IG5ldyBNYXAoKTtcclxuLyoqXHJcbiAqIENhbGxzIHRoZSBvbklkQ2hhbmdlIGNhbGxiYWNrcyB3aXRoIHRoZSBuZXcgRklEIHZhbHVlLCBhbmQgYnJvYWRjYXN0cyB0aGVcclxuICogY2hhbmdlIHRvIG90aGVyIHRhYnMuXHJcbiAqL1xyXG5mdW5jdGlvbiBmaWRDaGFuZ2VkKGFwcENvbmZpZywgZmlkKSB7XHJcbiAgICB2YXIga2V5ID0gZ2V0S2V5KGFwcENvbmZpZyk7XHJcbiAgICBjYWxsRmlkQ2hhbmdlQ2FsbGJhY2tzKGtleSwgZmlkKTtcclxuICAgIGJyb2FkY2FzdEZpZENoYW5nZShrZXksIGZpZCk7XHJcbn1cclxuZnVuY3Rpb24gYWRkQ2FsbGJhY2soYXBwQ29uZmlnLCBjYWxsYmFjaykge1xyXG4gICAgLy8gT3BlbiB0aGUgYnJvYWRjYXN0IGNoYW5uZWwgaWYgaXQncyBub3QgYWxyZWFkeSBvcGVuLFxyXG4gICAgLy8gdG8gYmUgYWJsZSB0byBsaXN0ZW4gdG8gY2hhbmdlIGV2ZW50cyBmcm9tIG90aGVyIHRhYnMuXHJcbiAgICBnZXRCcm9hZGNhc3RDaGFubmVsKCk7XHJcbiAgICB2YXIga2V5ID0gZ2V0S2V5KGFwcENvbmZpZyk7XHJcbiAgICB2YXIgY2FsbGJhY2tTZXQgPSBmaWRDaGFuZ2VDYWxsYmFja3MuZ2V0KGtleSk7XHJcbiAgICBpZiAoIWNhbGxiYWNrU2V0KSB7XHJcbiAgICAgICAgY2FsbGJhY2tTZXQgPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgZmlkQ2hhbmdlQ2FsbGJhY2tzLnNldChrZXksIGNhbGxiYWNrU2V0KTtcclxuICAgIH1cclxuICAgIGNhbGxiYWNrU2V0LmFkZChjYWxsYmFjayk7XHJcbn1cclxuZnVuY3Rpb24gcmVtb3ZlQ2FsbGJhY2soYXBwQ29uZmlnLCBjYWxsYmFjaykge1xyXG4gICAgdmFyIGtleSA9IGdldEtleShhcHBDb25maWcpO1xyXG4gICAgdmFyIGNhbGxiYWNrU2V0ID0gZmlkQ2hhbmdlQ2FsbGJhY2tzLmdldChrZXkpO1xyXG4gICAgaWYgKCFjYWxsYmFja1NldCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNhbGxiYWNrU2V0LmRlbGV0ZShjYWxsYmFjayk7XHJcbiAgICBpZiAoY2FsbGJhY2tTZXQuc2l6ZSA9PT0gMCkge1xyXG4gICAgICAgIGZpZENoYW5nZUNhbGxiYWNrcy5kZWxldGUoa2V5KTtcclxuICAgIH1cclxuICAgIC8vIENsb3NlIGJyb2FkY2FzdCBjaGFubmVsIGlmIHRoZXJlIGFyZSBubyBtb3JlIGNhbGxiYWNrcy5cclxuICAgIGNsb3NlQnJvYWRjYXN0Q2hhbm5lbCgpO1xyXG59XHJcbmZ1bmN0aW9uIGNhbGxGaWRDaGFuZ2VDYWxsYmFja3Moa2V5LCBmaWQpIHtcclxuICAgIHZhciBlXzEsIF9hO1xyXG4gICAgdmFyIGNhbGxiYWNrcyA9IGZpZENoYW5nZUNhbGxiYWNrcy5nZXQoa2V5KTtcclxuICAgIGlmICghY2FsbGJhY2tzKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgICBmb3IgKHZhciBjYWxsYmFja3NfMSA9IF9fdmFsdWVzKGNhbGxiYWNrcyksIGNhbGxiYWNrc18xXzEgPSBjYWxsYmFja3NfMS5uZXh0KCk7ICFjYWxsYmFja3NfMV8xLmRvbmU7IGNhbGxiYWNrc18xXzEgPSBjYWxsYmFja3NfMS5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIGNhbGxiYWNrID0gY2FsbGJhY2tzXzFfMS52YWx1ZTtcclxuICAgICAgICAgICAgY2FsbGJhY2soZmlkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrc18xXzEgJiYgIWNhbGxiYWNrc18xXzEuZG9uZSAmJiAoX2EgPSBjYWxsYmFja3NfMS5yZXR1cm4pKSBfYS5jYWxsKGNhbGxiYWNrc18xKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGJyb2FkY2FzdEZpZENoYW5nZShrZXksIGZpZCkge1xyXG4gICAgdmFyIGNoYW5uZWwgPSBnZXRCcm9hZGNhc3RDaGFubmVsKCk7XHJcbiAgICBpZiAoY2hhbm5lbCkge1xyXG4gICAgICAgIGNoYW5uZWwucG9zdE1lc3NhZ2UoeyBrZXk6IGtleSwgZmlkOiBmaWQgfSk7XHJcbiAgICB9XHJcbiAgICBjbG9zZUJyb2FkY2FzdENoYW5uZWwoKTtcclxufVxyXG52YXIgYnJvYWRjYXN0Q2hhbm5lbCA9IG51bGw7XHJcbi8qKiBPcGVucyBhbmQgcmV0dXJucyBhIEJyb2FkY2FzdENoYW5uZWwgaWYgaXQgaXMgc3VwcG9ydGVkIGJ5IHRoZSBicm93c2VyLiAqL1xyXG5mdW5jdGlvbiBnZXRCcm9hZGNhc3RDaGFubmVsKCkge1xyXG4gICAgaWYgKCFicm9hZGNhc3RDaGFubmVsICYmICdCcm9hZGNhc3RDaGFubmVsJyBpbiBzZWxmKSB7XHJcbiAgICAgICAgYnJvYWRjYXN0Q2hhbm5lbCA9IG5ldyBCcm9hZGNhc3RDaGFubmVsKCdbRmlyZWJhc2VdIEZJRCBDaGFuZ2UnKTtcclxuICAgICAgICBicm9hZGNhc3RDaGFubmVsLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGNhbGxGaWRDaGFuZ2VDYWxsYmFja3MoZS5kYXRhLmtleSwgZS5kYXRhLmZpZCk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIHJldHVybiBicm9hZGNhc3RDaGFubmVsO1xyXG59XHJcbmZ1bmN0aW9uIGNsb3NlQnJvYWRjYXN0Q2hhbm5lbCgpIHtcclxuICAgIGlmIChmaWRDaGFuZ2VDYWxsYmFja3Muc2l6ZSA9PT0gMCAmJiBicm9hZGNhc3RDaGFubmVsKSB7XHJcbiAgICAgICAgYnJvYWRjYXN0Q2hhbm5lbC5jbG9zZSgpO1xyXG4gICAgICAgIGJyb2FkY2FzdENoYW5uZWwgPSBudWxsO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBEQVRBQkFTRV9OQU1FID0gJ2ZpcmViYXNlLWluc3RhbGxhdGlvbnMtZGF0YWJhc2UnO1xyXG52YXIgREFUQUJBU0VfVkVSU0lPTiA9IDE7XHJcbnZhciBPQkpFQ1RfU1RPUkVfTkFNRSA9ICdmaXJlYmFzZS1pbnN0YWxsYXRpb25zLXN0b3JlJztcclxudmFyIGRiUHJvbWlzZSA9IG51bGw7XHJcbmZ1bmN0aW9uIGdldERiUHJvbWlzZSgpIHtcclxuICAgIGlmICghZGJQcm9taXNlKSB7XHJcbiAgICAgICAgZGJQcm9taXNlID0gb3BlbkRiKERBVEFCQVNFX05BTUUsIERBVEFCQVNFX1ZFUlNJT04sIGZ1bmN0aW9uICh1cGdyYWRlREIpIHtcclxuICAgICAgICAgICAgLy8gV2UgZG9uJ3QgdXNlICdicmVhaycgaW4gdGhpcyBzd2l0Y2ggc3RhdGVtZW50LCB0aGUgZmFsbC10aHJvdWdoXHJcbiAgICAgICAgICAgIC8vIGJlaGF2aW9yIGlzIHdoYXQgd2Ugd2FudCwgYmVjYXVzZSBpZiB0aGVyZSBhcmUgbXVsdGlwbGUgdmVyc2lvbnMgYmV0d2VlblxyXG4gICAgICAgICAgICAvLyB0aGUgb2xkIHZlcnNpb24gYW5kIHRoZSBjdXJyZW50IHZlcnNpb24sIHdlIHdhbnQgQUxMIHRoZSBtaWdyYXRpb25zXHJcbiAgICAgICAgICAgIC8vIHRoYXQgY29ycmVzcG9uZCB0byB0aG9zZSB2ZXJzaW9ucyB0byBydW4sIG5vdCBvbmx5IHRoZSBsYXN0IG9uZS5cclxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlZmF1bHQtY2FzZVxyXG4gICAgICAgICAgICBzd2l0Y2ggKHVwZ3JhZGVEQi5vbGRWZXJzaW9uKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgdXBncmFkZURCLmNyZWF0ZU9iamVjdFN0b3JlKE9CSkVDVF9TVE9SRV9OQU1FKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRiUHJvbWlzZTtcclxufVxyXG4vKiogQXNzaWducyBvciBvdmVyd3JpdGVzIHRoZSByZWNvcmQgZm9yIHRoZSBnaXZlbiBrZXkgd2l0aCB0aGUgZ2l2ZW4gdmFsdWUuICovXHJcbmZ1bmN0aW9uIHNldChhcHBDb25maWcsIHZhbHVlKSB7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGtleSwgZGIsIHR4LCBvYmplY3RTdG9yZSwgb2xkVmFsdWU7XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAga2V5ID0gZ2V0S2V5KGFwcENvbmZpZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZ2V0RGJQcm9taXNlKCldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIGRiID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHR4ID0gZGIudHJhbnNhY3Rpb24oT0JKRUNUX1NUT1JFX05BTUUsICdyZWFkd3JpdGUnKTtcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3RTdG9yZSA9IHR4Lm9iamVjdFN0b3JlKE9CSkVDVF9TVE9SRV9OQU1FKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBvYmplY3RTdG9yZS5nZXQoa2V5KV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgb2xkVmFsdWUgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgb2JqZWN0U3RvcmUucHV0KHZhbHVlLCBrZXkpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdHguY29tcGxldGVdO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIW9sZFZhbHVlIHx8IG9sZFZhbHVlLmZpZCAhPT0gdmFsdWUuZmlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZENoYW5nZWQoYXBwQ29uZmlnLCB2YWx1ZS5maWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdmFsdWVdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG4vKiogUmVtb3ZlcyByZWNvcmQocykgZnJvbSB0aGUgb2JqZWN0U3RvcmUgdGhhdCBtYXRjaCB0aGUgZ2l2ZW4ga2V5LiAqL1xyXG5mdW5jdGlvbiByZW1vdmUoYXBwQ29uZmlnKSB7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGtleSwgZGIsIHR4O1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgIGtleSA9IGdldEtleShhcHBDb25maWcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGdldERiUHJvbWlzZSgpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBkYiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICB0eCA9IGRiLnRyYW5zYWN0aW9uKE9CSkVDVF9TVE9SRV9OQU1FLCAncmVhZHdyaXRlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdHgub2JqZWN0U3RvcmUoT0JKRUNUX1NUT1JFX05BTUUpLmRlbGV0ZShrZXkpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdHguY29tcGxldGVdO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbi8qKlxyXG4gKiBBdG9taWNhbGx5IHVwZGF0ZXMgYSByZWNvcmQgd2l0aCB0aGUgcmVzdWx0IG9mIHVwZGF0ZUZuLCB3aGljaCBnZXRzXHJcbiAqIGNhbGxlZCB3aXRoIHRoZSBjdXJyZW50IHZhbHVlLiBJZiBuZXdWYWx1ZSBpcyB1bmRlZmluZWQsIHRoZSByZWNvcmQgaXNcclxuICogZGVsZXRlZCBpbnN0ZWFkLlxyXG4gKiBAcmV0dXJuIFVwZGF0ZWQgdmFsdWVcclxuICovXHJcbmZ1bmN0aW9uIHVwZGF0ZShhcHBDb25maWcsIHVwZGF0ZUZuKSB7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGtleSwgZGIsIHR4LCBzdG9yZSwgb2xkVmFsdWUsIG5ld1ZhbHVlO1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgIGtleSA9IGdldEtleShhcHBDb25maWcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGdldERiUHJvbWlzZSgpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBkYiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICB0eCA9IGRiLnRyYW5zYWN0aW9uKE9CSkVDVF9TVE9SRV9OQU1FLCAncmVhZHdyaXRlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RvcmUgPSB0eC5vYmplY3RTdG9yZShPQkpFQ1RfU1RPUkVfTkFNRSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgc3RvcmUuZ2V0KGtleSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIG9sZFZhbHVlID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlID0gdXBkYXRlRm4ob2xkVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKG5ld1ZhbHVlID09PSB1bmRlZmluZWQpKSByZXR1cm4gWzMgLypicmVhayovLCA0XTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBzdG9yZS5kZWxldGUoa2V5KV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDZdO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzQgLyp5aWVsZCovLCBzdG9yZS5wdXQobmV3VmFsdWUsIGtleSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDY7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDY6IHJldHVybiBbNCAvKnlpZWxkKi8sIHR4LmNvbXBsZXRlXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzpcclxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1ZhbHVlICYmICghb2xkVmFsdWUgfHwgb2xkVmFsdWUuZmlkICE9PSBuZXdWYWx1ZS5maWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZENoYW5nZWQoYXBwQ29uZmlnLCBuZXdWYWx1ZS5maWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgbmV3VmFsdWVdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVXBkYXRlcyBhbmQgcmV0dXJucyB0aGUgSW5zdGFsbGF0aW9uRW50cnkgZnJvbSB0aGUgZGF0YWJhc2UuXHJcbiAqIEFsc28gdHJpZ2dlcnMgYSByZWdpc3RyYXRpb24gcmVxdWVzdCBpZiBpdCBpcyBuZWNlc3NhcnkgYW5kIHBvc3NpYmxlLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0SW5zdGFsbGF0aW9uRW50cnkoYXBwQ29uZmlnKSB7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHJlZ2lzdHJhdGlvblByb21pc2UsIGluc3RhbGxhdGlvbkVudHJ5O1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgdXBkYXRlKGFwcENvbmZpZywgZnVuY3Rpb24gKG9sZEVudHJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbnN0YWxsYXRpb25FbnRyeSA9IHVwZGF0ZU9yQ3JlYXRlSW5zdGFsbGF0aW9uRW50cnkob2xkRW50cnkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW50cnlXaXRoUHJvbWlzZSA9IHRyaWdnZXJSZWdpc3RyYXRpb25JZk5lY2Vzc2FyeShhcHBDb25maWcsIGluc3RhbGxhdGlvbkVudHJ5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVnaXN0cmF0aW9uUHJvbWlzZSA9IGVudHJ5V2l0aFByb21pc2UucmVnaXN0cmF0aW9uUHJvbWlzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVudHJ5V2l0aFByb21pc2UuaW5zdGFsbGF0aW9uRW50cnk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbGxhdGlvbkVudHJ5ID0gX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKGluc3RhbGxhdGlvbkVudHJ5LmZpZCA9PT0gSU5WQUxJRF9GSUQpKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICBfYSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlZ2lzdHJhdGlvblByb21pc2VdO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOiBcclxuICAgICAgICAgICAgICAgIC8vIEZJRCBnZW5lcmF0aW9uIGZhaWxlZC4gV2FpdGluZyBmb3IgdGhlIEZJRCBmcm9tIHRoZSBzZXJ2ZXIuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgKF9hLmluc3RhbGxhdGlvbkVudHJ5ID0gX2Iuc2VudCgpLCBfYSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qLywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0YWxsYXRpb25FbnRyeTogaW5zdGFsbGF0aW9uRW50cnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lzdHJhdGlvblByb21pc2U6IHJlZ2lzdHJhdGlvblByb21pc2VcclxuICAgICAgICAgICAgICAgICAgICB9XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBuZXcgSW5zdGFsbGF0aW9uIEVudHJ5IGlmIG9uZSBkb2VzIG5vdCBleGlzdC5cclxuICogQWxzbyBjbGVhcnMgdGltZWQgb3V0IHBlbmRpbmcgcmVxdWVzdHMuXHJcbiAqL1xyXG5mdW5jdGlvbiB1cGRhdGVPckNyZWF0ZUluc3RhbGxhdGlvbkVudHJ5KG9sZEVudHJ5KSB7XHJcbiAgICB2YXIgZW50cnkgPSBvbGRFbnRyeSB8fCB7XHJcbiAgICAgICAgZmlkOiBnZW5lcmF0ZUZpZCgpLFxyXG4gICAgICAgIHJlZ2lzdHJhdGlvblN0YXR1czogMCAvKiBOT1RfU1RBUlRFRCAqL1xyXG4gICAgfTtcclxuICAgIHJldHVybiBjbGVhclRpbWVkT3V0UmVxdWVzdChlbnRyeSk7XHJcbn1cclxuLyoqXHJcbiAqIElmIHRoZSBGaXJlYmFzZSBJbnN0YWxsYXRpb24gaXMgbm90IHJlZ2lzdGVyZWQgeWV0LCB0aGlzIHdpbGwgdHJpZ2dlciB0aGVcclxuICogcmVnaXN0cmF0aW9uIGFuZCByZXR1cm4gYW4gSW5Qcm9ncmVzc0luc3RhbGxhdGlvbkVudHJ5LlxyXG4gKlxyXG4gKiBJZiByZWdpc3RyYXRpb25Qcm9taXNlIGRvZXMgbm90IGV4aXN0LCB0aGUgaW5zdGFsbGF0aW9uRW50cnkgaXMgZ3VhcmFudGVlZFxyXG4gKiB0byBiZSByZWdpc3RlcmVkLlxyXG4gKi9cclxuZnVuY3Rpb24gdHJpZ2dlclJlZ2lzdHJhdGlvbklmTmVjZXNzYXJ5KGFwcENvbmZpZywgaW5zdGFsbGF0aW9uRW50cnkpIHtcclxuICAgIGlmIChpbnN0YWxsYXRpb25FbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDAgLyogTk9UX1NUQVJURUQgKi8pIHtcclxuICAgICAgICBpZiAoIW5hdmlnYXRvci5vbkxpbmUpIHtcclxuICAgICAgICAgICAgLy8gUmVnaXN0cmF0aW9uIHJlcXVpcmVkIGJ1dCBhcHAgaXMgb2ZmbGluZS5cclxuICAgICAgICAgICAgdmFyIHJlZ2lzdHJhdGlvblByb21pc2VXaXRoRXJyb3IgPSBQcm9taXNlLnJlamVjdChFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImFwcC1vZmZsaW5lXCIgLyogQVBQX09GRkxJTkUgKi8pKTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGluc3RhbGxhdGlvbkVudHJ5OiBpbnN0YWxsYXRpb25FbnRyeSxcclxuICAgICAgICAgICAgICAgIHJlZ2lzdHJhdGlvblByb21pc2U6IHJlZ2lzdHJhdGlvblByb21pc2VXaXRoRXJyb3JcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gVHJ5IHJlZ2lzdGVyaW5nLiBDaGFuZ2Ugc3RhdHVzIHRvIElOX1BST0dSRVNTLlxyXG4gICAgICAgIHZhciBpblByb2dyZXNzRW50cnkgPSB7XHJcbiAgICAgICAgICAgIGZpZDogaW5zdGFsbGF0aW9uRW50cnkuZmlkLFxyXG4gICAgICAgICAgICByZWdpc3RyYXRpb25TdGF0dXM6IDEgLyogSU5fUFJPR1JFU1MgKi8sXHJcbiAgICAgICAgICAgIHJlZ2lzdHJhdGlvblRpbWU6IERhdGUubm93KClcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciByZWdpc3RyYXRpb25Qcm9taXNlID0gcmVnaXN0ZXJJbnN0YWxsYXRpb24oYXBwQ29uZmlnLCBpblByb2dyZXNzRW50cnkpO1xyXG4gICAgICAgIHJldHVybiB7IGluc3RhbGxhdGlvbkVudHJ5OiBpblByb2dyZXNzRW50cnksIHJlZ2lzdHJhdGlvblByb21pc2U6IHJlZ2lzdHJhdGlvblByb21pc2UgfTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGluc3RhbGxhdGlvbkVudHJ5LnJlZ2lzdHJhdGlvblN0YXR1cyA9PT0gMSAvKiBJTl9QUk9HUkVTUyAqLykge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGluc3RhbGxhdGlvbkVudHJ5OiBpbnN0YWxsYXRpb25FbnRyeSxcclxuICAgICAgICAgICAgcmVnaXN0cmF0aW9uUHJvbWlzZTogd2FpdFVudGlsRmlkUmVnaXN0cmF0aW9uKGFwcENvbmZpZylcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHsgaW5zdGFsbGF0aW9uRW50cnk6IGluc3RhbGxhdGlvbkVudHJ5IH07XHJcbiAgICB9XHJcbn1cclxuLyoqIFRoaXMgd2lsbCBiZSBleGVjdXRlZCBvbmx5IG9uY2UgZm9yIGVhY2ggbmV3IEZpcmViYXNlIEluc3RhbGxhdGlvbi4gKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJJbnN0YWxsYXRpb24oYXBwQ29uZmlnLCBpbnN0YWxsYXRpb25FbnRyeSkge1xyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciByZWdpc3RlcmVkSW5zdGFsbGF0aW9uRW50cnksIGVfMTtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDIsICwgN10pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGNyZWF0ZUluc3RhbGxhdGlvblJlcXVlc3QoYXBwQ29uZmlnLCBpbnN0YWxsYXRpb25FbnRyeSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIHJlZ2lzdGVyZWRJbnN0YWxsYXRpb25FbnRyeSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgc2V0KGFwcENvbmZpZywgcmVnaXN0ZXJlZEluc3RhbGxhdGlvbkVudHJ5KV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgZV8xID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKGlzU2VydmVyRXJyb3IoZV8xKSAmJiBlXzEuY3VzdG9tRGF0YS5zZXJ2ZXJDb2RlID09PSA0MDkpKSByZXR1cm4gWzMgLypicmVhayovLCA0XTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBTZXJ2ZXIgcmV0dXJuZWQgYSBcIkZJRCBjYW4gbm90IGJlIHVzZWRcIiBlcnJvci5cclxuICAgICAgICAgICAgICAgICAgICAvLyBHZW5lcmF0ZSBhIG5ldyBJRCBuZXh0IHRpbWUuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVtb3ZlKGFwcENvbmZpZyldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFNlcnZlciByZXR1cm5lZCBhIFwiRklEIGNhbiBub3QgYmUgdXNlZFwiIGVycm9yLlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEdlbmVyYXRlIGEgbmV3IElEIG5leHQgdGltZS5cclxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IFxyXG4gICAgICAgICAgICAgICAgLy8gUmVnaXN0cmF0aW9uIGZhaWxlZC4gU2V0IEZJRCBhcyBub3QgcmVnaXN0ZXJlZC5cclxuICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHNldChhcHBDb25maWcsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlkOiBpbnN0YWxsYXRpb25FbnRyeS5maWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lzdHJhdGlvblN0YXR1czogMCAvKiBOT1RfU1RBUlRFRCAqL1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICAvLyBSZWdpc3RyYXRpb24gZmFpbGVkLiBTZXQgRklEIGFzIG5vdCByZWdpc3RlcmVkLlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDY7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDY6IHRocm93IGVfMTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG4vKiogQ2FsbCBpZiBGSUQgcmVnaXN0cmF0aW9uIGlzIHBlbmRpbmcgaW4gYW5vdGhlciByZXF1ZXN0LiAqL1xyXG5mdW5jdGlvbiB3YWl0VW50aWxGaWRSZWdpc3RyYXRpb24oYXBwQ29uZmlnKSB7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGVudHJ5LCBfYSwgaW5zdGFsbGF0aW9uRW50cnksIHJlZ2lzdHJhdGlvblByb21pc2U7XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHVwZGF0ZUluc3RhbGxhdGlvblJlcXVlc3QoYXBwQ29uZmlnKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnkgPSBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSAyO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKGVudHJ5LnJlZ2lzdHJhdGlvblN0YXR1cyA9PT0gMSAvKiBJTl9QUk9HUkVTUyAqLykpIHJldHVybiBbMyAvKmJyZWFrKi8sIDVdO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNyZWF0ZUluc3RhbGxhdGlvbiByZXF1ZXN0IHN0aWxsIGluIHByb2dyZXNzLlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHNsZWVwKDEwMCldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNyZWF0ZUluc3RhbGxhdGlvbiByZXF1ZXN0IHN0aWxsIGluIHByb2dyZXNzLlxyXG4gICAgICAgICAgICAgICAgICAgIF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB1cGRhdGVJbnN0YWxsYXRpb25SZXF1ZXN0KGFwcENvbmZpZyldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgIGVudHJ5ID0gX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKGVudHJ5LnJlZ2lzdHJhdGlvblN0YXR1cyA9PT0gMCAvKiBOT1RfU1RBUlRFRCAqLykpIHJldHVybiBbMyAvKmJyZWFrKi8sIDddO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGdldEluc3RhbGxhdGlvbkVudHJ5KGFwcENvbmZpZyldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICAgICAgICAgIF9hID0gX2Iuc2VudCgpLCBpbnN0YWxsYXRpb25FbnRyeSA9IF9hLmluc3RhbGxhdGlvbkVudHJ5LCByZWdpc3RyYXRpb25Qcm9taXNlID0gX2EucmVnaXN0cmF0aW9uUHJvbWlzZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVnaXN0cmF0aW9uUHJvbWlzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVnaXN0cmF0aW9uUHJvbWlzZV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGVyZSBpcyBubyByZWdpc3RyYXRpb25Qcm9taXNlLCBlbnRyeSBpcyByZWdpc3RlcmVkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgaW5zdGFsbGF0aW9uRW50cnldO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgNzogcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGVudHJ5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuLyoqXHJcbiAqIENhbGxlZCBvbmx5IGlmIHRoZXJlIGlzIGEgQ3JlYXRlSW5zdGFsbGF0aW9uIHJlcXVlc3QgaW4gcHJvZ3Jlc3MuXHJcbiAqXHJcbiAqIFVwZGF0ZXMgdGhlIEluc3RhbGxhdGlvbkVudHJ5IGluIHRoZSBEQiBiYXNlZCBvbiB0aGUgc3RhdHVzIG9mIHRoZVxyXG4gKiBDcmVhdGVJbnN0YWxsYXRpb24gcmVxdWVzdC5cclxuICpcclxuICogUmV0dXJucyB0aGUgdXBkYXRlZCBJbnN0YWxsYXRpb25FbnRyeS5cclxuICovXHJcbmZ1bmN0aW9uIHVwZGF0ZUluc3RhbGxhdGlvblJlcXVlc3QoYXBwQ29uZmlnKSB7XHJcbiAgICByZXR1cm4gdXBkYXRlKGFwcENvbmZpZywgZnVuY3Rpb24gKG9sZEVudHJ5KSB7XHJcbiAgICAgICAgaWYgKCFvbGRFbnRyeSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImluc3RhbGxhdGlvbi1ub3QtZm91bmRcIiAvKiBJTlNUQUxMQVRJT05fTk9UX0ZPVU5EICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZWRPdXRSZXF1ZXN0KG9sZEVudHJ5KTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGNsZWFyVGltZWRPdXRSZXF1ZXN0KGVudHJ5KSB7XHJcbiAgICBpZiAoaGFzSW5zdGFsbGF0aW9uUmVxdWVzdFRpbWVkT3V0KGVudHJ5KSkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGZpZDogZW50cnkuZmlkLFxyXG4gICAgICAgICAgICByZWdpc3RyYXRpb25TdGF0dXM6IDAgLyogTk9UX1NUQVJURUQgKi9cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGVudHJ5O1xyXG59XHJcbmZ1bmN0aW9uIGhhc0luc3RhbGxhdGlvblJlcXVlc3RUaW1lZE91dChpbnN0YWxsYXRpb25FbnRyeSkge1xyXG4gICAgcmV0dXJuIChpbnN0YWxsYXRpb25FbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDEgLyogSU5fUFJPR1JFU1MgKi8gJiZcclxuICAgICAgICBpbnN0YWxsYXRpb25FbnRyeS5yZWdpc3RyYXRpb25UaW1lICsgUEVORElOR19USU1FT1VUX01TIDwgRGF0ZS5ub3coKSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2VuZXJhdGVBdXRoVG9rZW5SZXF1ZXN0KF9hLCBpbnN0YWxsYXRpb25FbnRyeSkge1xyXG4gICAgdmFyIGFwcENvbmZpZyA9IF9hLmFwcENvbmZpZywgcGxhdGZvcm1Mb2dnZXJQcm92aWRlciA9IF9hLnBsYXRmb3JtTG9nZ2VyUHJvdmlkZXI7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGVuZHBvaW50LCBoZWFkZXJzLCBwbGF0Zm9ybUxvZ2dlciwgYm9keSwgcmVxdWVzdCwgcmVzcG9uc2UsIHJlc3BvbnNlVmFsdWUsIGNvbXBsZXRlZEF1dGhUb2tlbjtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICBlbmRwb2ludCA9IGdldEdlbmVyYXRlQXV0aFRva2VuRW5kcG9pbnQoYXBwQ29uZmlnLCBpbnN0YWxsYXRpb25FbnRyeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVycyA9IGdldEhlYWRlcnNXaXRoQXV0aChhcHBDb25maWcsIGluc3RhbGxhdGlvbkVudHJ5KTtcclxuICAgICAgICAgICAgICAgICAgICBwbGF0Zm9ybUxvZ2dlciA9IHBsYXRmb3JtTG9nZ2VyUHJvdmlkZXIuZ2V0SW1tZWRpYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGxhdGZvcm1Mb2dnZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVycy5hcHBlbmQoJ3gtZmlyZWJhc2UtY2xpZW50JywgcGxhdGZvcm1Mb2dnZXIuZ2V0UGxhdGZvcm1JbmZvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBib2R5ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0YWxsYXRpb246IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNka1ZlcnNpb246IFBBQ0tBR0VfVkVSU0lPTlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSlcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJldHJ5SWZTZXJ2ZXJFcnJvcihmdW5jdGlvbiAoKSB7IHJldHVybiBmZXRjaChlbmRwb2ludCwgcmVxdWVzdCk7IH0pXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZXNwb25zZS5qc29uKCldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlVmFsdWUgPSBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGVkQXV0aFRva2VuID0gZXh0cmFjdEF1dGhUb2tlbkluZm9Gcm9tUmVzcG9uc2UocmVzcG9uc2VWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGNvbXBsZXRlZEF1dGhUb2tlbl07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbNCAvKnlpZWxkKi8sIGdldEVycm9yRnJvbVJlc3BvbnNlKCdHZW5lcmF0ZSBBdXRoIFRva2VuJywgcmVzcG9uc2UpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogdGhyb3cgX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBnZXRHZW5lcmF0ZUF1dGhUb2tlbkVuZHBvaW50KGFwcENvbmZpZywgX2EpIHtcclxuICAgIHZhciBmaWQgPSBfYS5maWQ7XHJcbiAgICByZXR1cm4gZ2V0SW5zdGFsbGF0aW9uc0VuZHBvaW50KGFwcENvbmZpZykgKyBcIi9cIiArIGZpZCArIFwiL2F1dGhUb2tlbnM6Z2VuZXJhdGVcIjtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJucyBhIHZhbGlkIGF1dGhlbnRpY2F0aW9uIHRva2VuIGZvciB0aGUgaW5zdGFsbGF0aW9uLiBHZW5lcmF0ZXMgYSBuZXdcclxuICogdG9rZW4gaWYgb25lIGRvZXNuJ3QgZXhpc3QsIGlzIGV4cGlyZWQgb3IgYWJvdXQgdG8gZXhwaXJlLlxyXG4gKlxyXG4gKiBTaG91bGQgb25seSBiZSBjYWxsZWQgaWYgdGhlIEZpcmViYXNlIEluc3RhbGxhdGlvbiBpcyByZWdpc3RlcmVkLlxyXG4gKi9cclxuZnVuY3Rpb24gcmVmcmVzaEF1dGhUb2tlbihkZXBlbmRlbmNpZXMsIGZvcmNlUmVmcmVzaCkge1xyXG4gICAgaWYgKGZvcmNlUmVmcmVzaCA9PT0gdm9pZCAwKSB7IGZvcmNlUmVmcmVzaCA9IGZhbHNlOyB9XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHRva2VuUHJvbWlzZSwgZW50cnksIGF1dGhUb2tlbiwgX2E7XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHVwZGF0ZShkZXBlbmRlbmNpZXMuYXBwQ29uZmlnLCBmdW5jdGlvbiAob2xkRW50cnkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0VudHJ5UmVnaXN0ZXJlZChvbGRFbnRyeSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwibm90LXJlZ2lzdGVyZWRcIiAvKiBOT1RfUkVHSVNURVJFRCAqLyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9sZEF1dGhUb2tlbiA9IG9sZEVudHJ5LmF1dGhUb2tlbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmb3JjZVJlZnJlc2ggJiYgaXNBdXRoVG9rZW5WYWxpZChvbGRBdXRoVG9rZW4pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGVyZSBpcyBhIHZhbGlkIHRva2VuIGluIHRoZSBEQi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvbGRFbnRyeTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChvbGRBdXRoVG9rZW4ucmVxdWVzdFN0YXR1cyA9PT0gMSAvKiBJTl9QUk9HUkVTUyAqLykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlcmUgYWxyZWFkeSBpcyBhIHRva2VuIHJlcXVlc3QgaW4gcHJvZ3Jlc3MuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlblByb21pc2UgPSB3YWl0VW50aWxBdXRoVG9rZW5SZXF1ZXN0KGRlcGVuZGVuY2llcywgZm9yY2VSZWZyZXNoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvbGRFbnRyeTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vIHRva2VuIG9yIHRva2VuIGV4cGlyZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW5hdmlnYXRvci5vbkxpbmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImFwcC1vZmZsaW5lXCIgLyogQVBQX09GRkxJTkUgKi8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluUHJvZ3Jlc3NFbnRyeSA9IG1ha2VBdXRoVG9rZW5SZXF1ZXN0SW5Qcm9ncmVzc0VudHJ5KG9sZEVudHJ5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuUHJvbWlzZSA9IGZldGNoQXV0aFRva2VuRnJvbVNlcnZlcihkZXBlbmRlbmNpZXMsIGluUHJvZ3Jlc3NFbnRyeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5Qcm9ncmVzc0VudHJ5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIGVudHJ5ID0gX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdG9rZW5Qcm9taXNlKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0b2tlblByb21pc2VdO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIF9hID0gX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgIF9hID0gZW50cnkuYXV0aFRva2VuO1xyXG4gICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gNDtcclxuICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICBhdXRoVG9rZW4gPSBfYTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgYXV0aFRva2VuXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuLyoqXHJcbiAqIENhbGwgb25seSBpZiBGSUQgaXMgcmVnaXN0ZXJlZCBhbmQgQXV0aCBUb2tlbiByZXF1ZXN0IGlzIGluIHByb2dyZXNzLlxyXG4gKlxyXG4gKiBXYWl0cyB1bnRpbCB0aGUgY3VycmVudCBwZW5kaW5nIHJlcXVlc3QgZmluaXNoZXMuIElmIHRoZSByZXF1ZXN0IHRpbWVzIG91dCxcclxuICogdHJpZXMgb25jZSBpbiB0aGlzIHRocmVhZCBhcyB3ZWxsLlxyXG4gKi9cclxuZnVuY3Rpb24gd2FpdFVudGlsQXV0aFRva2VuUmVxdWVzdChkZXBlbmRlbmNpZXMsIGZvcmNlUmVmcmVzaCkge1xyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBlbnRyeSwgYXV0aFRva2VuO1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCB1cGRhdGVBdXRoVG9rZW5SZXF1ZXN0KGRlcGVuZGVuY2llcy5hcHBDb25maWcpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBlbnRyeSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDI7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoZW50cnkuYXV0aFRva2VuLnJlcXVlc3RTdGF0dXMgPT09IDEgLyogSU5fUFJPR1JFU1MgKi8pKSByZXR1cm4gWzMgLypicmVhayovLCA1XTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBnZW5lcmF0ZUF1dGhUb2tlbiBzdGlsbCBpbiBwcm9ncmVzcy5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBzbGVlcCgxMDApXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAvLyBnZW5lcmF0ZUF1dGhUb2tlbiBzdGlsbCBpbiBwcm9ncmVzcy5cclxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdXBkYXRlQXV0aFRva2VuUmVxdWVzdChkZXBlbmRlbmNpZXMuYXBwQ29uZmlnKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnkgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgYXV0aFRva2VuID0gZW50cnkuYXV0aFRva2VuO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhdXRoVG9rZW4ucmVxdWVzdFN0YXR1cyA9PT0gMCAvKiBOT1RfU1RBUlRFRCAqLykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgcmVxdWVzdCB0aW1lZCBvdXQgb3IgZmFpbGVkIGluIGEgZGlmZmVyZW50IGNhbGwuIFRyeSBhZ2Fpbi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlZnJlc2hBdXRoVG9rZW4oZGVwZW5kZW5jaWVzLCBmb3JjZVJlZnJlc2gpXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBhdXRoVG9rZW5dO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuLyoqXHJcbiAqIENhbGxlZCBvbmx5IGlmIHRoZXJlIGlzIGEgR2VuZXJhdGVBdXRoVG9rZW4gcmVxdWVzdCBpbiBwcm9ncmVzcy5cclxuICpcclxuICogVXBkYXRlcyB0aGUgSW5zdGFsbGF0aW9uRW50cnkgaW4gdGhlIERCIGJhc2VkIG9uIHRoZSBzdGF0dXMgb2YgdGhlXHJcbiAqIEdlbmVyYXRlQXV0aFRva2VuIHJlcXVlc3QuXHJcbiAqXHJcbiAqIFJldHVybnMgdGhlIHVwZGF0ZWQgSW5zdGFsbGF0aW9uRW50cnkuXHJcbiAqL1xyXG5mdW5jdGlvbiB1cGRhdGVBdXRoVG9rZW5SZXF1ZXN0KGFwcENvbmZpZykge1xyXG4gICAgcmV0dXJuIHVwZGF0ZShhcHBDb25maWcsIGZ1bmN0aW9uIChvbGRFbnRyeSkge1xyXG4gICAgICAgIGlmICghaXNFbnRyeVJlZ2lzdGVyZWQob2xkRW50cnkpKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwibm90LXJlZ2lzdGVyZWRcIiAvKiBOT1RfUkVHSVNURVJFRCAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBvbGRBdXRoVG9rZW4gPSBvbGRFbnRyeS5hdXRoVG9rZW47XHJcbiAgICAgICAgaWYgKGhhc0F1dGhUb2tlblJlcXVlc3RUaW1lZE91dChvbGRBdXRoVG9rZW4pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgb2xkRW50cnkpLCB7IGF1dGhUb2tlbjogeyByZXF1ZXN0U3RhdHVzOiAwIC8qIE5PVF9TVEFSVEVEICovIH0gfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvbGRFbnRyeTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGZldGNoQXV0aFRva2VuRnJvbVNlcnZlcihkZXBlbmRlbmNpZXMsIGluc3RhbGxhdGlvbkVudHJ5KSB7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGF1dGhUb2tlbiwgdXBkYXRlZEluc3RhbGxhdGlvbkVudHJ5LCBlXzEsIHVwZGF0ZWRJbnN0YWxsYXRpb25FbnRyeTtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDMsICwgOF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGdlbmVyYXRlQXV0aFRva2VuUmVxdWVzdChkZXBlbmRlbmNpZXMsIGluc3RhbGxhdGlvbkVudHJ5KV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgYXV0aFRva2VuID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRJbnN0YWxsYXRpb25FbnRyeSA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBpbnN0YWxsYXRpb25FbnRyeSksIHsgYXV0aFRva2VuOiBhdXRoVG9rZW4gfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgc2V0KGRlcGVuZGVuY2llcy5hcHBDb25maWcsIHVwZGF0ZWRJbnN0YWxsYXRpb25FbnRyeSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgYXV0aFRva2VuXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICBlXzEgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoaXNTZXJ2ZXJFcnJvcihlXzEpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChlXzEuY3VzdG9tRGF0YS5zZXJ2ZXJDb2RlID09PSA0MDEgfHwgZV8xLmN1c3RvbURhdGEuc2VydmVyQ29kZSA9PT0gNDA0KSkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDVdO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFNlcnZlciByZXR1cm5lZCBhIFwiRklEIG5vdCBmb3VuZFwiIG9yIGEgXCJJbnZhbGlkIGF1dGhlbnRpY2F0aW9uXCIgZXJyb3IuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gR2VuZXJhdGUgYSBuZXcgSUQgbmV4dCB0aW1lLlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlbW92ZShkZXBlbmRlbmNpZXMuYXBwQ29uZmlnKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gU2VydmVyIHJldHVybmVkIGEgXCJGSUQgbm90IGZvdW5kXCIgb3IgYSBcIkludmFsaWQgYXV0aGVudGljYXRpb25cIiBlcnJvci5cclxuICAgICAgICAgICAgICAgICAgICAvLyBHZW5lcmF0ZSBhIG5ldyBJRCBuZXh0IHRpbWUuXHJcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDddO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRJbnN0YWxsYXRpb25FbnRyeSA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBpbnN0YWxsYXRpb25FbnRyeSksIHsgYXV0aFRva2VuOiB7IHJlcXVlc3RTdGF0dXM6IDAgLyogTk9UX1NUQVJURUQgKi8gfSB9KTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBzZXQoZGVwZW5kZW5jaWVzLmFwcENvbmZpZywgdXBkYXRlZEluc3RhbGxhdGlvbkVudHJ5KV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gNztcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogdGhyb3cgZV8xO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA4OiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGlzRW50cnlSZWdpc3RlcmVkKGluc3RhbGxhdGlvbkVudHJ5KSB7XHJcbiAgICByZXR1cm4gKGluc3RhbGxhdGlvbkVudHJ5ICE9PSB1bmRlZmluZWQgJiZcclxuICAgICAgICBpbnN0YWxsYXRpb25FbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDIgLyogQ09NUExFVEVEICovKTtcclxufVxyXG5mdW5jdGlvbiBpc0F1dGhUb2tlblZhbGlkKGF1dGhUb2tlbikge1xyXG4gICAgcmV0dXJuIChhdXRoVG9rZW4ucmVxdWVzdFN0YXR1cyA9PT0gMiAvKiBDT01QTEVURUQgKi8gJiZcclxuICAgICAgICAhaXNBdXRoVG9rZW5FeHBpcmVkKGF1dGhUb2tlbikpO1xyXG59XHJcbmZ1bmN0aW9uIGlzQXV0aFRva2VuRXhwaXJlZChhdXRoVG9rZW4pIHtcclxuICAgIHZhciBub3cgPSBEYXRlLm5vdygpO1xyXG4gICAgcmV0dXJuIChub3cgPCBhdXRoVG9rZW4uY3JlYXRpb25UaW1lIHx8XHJcbiAgICAgICAgYXV0aFRva2VuLmNyZWF0aW9uVGltZSArIGF1dGhUb2tlbi5leHBpcmVzSW4gPCBub3cgKyBUT0tFTl9FWFBJUkFUSU9OX0JVRkZFUik7XHJcbn1cclxuLyoqIFJldHVybnMgYW4gdXBkYXRlZCBJbnN0YWxsYXRpb25FbnRyeSB3aXRoIGFuIEluUHJvZ3Jlc3NBdXRoVG9rZW4uICovXHJcbmZ1bmN0aW9uIG1ha2VBdXRoVG9rZW5SZXF1ZXN0SW5Qcm9ncmVzc0VudHJ5KG9sZEVudHJ5KSB7XHJcbiAgICB2YXIgaW5Qcm9ncmVzc0F1dGhUb2tlbiA9IHtcclxuICAgICAgICByZXF1ZXN0U3RhdHVzOiAxIC8qIElOX1BST0dSRVNTICovLFxyXG4gICAgICAgIHJlcXVlc3RUaW1lOiBEYXRlLm5vdygpXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LCBvbGRFbnRyeSksIHsgYXV0aFRva2VuOiBpblByb2dyZXNzQXV0aFRva2VuIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGhhc0F1dGhUb2tlblJlcXVlc3RUaW1lZE91dChhdXRoVG9rZW4pIHtcclxuICAgIHJldHVybiAoYXV0aFRva2VuLnJlcXVlc3RTdGF0dXMgPT09IDEgLyogSU5fUFJPR1JFU1MgKi8gJiZcclxuICAgICAgICBhdXRoVG9rZW4ucmVxdWVzdFRpbWUgKyBQRU5ESU5HX1RJTUVPVVRfTVMgPCBEYXRlLm5vdygpKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRJZChkZXBlbmRlbmNpZXMpIHtcclxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX2EsIGluc3RhbGxhdGlvbkVudHJ5LCByZWdpc3RyYXRpb25Qcm9taXNlO1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCBnZXRJbnN0YWxsYXRpb25FbnRyeShkZXBlbmRlbmNpZXMuYXBwQ29uZmlnKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgX2EgPSBfYi5zZW50KCksIGluc3RhbGxhdGlvbkVudHJ5ID0gX2EuaW5zdGFsbGF0aW9uRW50cnksIHJlZ2lzdHJhdGlvblByb21pc2UgPSBfYS5yZWdpc3RyYXRpb25Qcm9taXNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZWdpc3RyYXRpb25Qcm9taXNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lzdHJhdGlvblByb21pc2UuY2F0Y2goY29uc29sZS5lcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgaW5zdGFsbGF0aW9uIGlzIGFscmVhZHkgcmVnaXN0ZXJlZCwgdXBkYXRlIHRoZSBhdXRoZW50aWNhdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0b2tlbiBpZiBuZWVkZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZnJlc2hBdXRoVG9rZW4oZGVwZW5kZW5jaWVzKS5jYXRjaChjb25zb2xlLmVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGluc3RhbGxhdGlvbkVudHJ5LmZpZF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGdldFRva2VuKGRlcGVuZGVuY2llcywgZm9yY2VSZWZyZXNoKSB7XHJcbiAgICBpZiAoZm9yY2VSZWZyZXNoID09PSB2b2lkIDApIHsgZm9yY2VSZWZyZXNoID0gZmFsc2U7IH1cclxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYXV0aFRva2VuO1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCBjb21wbGV0ZUluc3RhbGxhdGlvblJlZ2lzdHJhdGlvbihkZXBlbmRlbmNpZXMuYXBwQ29uZmlnKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlZnJlc2hBdXRoVG9rZW4oZGVwZW5kZW5jaWVzLCBmb3JjZVJlZnJlc2gpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICBhdXRoVG9rZW4gPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGF1dGhUb2tlbi50b2tlbl07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGNvbXBsZXRlSW5zdGFsbGF0aW9uUmVnaXN0cmF0aW9uKGFwcENvbmZpZykge1xyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciByZWdpc3RyYXRpb25Qcm9taXNlO1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCBnZXRJbnN0YWxsYXRpb25FbnRyeShhcHBDb25maWcpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICByZWdpc3RyYXRpb25Qcm9taXNlID0gKF9hLnNlbnQoKSkucmVnaXN0cmF0aW9uUHJvbWlzZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlZ2lzdHJhdGlvblByb21pc2UpIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEEgY3JlYXRlSW5zdGFsbGF0aW9uIHJlcXVlc3QgaXMgaW4gcHJvZ3Jlc3MuIFdhaXQgdW50aWwgaXQgZmluaXNoZXMuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVnaXN0cmF0aW9uUHJvbWlzZV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQSBjcmVhdGVJbnN0YWxsYXRpb24gcmVxdWVzdCBpcyBpbiBwcm9ncmVzcy4gV2FpdCB1bnRpbCBpdCBmaW5pc2hlcy5cclxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAzO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGRlbGV0ZUluc3RhbGxhdGlvblJlcXVlc3QoYXBwQ29uZmlnLCBpbnN0YWxsYXRpb25FbnRyeSkge1xyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBlbmRwb2ludCwgaGVhZGVycywgcmVxdWVzdCwgcmVzcG9uc2U7XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgZW5kcG9pbnQgPSBnZXREZWxldGVFbmRwb2ludChhcHBDb25maWcsIGluc3RhbGxhdGlvbkVudHJ5KTtcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzID0gZ2V0SGVhZGVyc1dpdGhBdXRoKGFwcENvbmZpZywgaW5zdGFsbGF0aW9uRW50cnkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3QgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnNcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJldHJ5SWZTZXJ2ZXJFcnJvcihmdW5jdGlvbiAoKSB7IHJldHVybiBmZXRjaChlbmRwb2ludCwgcmVxdWVzdCk7IH0pXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISFyZXNwb25zZS5vaykgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZ2V0RXJyb3JGcm9tUmVzcG9uc2UoJ0RlbGV0ZSBJbnN0YWxsYXRpb24nLCByZXNwb25zZSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOiB0aHJvdyBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gZ2V0RGVsZXRlRW5kcG9pbnQoYXBwQ29uZmlnLCBfYSkge1xyXG4gICAgdmFyIGZpZCA9IF9hLmZpZDtcclxuICAgIHJldHVybiBnZXRJbnN0YWxsYXRpb25zRW5kcG9pbnQoYXBwQ29uZmlnKSArIFwiL1wiICsgZmlkO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGRlbGV0ZUluc3RhbGxhdGlvbihkZXBlbmRlbmNpZXMpIHtcclxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYXBwQ29uZmlnLCBlbnRyeTtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICBhcHBDb25maWcgPSBkZXBlbmRlbmNpZXMuYXBwQ29uZmlnO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHVwZGF0ZShhcHBDb25maWcsIGZ1bmN0aW9uIChvbGRFbnRyeSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9sZEVudHJ5ICYmIG9sZEVudHJ5LnJlZ2lzdHJhdGlvblN0YXR1cyA9PT0gMCAvKiBOT1RfU1RBUlRFRCAqLykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERlbGV0ZSB0aGUgdW5yZWdpc3RlcmVkIGVudHJ5IHdpdGhvdXQgc2VuZGluZyBhIGRlbGV0ZUluc3RhbGxhdGlvbiByZXF1ZXN0LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2xkRW50cnk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBlbnRyeSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWVudHJ5KSByZXR1cm4gWzMgLypicmVhayovLCA2XTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIShlbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDEgLyogSU5fUFJPR1JFU1MgKi8pKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBDYW4ndCBkZWxldGUgd2hpbGUgdHJ5aW5nIHRvIHJlZ2lzdGVyLlxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiZGVsZXRlLXBlbmRpbmctcmVnaXN0cmF0aW9uXCIgLyogREVMRVRFX1BFTkRJTkdfUkVHSVNUUkFUSU9OICovKTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIShlbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDIgLyogQ09NUExFVEVEICovKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhbmF2aWdhdG9yLm9uTGluZSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJhcHAtb2ZmbGluZVwiIC8qIEFQUF9PRkZMSU5FICovKTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFs0IC8qeWllbGQqLywgZGVsZXRlSW5zdGFsbGF0aW9uUmVxdWVzdChhcHBDb25maWcsIGVudHJ5KV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlbW92ZShhcHBDb25maWcpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSA2O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA2OiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBTZXRzIGEgbmV3IGNhbGxiYWNrIHRoYXQgd2lsbCBnZXQgY2FsbGVkIHdoZW4gSW5zdGFsbGF0aW9uIElEIGNoYW5nZXMuXHJcbiAqIFJldHVybnMgYW4gdW5zdWJzY3JpYmUgZnVuY3Rpb24gdGhhdCB3aWxsIHJlbW92ZSB0aGUgY2FsbGJhY2sgd2hlbiBjYWxsZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiBvbklkQ2hhbmdlKF9hLCBjYWxsYmFjaykge1xyXG4gICAgdmFyIGFwcENvbmZpZyA9IF9hLmFwcENvbmZpZztcclxuICAgIGFkZENhbGxiYWNrKGFwcENvbmZpZywgY2FsbGJhY2spO1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZW1vdmVDYWxsYmFjayhhcHBDb25maWcsIGNhbGxiYWNrKTtcclxuICAgIH07XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gZXh0cmFjdEFwcENvbmZpZyhhcHApIHtcclxuICAgIHZhciBlXzEsIF9hO1xyXG4gICAgaWYgKCFhcHAgfHwgIWFwcC5vcHRpb25zKSB7XHJcbiAgICAgICAgdGhyb3cgZ2V0TWlzc2luZ1ZhbHVlRXJyb3IoJ0FwcCBDb25maWd1cmF0aW9uJyk7XHJcbiAgICB9XHJcbiAgICBpZiAoIWFwcC5uYW1lKSB7XHJcbiAgICAgICAgdGhyb3cgZ2V0TWlzc2luZ1ZhbHVlRXJyb3IoJ0FwcCBOYW1lJyk7XHJcbiAgICB9XHJcbiAgICAvLyBSZXF1aXJlZCBhcHAgY29uZmlnIGtleXNcclxuICAgIHZhciBjb25maWdLZXlzID0gW1xyXG4gICAgICAgICdwcm9qZWN0SWQnLFxyXG4gICAgICAgICdhcGlLZXknLFxyXG4gICAgICAgICdhcHBJZCdcclxuICAgIF07XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGZvciAodmFyIGNvbmZpZ0tleXNfMSA9IF9fdmFsdWVzKGNvbmZpZ0tleXMpLCBjb25maWdLZXlzXzFfMSA9IGNvbmZpZ0tleXNfMS5uZXh0KCk7ICFjb25maWdLZXlzXzFfMS5kb25lOyBjb25maWdLZXlzXzFfMSA9IGNvbmZpZ0tleXNfMS5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIGtleU5hbWUgPSBjb25maWdLZXlzXzFfMS52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKCFhcHAub3B0aW9uc1trZXlOYW1lXSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgZ2V0TWlzc2luZ1ZhbHVlRXJyb3Ioa2V5TmFtZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGNvbmZpZ0tleXNfMV8xICYmICFjb25maWdLZXlzXzFfMS5kb25lICYmIChfYSA9IGNvbmZpZ0tleXNfMS5yZXR1cm4pKSBfYS5jYWxsKGNvbmZpZ0tleXNfMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgYXBwTmFtZTogYXBwLm5hbWUsXHJcbiAgICAgICAgcHJvamVjdElkOiBhcHAub3B0aW9ucy5wcm9qZWN0SWQsXHJcbiAgICAgICAgYXBpS2V5OiBhcHAub3B0aW9ucy5hcGlLZXksXHJcbiAgICAgICAgYXBwSWQ6IGFwcC5vcHRpb25zLmFwcElkXHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIGdldE1pc3NpbmdWYWx1ZUVycm9yKHZhbHVlTmFtZSkge1xyXG4gICAgcmV0dXJuIEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwibWlzc2luZy1hcHAtY29uZmlnLXZhbHVlc1wiIC8qIE1JU1NJTkdfQVBQX0NPTkZJR19WQUxVRVMgKi8sIHtcclxuICAgICAgICB2YWx1ZU5hbWU6IHZhbHVlTmFtZVxyXG4gICAgfSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJJbnN0YWxsYXRpb25zKGluc3RhbmNlKSB7XHJcbiAgICB2YXIgaW5zdGFsbGF0aW9uc05hbWUgPSAnaW5zdGFsbGF0aW9ucyc7XHJcbiAgICBpbnN0YW5jZS5JTlRFUk5BTC5yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KGluc3RhbGxhdGlvbnNOYW1lLCBmdW5jdGlvbiAoY29udGFpbmVyKSB7XHJcbiAgICAgICAgdmFyIGFwcCA9IGNvbnRhaW5lci5nZXRQcm92aWRlcignYXBwJykuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAgICAgLy8gVGhyb3dzIGlmIGFwcCBpc24ndCBjb25maWd1cmVkIHByb3Blcmx5LlxyXG4gICAgICAgIHZhciBhcHBDb25maWcgPSBleHRyYWN0QXBwQ29uZmlnKGFwcCk7XHJcbiAgICAgICAgdmFyIHBsYXRmb3JtTG9nZ2VyUHJvdmlkZXIgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoJ3BsYXRmb3JtLWxvZ2dlcicpO1xyXG4gICAgICAgIHZhciBkZXBlbmRlbmNpZXMgPSB7XHJcbiAgICAgICAgICAgIGFwcENvbmZpZzogYXBwQ29uZmlnLFxyXG4gICAgICAgICAgICBwbGF0Zm9ybUxvZ2dlclByb3ZpZGVyOiBwbGF0Zm9ybUxvZ2dlclByb3ZpZGVyXHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgaW5zdGFsbGF0aW9ucyA9IHtcclxuICAgICAgICAgICAgYXBwOiBhcHAsXHJcbiAgICAgICAgICAgIGdldElkOiBmdW5jdGlvbiAoKSB7IHJldHVybiBnZXRJZChkZXBlbmRlbmNpZXMpOyB9LFxyXG4gICAgICAgICAgICBnZXRUb2tlbjogZnVuY3Rpb24gKGZvcmNlUmVmcmVzaCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldFRva2VuKGRlcGVuZGVuY2llcywgZm9yY2VSZWZyZXNoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZGVsZXRlOiBmdW5jdGlvbiAoKSB7IHJldHVybiBkZWxldGVJbnN0YWxsYXRpb24oZGVwZW5kZW5jaWVzKTsgfSxcclxuICAgICAgICAgICAgb25JZENoYW5nZTogZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb25JZENoYW5nZShkZXBlbmRlbmNpZXMsIGNhbGxiYWNrKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIGluc3RhbGxhdGlvbnM7XHJcbiAgICB9LCBcIlBVQkxJQ1wiIC8qIFBVQkxJQyAqLykpO1xyXG4gICAgaW5zdGFuY2UucmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24pO1xyXG59XHJcbnJlZ2lzdGVySW5zdGFsbGF0aW9ucyhmaXJlYmFzZSk7XG5cbmV4cG9ydCB7IHJlZ2lzdGVySW5zdGFsbGF0aW9ucyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtLmpzLm1hcFxuIiwiaW1wb3J0ICdAZmlyZWJhc2UvaW5zdGFsbGF0aW9ucyc7XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcbmltcG9ydCB7IEVycm9yRmFjdG9yeSB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IF9fc3ByZWFkLCBfX2F3YWl0ZXIsIF9fZ2VuZXJhdG9yLCBfX2Fzc2lnbiwgX192YWx1ZXMgfSBmcm9tICd0c2xpYic7XG5pbXBvcnQgeyBkZWxldGVEYiwgb3BlbkRiIH0gZnJvbSAnaWRiJztcbmltcG9ydCBmaXJlYmFzZSBmcm9tICdAZmlyZWJhc2UvYXBwJztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIF9hO1xyXG52YXIgRVJST1JfTUFQID0gKF9hID0ge30sXHJcbiAgICBfYVtcIm1pc3NpbmctYXBwLWNvbmZpZy12YWx1ZXNcIiAvKiBNSVNTSU5HX0FQUF9DT05GSUdfVkFMVUVTICovXSA9ICdNaXNzaW5nIEFwcCBjb25maWd1cmF0aW9uIHZhbHVlOiBcInskdmFsdWVOYW1lfVwiJyxcclxuICAgIF9hW1wib25seS1hdmFpbGFibGUtaW4td2luZG93XCIgLyogQVZBSUxBQkxFX0lOX1dJTkRPVyAqL10gPSAnVGhpcyBtZXRob2QgaXMgYXZhaWxhYmxlIGluIGEgV2luZG93IGNvbnRleHQuJyxcclxuICAgIF9hW1wib25seS1hdmFpbGFibGUtaW4tc3dcIiAvKiBBVkFJTEFCTEVfSU5fU1cgKi9dID0gJ1RoaXMgbWV0aG9kIGlzIGF2YWlsYWJsZSBpbiBhIHNlcnZpY2Ugd29ya2VyIGNvbnRleHQuJyxcclxuICAgIF9hW1wicGVybWlzc2lvbi1kZWZhdWx0XCIgLyogUEVSTUlTU0lPTl9ERUZBVUxUICovXSA9ICdUaGUgbm90aWZpY2F0aW9uIHBlcm1pc3Npb24gd2FzIG5vdCBncmFudGVkIGFuZCBkaXNtaXNzZWQgaW5zdGVhZC4nLFxyXG4gICAgX2FbXCJwZXJtaXNzaW9uLWJsb2NrZWRcIiAvKiBQRVJNSVNTSU9OX0JMT0NLRUQgKi9dID0gJ1RoZSBub3RpZmljYXRpb24gcGVybWlzc2lvbiB3YXMgbm90IGdyYW50ZWQgYW5kIGJsb2NrZWQgaW5zdGVhZC4nLFxyXG4gICAgX2FbXCJ1bnN1cHBvcnRlZC1icm93c2VyXCIgLyogVU5TVVBQT1JURURfQlJPV1NFUiAqL10gPSBcIlRoaXMgYnJvd3NlciBkb2Vzbid0IHN1cHBvcnQgdGhlIEFQSSdzIHJlcXVpcmVkIHRvIHVzZSB0aGUgZmlyZWJhc2UgU0RLLlwiLFxyXG4gICAgX2FbXCJmYWlsZWQtc2VydmljZS13b3JrZXItcmVnaXN0cmF0aW9uXCIgLyogRkFJTEVEX0RFRkFVTFRfUkVHSVNUUkFUSU9OICovXSA9ICdXZSBhcmUgdW5hYmxlIHRvIHJlZ2lzdGVyIHRoZSBkZWZhdWx0IHNlcnZpY2Ugd29ya2VyLiB7JGJyb3dzZXJFcnJvck1lc3NhZ2V9JyxcclxuICAgIF9hW1widG9rZW4tc3Vic2NyaWJlLWZhaWxlZFwiIC8qIFRPS0VOX1NVQlNDUklCRV9GQUlMRUQgKi9dID0gJ0EgcHJvYmxlbSBvY2N1cnJlZCB3aGlsZSBzdWJzY3JpYmluZyB0aGUgdXNlciB0byBGQ006IHskZXJyb3JJbmZvfScsXHJcbiAgICBfYVtcInRva2VuLXN1YnNjcmliZS1uby10b2tlblwiIC8qIFRPS0VOX1NVQlNDUklCRV9OT19UT0tFTiAqL10gPSAnRkNNIHJldHVybmVkIG5vIHRva2VuIHdoZW4gc3Vic2NyaWJpbmcgdGhlIHVzZXIgdG8gcHVzaC4nLFxyXG4gICAgX2FbXCJ0b2tlbi11bnN1YnNjcmliZS1mYWlsZWRcIiAvKiBUT0tFTl9VTlNVQlNDUklCRV9GQUlMRUQgKi9dID0gJ0EgcHJvYmxlbSBvY2N1cnJlZCB3aGlsZSB1bnN1YnNjcmliaW5nIHRoZSAnICtcclxuICAgICAgICAndXNlciBmcm9tIEZDTTogeyRlcnJvckluZm99JyxcclxuICAgIF9hW1widG9rZW4tdXBkYXRlLWZhaWxlZFwiIC8qIFRPS0VOX1VQREFURV9GQUlMRUQgKi9dID0gJ0EgcHJvYmxlbSBvY2N1cnJlZCB3aGlsZSB1cGRhdGluZyB0aGUgdXNlciBmcm9tIEZDTTogeyRlcnJvckluZm99JyxcclxuICAgIF9hW1widG9rZW4tdXBkYXRlLW5vLXRva2VuXCIgLyogVE9LRU5fVVBEQVRFX05PX1RPS0VOICovXSA9ICdGQ00gcmV0dXJuZWQgbm8gdG9rZW4gd2hlbiB1cGRhdGluZyB0aGUgdXNlciB0byBwdXNoLicsXHJcbiAgICBfYVtcInVzZS1zdy1hZnRlci1nZXQtdG9rZW5cIiAvKiBVU0VfU1dfQUZURVJfR0VUX1RPS0VOICovXSA9ICdUaGUgdXNlU2VydmljZVdvcmtlcigpIG1ldGhvZCBtYXkgb25seSBiZSBjYWxsZWQgb25jZSBhbmQgbXVzdCBiZSAnICtcclxuICAgICAgICAnY2FsbGVkIGJlZm9yZSBjYWxsaW5nIGdldFRva2VuKCkgdG8gZW5zdXJlIHlvdXIgc2VydmljZSB3b3JrZXIgaXMgdXNlZC4nLFxyXG4gICAgX2FbXCJpbnZhbGlkLXN3LXJlZ2lzdHJhdGlvblwiIC8qIElOVkFMSURfU1dfUkVHSVNUUkFUSU9OICovXSA9ICdUaGUgaW5wdXQgdG8gdXNlU2VydmljZVdvcmtlcigpIG11c3QgYmUgYSBTZXJ2aWNlV29ya2VyUmVnaXN0cmF0aW9uLicsXHJcbiAgICBfYVtcImludmFsaWQtYmctaGFuZGxlclwiIC8qIElOVkFMSURfQkdfSEFORExFUiAqL10gPSAnVGhlIGlucHV0IHRvIHNldEJhY2tncm91bmRNZXNzYWdlSGFuZGxlcigpIG11c3QgYmUgYSBmdW5jdGlvbi4nLFxyXG4gICAgX2FbXCJpbnZhbGlkLXZhcGlkLWtleVwiIC8qIElOVkFMSURfVkFQSURfS0VZICovXSA9ICdUaGUgcHVibGljIFZBUElEIGtleSBtdXN0IGJlIGEgc3RyaW5nLicsXHJcbiAgICBfYVtcInVzZS12YXBpZC1rZXktYWZ0ZXItZ2V0LXRva2VuXCIgLyogVVNFX1ZBUElEX0tFWV9BRlRFUl9HRVRfVE9LRU4gKi9dID0gJ1RoZSB1c2VQdWJsaWNWYXBpZEtleSgpIG1ldGhvZCBtYXkgb25seSBiZSBjYWxsZWQgb25jZSBhbmQgbXVzdCBiZSAnICtcclxuICAgICAgICAnY2FsbGVkIGJlZm9yZSBjYWxsaW5nIGdldFRva2VuKCkgdG8gZW5zdXJlIHlvdXIgVkFQSUQga2V5IGlzIHVzZWQuJyxcclxuICAgIF9hKTtcclxudmFyIEVSUk9SX0ZBQ1RPUlkgPSBuZXcgRXJyb3JGYWN0b3J5KCdtZXNzYWdpbmcnLCAnTWVzc2FnaW5nJywgRVJST1JfTUFQKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIERFRkFVTFRfU1dfUEFUSCA9ICcvZmlyZWJhc2UtbWVzc2FnaW5nLXN3LmpzJztcclxudmFyIERFRkFVTFRfU1dfU0NPUEUgPSAnL2ZpcmViYXNlLWNsb3VkLW1lc3NhZ2luZy1wdXNoLXNjb3BlJztcclxudmFyIERFRkFVTFRfVkFQSURfS0VZID0gJ0JET1U5OS1oNjdIY0E2SmVGWEhiU05NdTdlMnlOTnUzUnpvTWo4VE00Vzg4aklUZnE3Wm1QdklNMUl2LTRfbDJMeFFjWXdocWJ5MnhHcFd3empmQW5HNCc7XHJcbnZhciBFTkRQT0lOVCA9ICdodHRwczovL2ZjbXJlZ2lzdHJhdGlvbnMuZ29vZ2xlYXBpcy5jb20vdjEnO1xyXG4vLyBLZXkgb2YgRkNNIFBheWxvYWQgaW4gTm90aWZpY2F0aW9uJ3MgZGF0YSBmaWVsZC5cclxudmFyIEZDTV9NU0cgPSAnRkNNX01TRyc7XHJcbnZhciBUQUcgPSAnRmlyZWJhc2VNZXNzYWdpbmc6ICc7XHJcbi8vIFNldCB0byAnMScgaWYgQW5hbHl0aWNzIGlzIGVuYWJsZWQgZm9yIHRoZSBjYW1wYWlnblxyXG52YXIgQ09OU09MRV9DQU1QQUlHTl9BTkFMWVRJQ1NfRU5BQkxFRCA9ICdnb29nbGUuYy5hLmUnO1xyXG52YXIgQ09OU09MRV9DQU1QQUlHTl9JRCA9ICdnb29nbGUuYy5hLmNfaWQnO1xyXG52YXIgQ09OU09MRV9DQU1QQUlHTl9USU1FID0gJ2dvb2dsZS5jLmEudHMnO1xyXG52YXIgQ09OU09MRV9DQU1QQUlHTl9OQU1FID0gJ2dvb2dsZS5jLmEuY19sJztcclxuLy8gRHVlIHRvIHRoZSBmYWN0IHRoYXQgb25CYWNrZ3JvdW5kTWVzc2FnZSBjYW4ndCBiZSBhd2FpdGVkICh0byBzdXBwb3J0IHJ4anMpLCBhIHNpbGVudCBwdXNoXHJcbi8vIHdhcm5pbmcgbWlnaHQgYmUgc2hvd24gYnkgdGhlIGJyb3dzZXIgaWYgdGhlIGNhbGxiYWNrIGZhaWxzIHRvIGNvbXBsZXRlcyBieSB0aGUgZW5kIG9mIG9uUHVzaC5cclxuLy8gRXhwZXJpbWVudHMgd2VyZSByYW4gdG8gZGV0ZXJtaW5lIHRoZSBtYWpvcml0eSBvbkJhY2tncm91bmQgbWVzc2FnZSBjbG9jayB0aW1lLiBUaGlzIGJyaWVmXHJcbi8vIGJsb2NraW5nIHRpbWUgd291bGQgYWxsb3cgbWFqb3JpdHkgb2YgdGhlIG9uQmFja2dyb3VuZE1lc3NhZ2UgY2FsbGJhY2sgdG8gZmluaXNoLlxyXG52YXIgQkFDS0dST1VORF9IQU5ETEVfRVhFQ1VUSU9OX1RJTUVfTElNSVRfTVMgPSAxMDAwO1xyXG4vLyBQcmVwYXJhdGlvbiB0aW1lIGZvciBjbGllbnQgdG8gaW5pdGlhbGl6ZSBhbmQgc2V0IHVwIHRoZSBtZXNzYWdlIGhhbmRsZXIuXHJcbnZhciBGT1JFR1JPVU5EX0hBTkRMRV9QUkVQQVJBVElPTl9USU1FX01TID0gMzAwMDtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHRcclxuICogaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2VcclxuICogaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3NcclxuICogb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlclxyXG4gKiB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBNZXNzYWdlVHlwZTtcclxuKGZ1bmN0aW9uIChNZXNzYWdlVHlwZSkge1xyXG4gICAgTWVzc2FnZVR5cGVbXCJQVVNIX1JFQ0VJVkVEXCJdID0gXCJwdXNoLXJlY2VpdmVkXCI7XHJcbiAgICBNZXNzYWdlVHlwZVtcIk5PVElGSUNBVElPTl9DTElDS0VEXCJdID0gXCJub3RpZmljYXRpb24tY2xpY2tlZFwiO1xyXG59KShNZXNzYWdlVHlwZSB8fCAoTWVzc2FnZVR5cGUgPSB7fSkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBhcnJheVRvQmFzZTY0KGFycmF5KSB7XHJcbiAgICB2YXIgdWludDhBcnJheSA9IG5ldyBVaW50OEFycmF5KGFycmF5KTtcclxuICAgIHZhciBiYXNlNjRTdHJpbmcgPSBidG9hKFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCBfX3NwcmVhZCh1aW50OEFycmF5KSkpO1xyXG4gICAgcmV0dXJuIGJhc2U2NFN0cmluZy5yZXBsYWNlKC89L2csICcnKS5yZXBsYWNlKC9cXCsvZywgJy0nKS5yZXBsYWNlKC9cXC8vZywgJ18nKTtcclxufVxyXG5mdW5jdGlvbiBiYXNlNjRUb0FycmF5KGJhc2U2NFN0cmluZykge1xyXG4gICAgdmFyIHBhZGRpbmcgPSAnPScucmVwZWF0KCg0IC0gKGJhc2U2NFN0cmluZy5sZW5ndGggJSA0KSkgJSA0KTtcclxuICAgIHZhciBiYXNlNjQgPSAoYmFzZTY0U3RyaW5nICsgcGFkZGluZylcclxuICAgICAgICAucmVwbGFjZSgvXFwtL2csICcrJylcclxuICAgICAgICAucmVwbGFjZSgvXy9nLCAnLycpO1xyXG4gICAgdmFyIHJhd0RhdGEgPSBhdG9iKGJhc2U2NCk7XHJcbiAgICB2YXIgb3V0cHV0QXJyYXkgPSBuZXcgVWludDhBcnJheShyYXdEYXRhLmxlbmd0aCk7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhd0RhdGEubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICBvdXRwdXRBcnJheVtpXSA9IHJhd0RhdGEuY2hhckNvZGVBdChpKTtcclxuICAgIH1cclxuICAgIHJldHVybiBvdXRwdXRBcnJheTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgT0xEX0RCX05BTUUgPSAnZmNtX3Rva2VuX2RldGFpbHNfZGInO1xyXG4vKipcclxuICogVGhlIGxhc3QgREIgdmVyc2lvbiBvZiAnZmNtX3Rva2VuX2RldGFpbHNfZGInIHdhcyA0LiBUaGlzIGlzIG9uZSBoaWdoZXIsIHNvIHRoYXQgdGhlIHVwZ3JhZGVcclxuICogY2FsbGJhY2sgaXMgY2FsbGVkIGZvciBhbGwgdmVyc2lvbnMgb2YgdGhlIG9sZCBEQi5cclxuICovXHJcbnZhciBPTERfREJfVkVSU0lPTiA9IDU7XHJcbnZhciBPTERfT0JKRUNUX1NUT1JFX05BTUUgPSAnZmNtX3Rva2VuX29iamVjdF9TdG9yZSc7XHJcbmZ1bmN0aW9uIG1pZ3JhdGVPbGREYXRhYmFzZShzZW5kZXJJZCkge1xyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBkYXRhYmFzZXMsIGRiTmFtZXMsIHRva2VuRGV0YWlscywgZGI7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISgnZGF0YWJhc2VzJyBpbiBpbmRleGVkREIpKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBpbmRleGVkREIuZGF0YWJhc2VzKCldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFiYXNlcyA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBkYk5hbWVzID0gZGF0YWJhc2VzLm1hcChmdW5jdGlvbiAoZGIpIHsgcmV0dXJuIGRiLm5hbWU7IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZGJOYW1lcy5pbmNsdWRlcyhPTERfREJfTkFNRSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gb2xkIERCIGRpZG4ndCBleGlzdCwgbm8gbmVlZCB0byBvcGVuLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgbnVsbF07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMjtcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICB0b2tlbkRldGFpbHMgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIG9wZW5EYihPTERfREJfTkFNRSwgT0xEX0RCX1ZFUlNJT04sIGZ1bmN0aW9uIChkYikgeyByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9iamVjdFN0b3JlLCB2YWx1ZSwgb2xkRGV0YWlscywgb2xkRGV0YWlscywgb2xkRGV0YWlscztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfYTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYi5vbGRWZXJzaW9uIDwgMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERhdGFiYXNlIHRvbyBvbGQsIHNraXAgbWlncmF0aW9uLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZGIub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucyhPTERfT0JKRUNUX1NUT1JFX05BTUUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGF0YWJhc2UgZGlkIG5vdCBleGlzdC4gTm90aGluZyB0byBkby5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3RTdG9yZSA9IGRiLnRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKE9MRF9PQkpFQ1RfU1RPUkVfTkFNRSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBvYmplY3RTdG9yZS5pbmRleCgnZmNtU2VuZGVySWQnKS5nZXQoc2VuZGVySWQpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBvYmplY3RTdG9yZS5jbGVhcigpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vIGVudHJ5IGluIHRoZSBkYXRhYmFzZSwgbm90aGluZyB0byBtaWdyYXRlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYi5vbGRWZXJzaW9uID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkRGV0YWlscyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghb2xkRGV0YWlscy5hdXRoIHx8ICFvbGREZXRhaWxzLnAyNTZkaCB8fCAhb2xkRGV0YWlscy5lbmRwb2ludCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuRGV0YWlscyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46IG9sZERldGFpbHMuZmNtVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZVRpbWU6IChfYSA9IG9sZERldGFpbHMuY3JlYXRlVGltZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uT3B0aW9uczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0aDogb2xkRGV0YWlscy5hdXRoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcDI1NmRoOiBvbGREZXRhaWxzLnAyNTZkaCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZHBvaW50OiBvbGREZXRhaWxzLmVuZHBvaW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dTY29wZTogb2xkRGV0YWlscy5zd1Njb3BlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFwaWRLZXk6IHR5cGVvZiBvbGREZXRhaWxzLnZhcGlkS2V5ID09PSAnc3RyaW5nJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gb2xkRGV0YWlscy52YXBpZEtleVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogYXJyYXlUb0Jhc2U2NChvbGREZXRhaWxzLnZhcGlkS2V5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRiLm9sZFZlcnNpb24gPT09IDMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGREZXRhaWxzID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5EZXRhaWxzID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogb2xkRGV0YWlscy5mY21Ub2tlbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlVGltZTogb2xkRGV0YWlscy5jcmVhdGVUaW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb25PcHRpb25zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRoOiBhcnJheVRvQmFzZTY0KG9sZERldGFpbHMuYXV0aCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwMjU2ZGg6IGFycmF5VG9CYXNlNjQob2xkRGV0YWlscy5wMjU2ZGgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kcG9pbnQ6IG9sZERldGFpbHMuZW5kcG9pbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd1Njb3BlOiBvbGREZXRhaWxzLnN3U2NvcGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXBpZEtleTogYXJyYXlUb0Jhc2U2NChvbGREZXRhaWxzLnZhcGlkS2V5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRiLm9sZFZlcnNpb24gPT09IDQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGREZXRhaWxzID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5EZXRhaWxzID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogb2xkRGV0YWlscy5mY21Ub2tlbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlVGltZTogb2xkRGV0YWlscy5jcmVhdGVUaW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb25PcHRpb25zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRoOiBhcnJheVRvQmFzZTY0KG9sZERldGFpbHMuYXV0aCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwMjU2ZGg6IGFycmF5VG9CYXNlNjQob2xkRGV0YWlscy5wMjU2ZGgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kcG9pbnQ6IG9sZERldGFpbHMuZW5kcG9pbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd1Njb3BlOiBvbGREZXRhaWxzLnN3U2NvcGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXBpZEtleTogYXJyYXlUb0Jhc2U2NChvbGREZXRhaWxzLnZhcGlkS2V5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7IH0pXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICBkYiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBkYi5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIERlbGV0ZSBhbGwgb2xkIGRhdGFiYXNlcy5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBkZWxldGVEYihPTERfREJfTkFNRSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIERlbGV0ZSBhbGwgb2xkIGRhdGFiYXNlcy5cclxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZGVsZXRlRGIoJ2ZjbV92YXBpZF9kZXRhaWxzX2RiJyldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBkZWxldGVEYigndW5kZWZpbmVkJyldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgY2hlY2tUb2tlbkRldGFpbHModG9rZW5EZXRhaWxzKSA/IHRva2VuRGV0YWlscyA6IG51bGxdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBjaGVja1Rva2VuRGV0YWlscyh0b2tlbkRldGFpbHMpIHtcclxuICAgIGlmICghdG9rZW5EZXRhaWxzIHx8ICF0b2tlbkRldGFpbHMuc3Vic2NyaXB0aW9uT3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHZhciBzdWJzY3JpcHRpb25PcHRpb25zID0gdG9rZW5EZXRhaWxzLnN1YnNjcmlwdGlvbk9wdGlvbnM7XHJcbiAgICByZXR1cm4gKHR5cGVvZiB0b2tlbkRldGFpbHMuY3JlYXRlVGltZSA9PT0gJ251bWJlcicgJiZcclxuICAgICAgICB0b2tlbkRldGFpbHMuY3JlYXRlVGltZSA+IDAgJiZcclxuICAgICAgICB0eXBlb2YgdG9rZW5EZXRhaWxzLnRva2VuID09PSAnc3RyaW5nJyAmJlxyXG4gICAgICAgIHRva2VuRGV0YWlscy50b2tlbi5sZW5ndGggPiAwICYmXHJcbiAgICAgICAgdHlwZW9mIHN1YnNjcmlwdGlvbk9wdGlvbnMuYXV0aCA9PT0gJ3N0cmluZycgJiZcclxuICAgICAgICBzdWJzY3JpcHRpb25PcHRpb25zLmF1dGgubGVuZ3RoID4gMCAmJlxyXG4gICAgICAgIHR5cGVvZiBzdWJzY3JpcHRpb25PcHRpb25zLnAyNTZkaCA9PT0gJ3N0cmluZycgJiZcclxuICAgICAgICBzdWJzY3JpcHRpb25PcHRpb25zLnAyNTZkaC5sZW5ndGggPiAwICYmXHJcbiAgICAgICAgdHlwZW9mIHN1YnNjcmlwdGlvbk9wdGlvbnMuZW5kcG9pbnQgPT09ICdzdHJpbmcnICYmXHJcbiAgICAgICAgc3Vic2NyaXB0aW9uT3B0aW9ucy5lbmRwb2ludC5sZW5ndGggPiAwICYmXHJcbiAgICAgICAgdHlwZW9mIHN1YnNjcmlwdGlvbk9wdGlvbnMuc3dTY29wZSA9PT0gJ3N0cmluZycgJiZcclxuICAgICAgICBzdWJzY3JpcHRpb25PcHRpb25zLnN3U2NvcGUubGVuZ3RoID4gMCAmJlxyXG4gICAgICAgIHR5cGVvZiBzdWJzY3JpcHRpb25PcHRpb25zLnZhcGlkS2V5ID09PSAnc3RyaW5nJyAmJlxyXG4gICAgICAgIHN1YnNjcmlwdGlvbk9wdGlvbnMudmFwaWRLZXkubGVuZ3RoID4gMCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLy8gRXhwb3J0ZWQgZm9yIHRlc3RzLlxyXG52YXIgREFUQUJBU0VfTkFNRSA9ICdmaXJlYmFzZS1tZXNzYWdpbmctZGF0YWJhc2UnO1xyXG52YXIgREFUQUJBU0VfVkVSU0lPTiA9IDE7XHJcbnZhciBPQkpFQ1RfU1RPUkVfTkFNRSA9ICdmaXJlYmFzZS1tZXNzYWdpbmctc3RvcmUnO1xyXG52YXIgZGJQcm9taXNlID0gbnVsbDtcclxuZnVuY3Rpb24gZ2V0RGJQcm9taXNlKCkge1xyXG4gICAgaWYgKCFkYlByb21pc2UpIHtcclxuICAgICAgICBkYlByb21pc2UgPSBvcGVuRGIoREFUQUJBU0VfTkFNRSwgREFUQUJBU0VfVkVSU0lPTiwgZnVuY3Rpb24gKHVwZ3JhZGVEYikge1xyXG4gICAgICAgICAgICAvLyBXZSBkb24ndCB1c2UgJ2JyZWFrJyBpbiB0aGlzIHN3aXRjaCBzdGF0ZW1lbnQsIHRoZSBmYWxsLXRocm91Z2ggYmVoYXZpb3IgaXMgd2hhdCB3ZSB3YW50LFxyXG4gICAgICAgICAgICAvLyBiZWNhdXNlIGlmIHRoZXJlIGFyZSBtdWx0aXBsZSB2ZXJzaW9ucyBiZXR3ZWVuIHRoZSBvbGQgdmVyc2lvbiBhbmQgdGhlIGN1cnJlbnQgdmVyc2lvbiwgd2VcclxuICAgICAgICAgICAgLy8gd2FudCBBTEwgdGhlIG1pZ3JhdGlvbnMgdGhhdCBjb3JyZXNwb25kIHRvIHRob3NlIHZlcnNpb25zIHRvIHJ1biwgbm90IG9ubHkgdGhlIGxhc3Qgb25lLlxyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVmYXVsdC1jYXNlXHJcbiAgICAgICAgICAgIHN3aXRjaCAodXBncmFkZURiLm9sZFZlcnNpb24pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICB1cGdyYWRlRGIuY3JlYXRlT2JqZWN0U3RvcmUoT0JKRUNUX1NUT1JFX05BTUUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGJQcm9taXNlO1xyXG59XHJcbi8qKiBHZXRzIHJlY29yZChzKSBmcm9tIHRoZSBvYmplY3RTdG9yZSB0aGF0IG1hdGNoIHRoZSBnaXZlbiBrZXkuICovXHJcbmZ1bmN0aW9uIGRiR2V0KGZpcmViYXNlRGVwZW5kZW5jaWVzKSB7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGtleSwgZGIsIHRva2VuRGV0YWlscywgb2xkVG9rZW5EZXRhaWxzO1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgIGtleSA9IGdldEtleShmaXJlYmFzZURlcGVuZGVuY2llcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZ2V0RGJQcm9taXNlKCldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIGRiID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGRiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudHJhbnNhY3Rpb24oT0JKRUNUX1NUT1JFX05BTUUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAub2JqZWN0U3RvcmUoT0JKRUNUX1NUT1JFX05BTUUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0KGtleSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIHRva2VuRGV0YWlscyA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRva2VuRGV0YWlscykgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRva2VuRGV0YWlsc107XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbNCAvKnlpZWxkKi8sIG1pZ3JhdGVPbGREYXRhYmFzZShmaXJlYmFzZURlcGVuZGVuY2llcy5hcHBDb25maWcuc2VuZGVySWQpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICBvbGRUb2tlbkRldGFpbHMgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFvbGRUb2tlbkRldGFpbHMpIHJldHVybiBbMyAvKmJyZWFrKi8sIDZdO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGRiU2V0KGZpcmViYXNlRGVwZW5kZW5jaWVzLCBvbGRUb2tlbkRldGFpbHMpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIG9sZFRva2VuRGV0YWlsc107XHJcbiAgICAgICAgICAgICAgICBjYXNlIDY6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuLyoqIEFzc2lnbnMgb3Igb3ZlcndyaXRlcyB0aGUgcmVjb3JkIGZvciB0aGUgZ2l2ZW4ga2V5IHdpdGggdGhlIGdpdmVuIHZhbHVlLiAqL1xyXG5mdW5jdGlvbiBkYlNldChmaXJlYmFzZURlcGVuZGVuY2llcywgdG9rZW5EZXRhaWxzKSB7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGtleSwgZGIsIHR4O1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgIGtleSA9IGdldEtleShmaXJlYmFzZURlcGVuZGVuY2llcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZ2V0RGJQcm9taXNlKCldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIGRiID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHR4ID0gZGIudHJhbnNhY3Rpb24oT0JKRUNUX1NUT1JFX05BTUUsICdyZWFkd3JpdGUnKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0eC5vYmplY3RTdG9yZShPQkpFQ1RfU1RPUkVfTkFNRSkucHV0KHRva2VuRGV0YWlscywga2V5KV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHR4LmNvbXBsZXRlXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRva2VuRGV0YWlsc107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbi8qKiBSZW1vdmVzIHJlY29yZChzKSBmcm9tIHRoZSBvYmplY3RTdG9yZSB0aGF0IG1hdGNoIHRoZSBnaXZlbiBrZXkuICovXHJcbmZ1bmN0aW9uIGRiUmVtb3ZlKGZpcmViYXNlRGVwZW5kZW5jaWVzKSB7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGtleSwgZGIsIHR4O1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgIGtleSA9IGdldEtleShmaXJlYmFzZURlcGVuZGVuY2llcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZ2V0RGJQcm9taXNlKCldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIGRiID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHR4ID0gZGIudHJhbnNhY3Rpb24oT0JKRUNUX1NUT1JFX05BTUUsICdyZWFkd3JpdGUnKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0eC5vYmplY3RTdG9yZShPQkpFQ1RfU1RPUkVfTkFNRSkuZGVsZXRlKGtleSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0eC5jb21wbGV0ZV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gZ2V0S2V5KF9hKSB7XHJcbiAgICB2YXIgYXBwQ29uZmlnID0gX2EuYXBwQ29uZmlnO1xyXG4gICAgcmV0dXJuIGFwcENvbmZpZy5hcHBJZDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiByZXF1ZXN0R2V0VG9rZW4oZmlyZWJhc2VEZXBlbmRlbmNpZXMsIHN1YnNjcmlwdGlvbk9wdGlvbnMpIHtcclxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgaGVhZGVycywgYm9keSwgc3Vic2NyaWJlT3B0aW9ucywgcmVzcG9uc2VEYXRhLCByZXNwb25zZSwgZXJyXzEsIG1lc3NhZ2U7XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIGdldEhlYWRlcnMoZmlyZWJhc2VEZXBlbmRlbmNpZXMpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJvZHkgPSBnZXRCb2R5KHN1YnNjcmlwdGlvbk9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZU9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMiwgNSwgLCA2XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZmV0Y2goZ2V0RW5kcG9pbnQoZmlyZWJhc2VEZXBlbmRlbmNpZXMuYXBwQ29uZmlnKSwgc3Vic2NyaWJlT3B0aW9ucyldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlc3BvbnNlLmpzb24oKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VEYXRhID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDZdO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgIGVycl8xID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwidG9rZW4tc3Vic2NyaWJlLWZhaWxlZFwiIC8qIFRPS0VOX1NVQlNDUklCRV9GQUlMRUQgKi8sIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JJbmZvOiBlcnJfMVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZURhdGEuZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IHJlc3BvbnNlRGF0YS5lcnJvci5tZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcInRva2VuLXN1YnNjcmliZS1mYWlsZWRcIiAvKiBUT0tFTl9TVUJTQ1JJQkVfRkFJTEVEICovLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvckluZm86IG1lc3NhZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2VEYXRhLnRva2VuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwidG9rZW4tc3Vic2NyaWJlLW5vLXRva2VuXCIgLyogVE9LRU5fU1VCU0NSSUJFX05PX1RPS0VOICovKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3BvbnNlRGF0YS50b2tlbl07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIHJlcXVlc3RVcGRhdGVUb2tlbihmaXJlYmFzZURlcGVuZGVuY2llcywgdG9rZW5EZXRhaWxzKSB7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGhlYWRlcnMsIGJvZHksIHVwZGF0ZU9wdGlvbnMsIHJlc3BvbnNlRGF0YSwgcmVzcG9uc2UsIGVycl8yLCBtZXNzYWdlO1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCBnZXRIZWFkZXJzKGZpcmViYXNlRGVwZW5kZW5jaWVzKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVycyA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBib2R5ID0gZ2V0Qm9keSh0b2tlbkRldGFpbHMuc3Vic2NyaXB0aW9uT3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMiwgNSwgLCA2XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZmV0Y2goZ2V0RW5kcG9pbnQoZmlyZWJhc2VEZXBlbmRlbmNpZXMuYXBwQ29uZmlnKSArIFwiL1wiICsgdG9rZW5EZXRhaWxzLnRva2VuLCB1cGRhdGVPcHRpb25zKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzcG9uc2UuanNvbigpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZURhdGEgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgZXJyXzIgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJ0b2tlbi11cGRhdGUtZmFpbGVkXCIgLyogVE9LRU5fVVBEQVRFX0ZBSUxFRCAqLywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvckluZm86IGVycl8yXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlRGF0YS5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gcmVzcG9uc2VEYXRhLmVycm9yLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwidG9rZW4tdXBkYXRlLWZhaWxlZFwiIC8qIFRPS0VOX1VQREFURV9GQUlMRUQgKi8sIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ySW5mbzogbWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZURhdGEudG9rZW4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJ0b2tlbi11cGRhdGUtbm8tdG9rZW5cIiAvKiBUT0tFTl9VUERBVEVfTk9fVE9LRU4gKi8pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVzcG9uc2VEYXRhLnRva2VuXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gcmVxdWVzdERlbGV0ZVRva2VuKGZpcmViYXNlRGVwZW5kZW5jaWVzLCB0b2tlbikge1xyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBoZWFkZXJzLCB1bnN1YnNjcmliZU9wdGlvbnMsIHJlc3BvbnNlLCByZXNwb25zZURhdGEsIG1lc3NhZ2UsIGVycl8zO1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCBnZXRIZWFkZXJzKGZpcmViYXNlRGVwZW5kZW5jaWVzKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVycyA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICB1bnN1YnNjcmliZU9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnNcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMjtcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzIsIDUsICwgNl0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGZldGNoKGdldEVuZHBvaW50KGZpcmViYXNlRGVwZW5kZW5jaWVzLmFwcENvbmZpZykgKyBcIi9cIiArIHRva2VuLCB1bnN1YnNjcmliZU9wdGlvbnMpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZXNwb25zZS5qc29uKCldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlRGF0YSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2VEYXRhLmVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSByZXNwb25zZURhdGEuZXJyb3IubWVzc2FnZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJ0b2tlbi11bnN1YnNjcmliZS1mYWlsZWRcIiAvKiBUT0tFTl9VTlNVQlNDUklCRV9GQUlMRUQgKi8sIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ySW5mbzogbWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgZXJyXzMgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJ0b2tlbi11bnN1YnNjcmliZS1mYWlsZWRcIiAvKiBUT0tFTl9VTlNVQlNDUklCRV9GQUlMRUQgKi8sIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JJbmZvOiBlcnJfM1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA2OiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGdldEVuZHBvaW50KF9hKSB7XHJcbiAgICB2YXIgcHJvamVjdElkID0gX2EucHJvamVjdElkO1xyXG4gICAgcmV0dXJuIEVORFBPSU5UICsgXCIvcHJvamVjdHMvXCIgKyBwcm9qZWN0SWQgKyBcIi9yZWdpc3RyYXRpb25zXCI7XHJcbn1cclxuZnVuY3Rpb24gZ2V0SGVhZGVycyhfYSkge1xyXG4gICAgdmFyIGFwcENvbmZpZyA9IF9hLmFwcENvbmZpZywgaW5zdGFsbGF0aW9ucyA9IF9hLmluc3RhbGxhdGlvbnM7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGF1dGhUb2tlbjtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgaW5zdGFsbGF0aW9ucy5nZXRUb2tlbigpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBhdXRoVG9rZW4gPSBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIG5ldyBIZWFkZXJzKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd4LWdvb2ctYXBpLWtleSc6IGFwcENvbmZpZy5hcGlLZXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAneC1nb29nLWZpcmViYXNlLWluc3RhbGxhdGlvbnMtYXV0aCc6IFwiRklTIFwiICsgYXV0aFRva2VuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gZ2V0Qm9keShfYSkge1xyXG4gICAgdmFyIHAyNTZkaCA9IF9hLnAyNTZkaCwgYXV0aCA9IF9hLmF1dGgsIGVuZHBvaW50ID0gX2EuZW5kcG9pbnQsIHZhcGlkS2V5ID0gX2EudmFwaWRLZXk7XHJcbiAgICB2YXIgYm9keSA9IHtcclxuICAgICAgICB3ZWI6IHtcclxuICAgICAgICAgICAgZW5kcG9pbnQ6IGVuZHBvaW50LFxyXG4gICAgICAgICAgICBhdXRoOiBhdXRoLFxyXG4gICAgICAgICAgICBwMjU2ZGg6IHAyNTZkaFxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBpZiAodmFwaWRLZXkgIT09IERFRkFVTFRfVkFQSURfS0VZKSB7XHJcbiAgICAgICAgYm9keS53ZWIuYXBwbGljYXRpb25QdWJLZXkgPSB2YXBpZEtleTtcclxuICAgIH1cclxuICAgIHJldHVybiBib2R5O1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKiBVcGRhdGVSZWdpc3RyYXRpb24gd2lsbCBiZSBjYWxsZWQgb25jZSBldmVyeSB3ZWVrLiAqL1xyXG52YXIgVE9LRU5fRVhQSVJBVElPTl9NUyA9IDcgKiAyNCAqIDYwICogNjAgKiAxMDAwOyAvLyA3IGRheXNcclxuZnVuY3Rpb24gZ2V0VG9rZW4oZmlyZWJhc2VEZXBlbmRlbmNpZXMsIHN3UmVnaXN0cmF0aW9uLCB2YXBpZEtleSkge1xyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBwdXNoU3Vic2NyaXB0aW9uLCB0b2tlbkRldGFpbHMsIHN1YnNjcmlwdGlvbk9wdGlvbnMsIGVfMTtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoTm90aWZpY2F0aW9uLnBlcm1pc3Npb24gIT09ICdncmFudGVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcInBlcm1pc3Npb24tYmxvY2tlZFwiIC8qIFBFUk1JU1NJT05fQkxPQ0tFRCAqLyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGdldFB1c2hTdWJzY3JpcHRpb24oc3dSZWdpc3RyYXRpb24sIHZhcGlkS2V5KV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgcHVzaFN1YnNjcmlwdGlvbiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBkYkdldChmaXJlYmFzZURlcGVuZGVuY2llcyldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIHRva2VuRGV0YWlscyA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb25PcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXBpZEtleTogdmFwaWRLZXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3U2NvcGU6IHN3UmVnaXN0cmF0aW9uLnNjb3BlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmRwb2ludDogcHVzaFN1YnNjcmlwdGlvbi5lbmRwb2ludCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0aDogYXJyYXlUb0Jhc2U2NChwdXNoU3Vic2NyaXB0aW9uLmdldEtleSgnYXV0aCcpKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcDI1NmRoOiBhcnJheVRvQmFzZTY0KHB1c2hTdWJzY3JpcHRpb24uZ2V0S2V5KCdwMjU2ZGgnKSlcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghIXRva2VuRGV0YWlscykgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTm8gdG9rZW4sIGdldCBhIG5ldyBvbmUuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGdldE5ld1Rva2VuKGZpcmViYXNlRGVwZW5kZW5jaWVzLCBzdWJzY3JpcHRpb25PcHRpb25zKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhaXNUb2tlblZhbGlkKHRva2VuRGV0YWlscy5zdWJzY3JpcHRpb25PcHRpb25zLCBzdWJzY3JpcHRpb25PcHRpb25zKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgOF07XHJcbiAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSA0O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbNCwgNiwgLCA3XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVxdWVzdERlbGV0ZVRva2VuKGZpcmViYXNlRGVwZW5kZW5jaWVzLCB0b2tlbkRldGFpbHMudG9rZW4pXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgN107XHJcbiAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgZV8xID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFN1cHByZXNzIGVycm9ycyBiZWNhdXNlIG9mICMyMzY0XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGVfMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgN107XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IHJldHVybiBbMiAvKnJldHVybiovLCBnZXROZXdUb2tlbihmaXJlYmFzZURlcGVuZGVuY2llcywgc3Vic2NyaXB0aW9uT3B0aW9ucyldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA4OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChEYXRlLm5vdygpID49IHRva2VuRGV0YWlscy5jcmVhdGVUaW1lICsgVE9LRU5fRVhQSVJBVElPTl9NUykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXZWVrbHkgdG9rZW4gcmVmcmVzaFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdXBkYXRlVG9rZW4oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuOiB0b2tlbkRldGFpbHMudG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlVGltZTogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb25PcHRpb25zOiBzdWJzY3JpcHRpb25PcHRpb25zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBmaXJlYmFzZURlcGVuZGVuY2llcywgc3dSZWdpc3RyYXRpb24pXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZhbGlkIHRva2VuLCBub3RoaW5nIHRvIGRvLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdG9rZW5EZXRhaWxzLnRva2VuXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIDk6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuLyoqXHJcbiAqIFRoaXMgbWV0aG9kIGRlbGV0ZXMgdGhlIHRva2VuIGZyb20gdGhlIGRhdGFiYXNlLCB1bnN1YnNjcmliZXMgdGhlIHRva2VuIGZyb20gRkNNLCBhbmQgdW5yZWdpc3RlcnNcclxuICogdGhlIHB1c2ggc3Vic2NyaXB0aW9uIGlmIGl0IGV4aXN0cy5cclxuICovXHJcbmZ1bmN0aW9uIGRlbGV0ZVRva2VuKGZpcmViYXNlRGVwZW5kZW5jaWVzLCBzd1JlZ2lzdHJhdGlvbikge1xyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0b2tlbkRldGFpbHMsIHB1c2hTdWJzY3JpcHRpb247XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIGRiR2V0KGZpcmViYXNlRGVwZW5kZW5jaWVzKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgdG9rZW5EZXRhaWxzID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdG9rZW5EZXRhaWxzKSByZXR1cm4gWzMgLypicmVhayovLCA0XTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZXF1ZXN0RGVsZXRlVG9rZW4oZmlyZWJhc2VEZXBlbmRlbmNpZXMsIHRva2VuRGV0YWlscy50b2tlbildO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBkYlJlbW92ZShmaXJlYmFzZURlcGVuZGVuY2llcyldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDQ7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbNCAvKnlpZWxkKi8sIHN3UmVnaXN0cmF0aW9uLnB1c2hNYW5hZ2VyLmdldFN1YnNjcmlwdGlvbigpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICBwdXNoU3Vic2NyaXB0aW9uID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwdXNoU3Vic2NyaXB0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBwdXNoU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGVyZSdzIG5vIFNXLCBjb25zaWRlciBpdCBhIHN1Y2Nlc3MuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRydWVdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiB1cGRhdGVUb2tlbih0b2tlbkRldGFpbHMsIGZpcmViYXNlRGVwZW5kZW5jaWVzLCBzd1JlZ2lzdHJhdGlvbikge1xyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB1cGRhdGVkVG9rZW4sIHVwZGF0ZWRUb2tlbkRldGFpbHMsIGVfMjtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDMsICwgNV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlcXVlc3RVcGRhdGVUb2tlbihmaXJlYmFzZURlcGVuZGVuY2llcywgdG9rZW5EZXRhaWxzKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlZFRva2VuID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRUb2tlbkRldGFpbHMgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgdG9rZW5EZXRhaWxzKSwgeyB0b2tlbjogdXBkYXRlZFRva2VuLCBjcmVhdGVUaW1lOiBEYXRlLm5vdygpIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGRiU2V0KGZpcmViYXNlRGVwZW5kZW5jaWVzLCB1cGRhdGVkVG9rZW5EZXRhaWxzKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB1cGRhdGVkVG9rZW5dO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgIGVfMiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBkZWxldGVUb2tlbihmaXJlYmFzZURlcGVuZGVuY2llcywgc3dSZWdpc3RyYXRpb24pXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZV8yO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGdldE5ld1Rva2VuKGZpcmViYXNlRGVwZW5kZW5jaWVzLCBzdWJzY3JpcHRpb25PcHRpb25zKSB7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHRva2VuLCB0b2tlbkRldGFpbHM7XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHJlcXVlc3RHZXRUb2tlbihmaXJlYmFzZURlcGVuZGVuY2llcywgc3Vic2NyaXB0aW9uT3B0aW9ucyldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIHRva2VuID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRva2VuRGV0YWlscyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46IHRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVUaW1lOiBEYXRlLm5vdygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb25PcHRpb25zOiBzdWJzY3JpcHRpb25PcHRpb25zXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBkYlNldChmaXJlYmFzZURlcGVuZGVuY2llcywgdG9rZW5EZXRhaWxzKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0b2tlbkRldGFpbHMudG9rZW5dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG4vKipcclxuICogR2V0cyBhIFB1c2hTdWJzY3JpcHRpb24gZm9yIHRoZSBjdXJyZW50IHVzZXIuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRQdXNoU3Vic2NyaXB0aW9uKHN3UmVnaXN0cmF0aW9uLCB2YXBpZEtleSkge1xyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBzdWJzY3JpcHRpb247XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHN3UmVnaXN0cmF0aW9uLnB1c2hNYW5hZ2VyLmdldFN1YnNjcmlwdGlvbigpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24gPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgc3Vic2NyaXB0aW9uXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHN3UmVnaXN0cmF0aW9uLnB1c2hNYW5hZ2VyLnN1YnNjcmliZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyVmlzaWJsZU9ubHk6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaHJvbWUgPD0gNzUgZG9lc24ndCBzdXBwb3J0IGJhc2U2NC1lbmNvZGVkIFZBUElEIGtleS4gRm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHksIFZBUElEIGtleVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3VibWl0dGVkIHRvIHB1c2hNYW5hZ2VyI3N1YnNjcmliZSBtdXN0IGJlIG9mIHR5cGUgVWludDhBcnJheS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcGxpY2F0aW9uU2VydmVyS2V5OiBiYXNlNjRUb0FycmF5KHZhcGlkS2V5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbi8qKlxyXG4gKiBDaGVja3MgaWYgdGhlIHNhdmVkIHRva2VuRGV0YWlscyBvYmplY3QgbWF0Y2hlcyB0aGUgY29uZmlndXJhdGlvbiBwcm92aWRlZC5cclxuICovXHJcbmZ1bmN0aW9uIGlzVG9rZW5WYWxpZChkYk9wdGlvbnMsIGN1cnJlbnRPcHRpb25zKSB7XHJcbiAgICB2YXIgaXNWYXBpZEtleUVxdWFsID0gY3VycmVudE9wdGlvbnMudmFwaWRLZXkgPT09IGRiT3B0aW9ucy52YXBpZEtleTtcclxuICAgIHZhciBpc0VuZHBvaW50RXF1YWwgPSBjdXJyZW50T3B0aW9ucy5lbmRwb2ludCA9PT0gZGJPcHRpb25zLmVuZHBvaW50O1xyXG4gICAgdmFyIGlzQXV0aEVxdWFsID0gY3VycmVudE9wdGlvbnMuYXV0aCA9PT0gZGJPcHRpb25zLmF1dGg7XHJcbiAgICB2YXIgaXNQMjU2ZGhFcXVhbCA9IGN1cnJlbnRPcHRpb25zLnAyNTZkaCA9PT0gZGJPcHRpb25zLnAyNTZkaDtcclxuICAgIHJldHVybiBpc1ZhcGlkS2V5RXF1YWwgJiYgaXNFbmRwb2ludEVxdWFsICYmIGlzQXV0aEVxdWFsICYmIGlzUDI1NmRoRXF1YWw7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gZXh0ZXJuYWxpemVQYXlsb2FkKGludGVybmFsUGF5bG9hZCkge1xyXG4gICAgdmFyIHBheWxvYWQgPSB7XHJcbiAgICAgICAgZnJvbTogaW50ZXJuYWxQYXlsb2FkLmZyb20sXHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNhbWVsY2FzZVxyXG4gICAgICAgIGNvbGxhcHNlS2V5OiBpbnRlcm5hbFBheWxvYWQuY29sbGFwc2Vfa2V5XHJcbiAgICB9O1xyXG4gICAgcHJvcGFnYXRlTm90aWZpY2F0aW9uUGF5bG9hZChwYXlsb2FkLCBpbnRlcm5hbFBheWxvYWQpO1xyXG4gICAgcHJvcGFnYXRlRGF0YVBheWxvYWQocGF5bG9hZCwgaW50ZXJuYWxQYXlsb2FkKTtcclxuICAgIHByb3BhZ2F0ZUZjbU9wdGlvbnMocGF5bG9hZCwgaW50ZXJuYWxQYXlsb2FkKTtcclxuICAgIHJldHVybiBwYXlsb2FkO1xyXG59XHJcbmZ1bmN0aW9uIHByb3BhZ2F0ZU5vdGlmaWNhdGlvblBheWxvYWQocGF5bG9hZCwgbWVzc2FnZVBheWxvYWRJbnRlcm5hbCkge1xyXG4gICAgaWYgKCFtZXNzYWdlUGF5bG9hZEludGVybmFsLm5vdGlmaWNhdGlvbikge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHBheWxvYWQubm90aWZpY2F0aW9uID0ge307XHJcbiAgICB2YXIgdGl0bGUgPSBtZXNzYWdlUGF5bG9hZEludGVybmFsLm5vdGlmaWNhdGlvbi50aXRsZTtcclxuICAgIGlmICghIXRpdGxlKSB7XHJcbiAgICAgICAgcGF5bG9hZC5ub3RpZmljYXRpb24udGl0bGUgPSB0aXRsZTtcclxuICAgIH1cclxuICAgIHZhciBib2R5ID0gbWVzc2FnZVBheWxvYWRJbnRlcm5hbC5ub3RpZmljYXRpb24uYm9keTtcclxuICAgIGlmICghIWJvZHkpIHtcclxuICAgICAgICBwYXlsb2FkLm5vdGlmaWNhdGlvbi5ib2R5ID0gYm9keTtcclxuICAgIH1cclxuICAgIHZhciBpbWFnZSA9IG1lc3NhZ2VQYXlsb2FkSW50ZXJuYWwubm90aWZpY2F0aW9uLmltYWdlO1xyXG4gICAgaWYgKCEhaW1hZ2UpIHtcclxuICAgICAgICBwYXlsb2FkLm5vdGlmaWNhdGlvbi5pbWFnZSA9IGltYWdlO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHByb3BhZ2F0ZURhdGFQYXlsb2FkKHBheWxvYWQsIG1lc3NhZ2VQYXlsb2FkSW50ZXJuYWwpIHtcclxuICAgIGlmICghbWVzc2FnZVBheWxvYWRJbnRlcm5hbC5kYXRhKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgcGF5bG9hZC5kYXRhID0gbWVzc2FnZVBheWxvYWRJbnRlcm5hbC5kYXRhO1xyXG59XHJcbmZ1bmN0aW9uIHByb3BhZ2F0ZUZjbU9wdGlvbnMocGF5bG9hZCwgbWVzc2FnZVBheWxvYWRJbnRlcm5hbCkge1xyXG4gICAgaWYgKCFtZXNzYWdlUGF5bG9hZEludGVybmFsLmZjbU9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBwYXlsb2FkLmZjbU9wdGlvbnMgPSB7fTtcclxuICAgIHZhciBsaW5rID0gbWVzc2FnZVBheWxvYWRJbnRlcm5hbC5mY21PcHRpb25zLmxpbms7XHJcbiAgICBpZiAoISFsaW5rKSB7XHJcbiAgICAgICAgcGF5bG9hZC5mY21PcHRpb25zLmxpbmsgPSBsaW5rO1xyXG4gICAgfVxyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNhbWVsY2FzZVxyXG4gICAgdmFyIGFuYWx5dGljc0xhYmVsID0gbWVzc2FnZVBheWxvYWRJbnRlcm5hbC5mY21PcHRpb25zLmFuYWx5dGljc19sYWJlbDtcclxuICAgIGlmICghIWFuYWx5dGljc0xhYmVsKSB7XHJcbiAgICAgICAgcGF5bG9hZC5mY21PcHRpb25zLmFuYWx5dGljc0xhYmVsID0gYW5hbHl0aWNzTGFiZWw7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNDb25zb2xlTWVzc2FnZShkYXRhKSB7XHJcbiAgICAvLyBUaGlzIG1lc3NhZ2UgaGFzIGEgY2FtcGFpZ24gSUQsIG1lYW5pbmcgaXQgd2FzIHNlbnQgdXNpbmcgdGhlIEZpcmViYXNlIENvbnNvbGUuXHJcbiAgICByZXR1cm4gdHlwZW9mIGRhdGEgPT09ICdvYmplY3QnICYmICEhZGF0YSAmJiBDT05TT0xFX0NBTVBBSUdOX0lEIGluIGRhdGE7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgYWZ0ZXIgZ2l2ZW4gdGltZSBwYXNzZXMuICovXHJcbmZ1bmN0aW9uIHNsZWVwKG1zKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuICAgICAgICBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKTtcclxuICAgIH0pO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBTd0NvbnRyb2xsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBTd0NvbnRyb2xsZXIoZmlyZWJhc2VEZXBlbmRlbmNpZXMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuZmlyZWJhc2VEZXBlbmRlbmNpZXMgPSBmaXJlYmFzZURlcGVuZGVuY2llcztcclxuICAgICAgICAvLyBBIGJvb2xlYW4gZmxhZyB0byBkZXRlcm1pbmUgd2V0aGVyIGFuIGFwcCBpcyB1c2luZyBvbkJhY2tncm91bmRNZXNzYWdlIG9yXHJcbiAgICAgICAgLy8gc2V0QmFja2dyb3VuZE1lc3NhZ2VIYW5kbGVyLiBvbkJhY2tncm91bmRNZXNzYWdlIHdpbGwgcmVjZWl2ZSBhIE1lc3NhZ2VQYXlsb2FkIHJlZ2FyZGxlc3Mgb2YgaWZcclxuICAgICAgICAvLyBhIG5vdGlmaWNhdGlvbiBpcyBkaXNwbGF5ZWQuIFdoZXJlYXMsIHNldEJhY2tncm91bmRNZXNzYWdlSGFuZGxlciB3aWxsIHN3YWxsb3cgdGhlXHJcbiAgICAgICAgLy8gTWVzc2FnZVBheWxvYWQgaWYgYSBOb3RpZmljYXRpb25QYXlsb2FkIGlzIGluY2x1ZGVkLlxyXG4gICAgICAgIHRoaXMuaXNPbkJhY2tncm91bmRNZXNzYWdlVXNlZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy52YXBpZEtleSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5iZ01lc3NhZ2VIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICBzZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ3B1c2gnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLndhaXRVbnRpbChfdGhpcy5vblB1c2goZSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHNlbGYuYWRkRXZlbnRMaXN0ZW5lcigncHVzaHN1YnNjcmlwdGlvbmNoYW5nZScsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUud2FpdFVudGlsKF90aGlzLm9uU3ViQ2hhbmdlKGUpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBzZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ25vdGlmaWNhdGlvbmNsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS53YWl0VW50aWwoX3RoaXMub25Ob3RpZmljYXRpb25DbGljayhlKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3dDb250cm9sbGVyLnByb3RvdHlwZSwgXCJhcHBcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5maXJlYmFzZURlcGVuZGVuY2llcy5hcHA7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVwcmVjYXRlZC4gVXNlIG9uQmFja2dyb3VuZE1lc3NhZ2UobmV4dE9yT2JzZXJ2ZXI6IE5leHRGbjxvYmplY3Q+IHwgT2JzZXJ2ZXI8b2JqZWN0Pik6XHJcbiAgICAgKiBVbnN1YnNjcmliZSBpbnN0ZWFkLlxyXG4gICAgICpcclxuICAgICAqIENhbGxpbmcgc2V0QmFja2dyb3VuZE1lc3NhZ2VIYW5kbGVyIHdpbGwgb3B0IGluIHRvIHNvbWUgc3BlY2lmaWMgYmVoYXZpb3JzLlxyXG4gICAgICpcclxuICAgICAqIDEuKSBJZiBhIG5vdGlmaWNhdGlvbiBkb2Vzbid0IG5lZWQgdG8gYmUgc2hvd24gZHVlIHRvIGEgd2luZG93IGFscmVhZHkgYmVpbmcgdmlzaWJsZSwgdGhlbiBwdXNoXHJcbiAgICAgKiBtZXNzYWdlcyB3aWxsIGJlIHNlbnQgdG8gdGhlIHBhZ2UuIDIuKSBJZiBhIG5vdGlmaWNhdGlvbiBuZWVkcyB0byBiZSBzaG93biwgYW5kIHRoZSBtZXNzYWdlXHJcbiAgICAgKiBjb250YWlucyBubyBub3RpZmljYXRpb24gZGF0YSB0aGlzIG1ldGhvZCB3aWxsIGJlIGNhbGxlZCBhbmQgdGhlIHByb21pc2UgaXQgcmV0dXJucyB3aWxsIGJlXHJcbiAgICAgKiBwYXNzZWQgdG8gZXZlbnQud2FpdFVudGlsLiBJZiB5b3UgZG8gbm90IHNldCB0aGlzIGNhbGxiYWNrIHRoZW4gYWxsIHB1c2ggbWVzc2FnZXMgd2lsbCBsZXQgYW5kXHJcbiAgICAgKiB0aGUgZGV2ZWxvcGVyIGNhbiBoYW5kbGUgdGhlbSBpbiBhIHRoZWlyIG93biAncHVzaCcgZXZlbnQgY2FsbGJhY2tcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgVGhlIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCB3aGVuIGEgcHVzaCBtZXNzYWdlIGlzIHJlY2VpdmVkIGFuZCBhIG5vdGlmaWNhdGlvblxyXG4gICAgICogbXVzdCBiZSBzaG93bi4gVGhlIGNhbGxiYWNrIHdpbGwgYmUgZ2l2ZW4gdGhlIGRhdGEgZnJvbSB0aGUgcHVzaCBtZXNzYWdlLlxyXG4gICAgICovXHJcbiAgICBTd0NvbnRyb2xsZXIucHJvdG90eXBlLnNldEJhY2tncm91bmRNZXNzYWdlSGFuZGxlciA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMuaXNPbkJhY2tncm91bmRNZXNzYWdlVXNlZCA9IGZhbHNlO1xyXG4gICAgICAgIGlmICghY2FsbGJhY2sgfHwgdHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaW52YWxpZC1iZy1oYW5kbGVyXCIgLyogSU5WQUxJRF9CR19IQU5ETEVSICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5iZ01lc3NhZ2VIYW5kbGVyID0gY2FsbGJhY2s7XHJcbiAgICB9O1xyXG4gICAgU3dDb250cm9sbGVyLnByb3RvdHlwZS5vbkJhY2tncm91bmRNZXNzYWdlID0gZnVuY3Rpb24gKG5leHRPck9ic2VydmVyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLmlzT25CYWNrZ3JvdW5kTWVzc2FnZVVzZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuYmdNZXNzYWdlSGFuZGxlciA9IG5leHRPck9ic2VydmVyO1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmJnTWVzc2FnZUhhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgLy8gVE9ETzogUmVtb3ZlIGdldFRva2VuIGZyb20gU1cgQ29udHJvbGxlci4gQ2FsbGluZyB0aGlzIGZyb20gYW4gb2xkIFNXIGNhbiBjYXVzZSBhbGwga2luZHMgb2ZcclxuICAgIC8vIHRyb3VibGUuXHJcbiAgICBTd0NvbnRyb2xsZXIucHJvdG90eXBlLmdldFRva2VuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfYSwgX2I7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdG9rZW5EZXRhaWxzO1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9jKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnZhcGlkS2V5KSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZGJHZXQodGhpcy5maXJlYmFzZURlcGVuZGVuY2llcyldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5EZXRhaWxzID0gX2Muc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhcGlkS2V5ID0gKF9iID0gKF9hID0gdG9rZW5EZXRhaWxzID09PSBudWxsIHx8IHRva2VuRGV0YWlscyA9PT0gdm9pZCAwID8gdm9pZCAwIDogdG9rZW5EZXRhaWxzLnN1YnNjcmlwdGlvbk9wdGlvbnMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS52YXBpZEtleSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogREVGQVVMVF9WQVBJRF9LRVk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jLmxhYmVsID0gMjtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHJldHVybiBbMiAvKnJldHVybiovLCBnZXRUb2tlbih0aGlzLmZpcmViYXNlRGVwZW5kZW5jaWVzLCBzZWxmLnJlZ2lzdHJhdGlvbiwgdGhpcy52YXBpZEtleSldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvLyBUT0RPOiBSZW1vdmUgZGVsZXRlVG9rZW4gZnJvbSBTVyBDb250cm9sbGVyLiBDYWxsaW5nIHRoaXMgZnJvbSBhbiBvbGQgU1cgY2FuIGNhdXNlIGFsbCBraW5kcyBvZlxyXG4gICAgLy8gdHJvdWJsZS5cclxuICAgIFN3Q29udHJvbGxlci5wcm90b3R5cGUuZGVsZXRlVG9rZW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIGRlbGV0ZVRva2VuKHRoaXMuZmlyZWJhc2VEZXBlbmRlbmNpZXMsIHNlbGYucmVnaXN0cmF0aW9uKTtcclxuICAgIH07XHJcbiAgICBTd0NvbnRyb2xsZXIucHJvdG90eXBlLnJlcXVlc3RQZXJtaXNzaW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwib25seS1hdmFpbGFibGUtaW4td2luZG93XCIgLyogQVZBSUxBQkxFX0lOX1dJTkRPVyAqLyk7XHJcbiAgICB9O1xyXG4gICAgLy8gVE9ETzogUmVtb3ZlIHRoaXMgdG9nZXRoZXIgd2l0aCBnZXRUb2tlbiBmcm9tIFNXIENvbnRyb2xsZXIuXHJcbiAgICBTd0NvbnRyb2xsZXIucHJvdG90eXBlLnVzZVB1YmxpY1ZhcGlkS2V5ID0gZnVuY3Rpb24gKHZhcGlkS2V5KSB7XHJcbiAgICAgICAgaWYgKHRoaXMudmFwaWRLZXkgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJ1c2UtdmFwaWQta2V5LWFmdGVyLWdldC10b2tlblwiIC8qIFVTRV9WQVBJRF9LRVlfQUZURVJfR0VUX1RPS0VOICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGVvZiB2YXBpZEtleSAhPT0gJ3N0cmluZycgfHwgdmFwaWRLZXkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaW52YWxpZC12YXBpZC1rZXlcIiAvKiBJTlZBTElEX1ZBUElEX0tFWSAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudmFwaWRLZXkgPSB2YXBpZEtleTtcclxuICAgIH07XHJcbiAgICBTd0NvbnRyb2xsZXIucHJvdG90eXBlLnVzZVNlcnZpY2VXb3JrZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJvbmx5LWF2YWlsYWJsZS1pbi13aW5kb3dcIiAvKiBBVkFJTEFCTEVfSU5fV0lORE9XICovKTtcclxuICAgIH07XHJcbiAgICBTd0NvbnRyb2xsZXIucHJvdG90eXBlLm9uTWVzc2FnZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm9ubHktYXZhaWxhYmxlLWluLXdpbmRvd1wiIC8qIEFWQUlMQUJMRV9JTl9XSU5ET1cgKi8pO1xyXG4gICAgfTtcclxuICAgIFN3Q29udHJvbGxlci5wcm90b3R5cGUub25Ub2tlblJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJvbmx5LWF2YWlsYWJsZS1pbi13aW5kb3dcIiAvKiBBVkFJTEFCTEVfSU5fV0lORE9XICovKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEEgaGFuZGxlciBmb3IgcHVzaCBldmVudHMgdGhhdCBzaG93cyBub3RpZmljYXRpb25zIGJhc2VkIG9uIHRoZSBjb250ZW50IG9mIHRoZSBwYXlsb2FkLlxyXG4gICAgICpcclxuICAgICAqIFRoZSBwYXlsb2FkIG11c3QgYmUgYSBKU09OLWVuY29kZWQgT2JqZWN0IHdpdGggYSBgbm90aWZpY2F0aW9uYCBrZXkuIFRoZSB2YWx1ZSBvZiB0aGVcclxuICAgICAqIGBub3RpZmljYXRpb25gIHByb3BlcnR5IHdpbGwgYmUgdXNlZCBhcyB0aGUgTm90aWZpY2F0aW9uT3B0aW9ucyBvYmplY3QgcGFzc2VkIHRvXHJcbiAgICAgKiBzaG93Tm90aWZpY2F0aW9uLiBBZGRpdGlvbmFsbHksIHRoZSBgdGl0bGVgIHByb3BlcnR5IG9mIHRoZSBub3RpZmljYXRpb24gb2JqZWN0IHdpbGwgYmUgdXNlZCBhc1xyXG4gICAgICogdGhlIHRpdGxlLlxyXG4gICAgICpcclxuICAgICAqIElmIHRoZXJlIGlzIG5vIG5vdGlmaWNhdGlvbiBkYXRhIGluIHRoZSBwYXlsb2FkIHRoZW4gbm8gbm90aWZpY2F0aW9uIHdpbGwgYmUgc2hvd24uXHJcbiAgICAgKi9cclxuICAgIFN3Q29udHJvbGxlci5wcm90b3R5cGUub25QdXNoID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgaW50ZXJuYWxQYXlsb2FkLCBjbGllbnRMaXN0LCBpc05vdGlmaWNhdGlvblNob3duLCBwYXlsb2FkO1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlcm5hbFBheWxvYWQgPSBnZXRNZXNzYWdlUGF5bG9hZEludGVybmFsKGV2ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpbnRlcm5hbFBheWxvYWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoVEFHICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZmFpbGVkIHRvIGdldCBwYXJzZWQgTWVzc2FnZVBheWxvYWQgZnJvbSB0aGUgUHVzaEV2ZW50LiBTa2lwIGhhbmRsaW5nIHRoZSBwdXNoLicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGdldENsaWVudExpc3QoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGllbnRMaXN0ID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFzVmlzaWJsZUNsaWVudHMoY2xpZW50TGlzdCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBzZW5kTWVzc2FnZVBheWxvYWRJbnRlcm5hbFRvV2luZG93cyhjbGllbnRMaXN0LCBpbnRlcm5hbFBheWxvYWQpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc05vdGlmaWNhdGlvblNob3duID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghISFpbnRlcm5hbFBheWxvYWQubm90aWZpY2F0aW9uKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgc2hvd05vdGlmaWNhdGlvbih3cmFwSW50ZXJuYWxQYXlsb2FkKGludGVybmFsUGF5bG9hZCkpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNOb3RpZmljYXRpb25TaG93biA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1lc3NhZ2VQYXlsb2FkIGlzIG9ubHkgcGFzc2VkIHRvIGBvbkJhY2tncm91bmRNZXNzYWdlYC4gU2tpcCBwYXNzaW5nIE1lc3NhZ2VQYXlsb2FkIGZvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgbGVnYWN5IGBzZXRCYWNrZ3JvdW5kTWVzc2FnZUhhbmRsZXJgIHRvIHByZXNlcnZlIHRoZSBTREsgYmVoYXZpb3JzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNOb3RpZmljYXRpb25TaG93biA9PT0gdHJ1ZSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc09uQmFja2dyb3VuZE1lc3NhZ2VVc2VkID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMuYmdNZXNzYWdlSGFuZGxlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZCA9IGV4dGVybmFsaXplUGF5bG9hZChpbnRlcm5hbFBheWxvYWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmJnTWVzc2FnZUhhbmRsZXIgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJnTWVzc2FnZUhhbmRsZXIocGF5bG9hZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJnTWVzc2FnZUhhbmRsZXIubmV4dChwYXlsb2FkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3YWl0IGJyaWVmbHkgdG8gYWxsb3cgb25CYWNrZ3JvdW5kTWVzc2FnZSB0byBjb21wbGV0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBzbGVlcChCQUNLR1JPVU5EX0hBTkRMRV9FWEVDVVRJT05fVElNRV9MSU1JVF9NUyldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2FpdCBicmllZmx5IHRvIGFsbG93IG9uQmFja2dyb3VuZE1lc3NhZ2UgdG8gY29tcGxldGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFN3Q29udHJvbGxlci5wcm90b3R5cGUub25TdWJDaGFuZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICB2YXIgX2EsIF9iO1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIG5ld1N1YnNjcmlwdGlvbiwgdG9rZW5EZXRhaWxzO1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9jKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdTdWJzY3JpcHRpb24gPSBldmVudC5uZXdTdWJzY3JpcHRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIW5ld1N1YnNjcmlwdGlvbikgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN1YnNjcmlwdGlvbiByZXZva2VkLCBkZWxldGUgdG9rZW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZGVsZXRlVG9rZW4odGhpcy5maXJlYmFzZURlcGVuZGVuY2llcywgc2VsZi5yZWdpc3RyYXRpb24pXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN1YnNjcmlwdGlvbiByZXZva2VkLCBkZWxldGUgdG9rZW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Muc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiByZXR1cm4gWzQgLyp5aWVsZCovLCBkYkdldCh0aGlzLmZpcmViYXNlRGVwZW5kZW5jaWVzKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbkRldGFpbHMgPSBfYy5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGRlbGV0ZVRva2VuKHRoaXMuZmlyZWJhc2VEZXBlbmRlbmNpZXMsIHNlbGYucmVnaXN0cmF0aW9uKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYy5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGdldFRva2VuKHRoaXMuZmlyZWJhc2VEZXBlbmRlbmNpZXMsIHNlbGYucmVnaXN0cmF0aW9uLCAoX2IgPSAoX2EgPSB0b2tlbkRldGFpbHMgPT09IG51bGwgfHwgdG9rZW5EZXRhaWxzID09PSB2b2lkIDAgPyB2b2lkIDAgOiB0b2tlbkRldGFpbHMuc3Vic2NyaXB0aW9uT3B0aW9ucykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnZhcGlkS2V5KSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBERUZBVUxUX1ZBUElEX0tFWSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Muc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFN3Q29udHJvbGxlci5wcm90b3R5cGUub25Ob3RpZmljYXRpb25DbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIHZhciBfYSwgX2I7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgaW50ZXJuYWxQYXlsb2FkLCBsaW5rLCB1cmwsIG9yaWdpblVybCwgY2xpZW50O1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9jKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlcm5hbFBheWxvYWQgPSAoX2IgPSAoX2EgPSBldmVudC5ub3RpZmljYXRpb24pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5kYXRhKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2JbRkNNX01TR107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaW50ZXJuYWxQYXlsb2FkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZXZlbnQuYWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVc2VyIGNsaWNrZWQgb24gYW4gYWN0aW9uIGJ1dHRvbi4gVGhpcyB3aWxsIGFsbG93IGRldmVsb3BlcnMgdG8gYWN0IG9uIGFjdGlvbiBidXR0b24gY2xpY2tzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBieSB1c2luZyBhIGN1c3RvbSBvbk5vdGlmaWNhdGlvbkNsaWNrIGxpc3RlbmVyIHRoYXQgdGhleSBkZWZpbmUuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHJldmVudCBvdGhlciBsaXN0ZW5lcnMgZnJvbSByZWNlaXZpbmcgdGhlIGV2ZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC5ub3RpZmljYXRpb24uY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGluayA9IGdldExpbmsoaW50ZXJuYWxQYXlsb2FkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFsaW5rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsID0gbmV3IFVSTChsaW5rLCBzZWxmLmxvY2F0aW9uLmhyZWYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5VcmwgPSBuZXcgVVJMKHNlbGYubG9jYXRpb24ub3JpZ2luKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVybC5ob3N0ICE9PSBvcmlnaW5VcmwuaG9zdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGdldFdpbmRvd0NsaWVudCh1cmwpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudCA9IF9jLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhY2xpZW50KSByZXR1cm4gWzMgLypicmVhayovLCA0XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgc2VsZi5jbGllbnRzLm9wZW5XaW5kb3cobGluayldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50ID0gX2Muc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXYWl0IHRocmVlIHNlY29uZHMgZm9yIHRoZSBjbGllbnQgdG8gaW5pdGlhbGl6ZSBhbmQgc2V0IHVwIHRoZSBtZXNzYWdlIGhhbmRsZXIgc28gdGhhdCBpdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjYW4gcmVjZWl2ZSB0aGUgbWVzc2FnZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgc2xlZXAoRk9SRUdST1VORF9IQU5ETEVfUFJFUEFSQVRJT05fVElNRV9NUyldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2FpdCB0aHJlZSBzZWNvbmRzIGZvciB0aGUgY2xpZW50IHRvIGluaXRpYWxpemUgYW5kIHNldCB1cCB0aGUgbWVzc2FnZSBoYW5kbGVyIHNvIHRoYXQgaXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FuIHJlY2VpdmUgdGhlIG1lc3NhZ2UuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzQgLyp5aWVsZCovLCBjbGllbnQuZm9jdXMoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGllbnQgPSBfYy5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jLmxhYmVsID0gNjtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY2xpZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXaW5kb3cgQ2xpZW50IHdpbGwgbm90IGJlIHJldHVybmVkIGlmIGl0J3MgZm9yIGEgdGhpcmQgcGFydHkgb3JpZ2luLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVybmFsUGF5bG9hZC5tZXNzYWdlVHlwZSA9IE1lc3NhZ2VUeXBlLk5PVElGSUNBVElPTl9DTElDS0VEO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlcm5hbFBheWxvYWQuaXNGaXJlYmFzZU1lc3NhZ2luZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBjbGllbnQucG9zdE1lc3NhZ2UoaW50ZXJuYWxQYXlsb2FkKV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBTd0NvbnRyb2xsZXI7XHJcbn0oKSk7XHJcbmZ1bmN0aW9uIHdyYXBJbnRlcm5hbFBheWxvYWQoaW50ZXJuYWxQYXlsb2FkKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICB2YXIgd3JhcHBlZEludGVybmFsUGF5bG9hZCA9IF9fYXNzaWduKHt9LCBpbnRlcm5hbFBheWxvYWQubm90aWZpY2F0aW9uKTtcclxuICAgIC8vIFB1dCB0aGUgbWVzc2FnZSBwYXlsb2FkIHVuZGVyIEZDTV9NU0cgbmFtZSBzbyB3ZSBjYW4gaWRlbnRpZnkgdGhlIG5vdGlmaWNhdGlvbiBhcyBiZWluZyBhbiBGQ01cclxuICAgIC8vIG5vdGlmaWNhdGlvbiB2cyBhIG5vdGlmaWNhdGlvbiBmcm9tIHNvbWV3aGVyZSBlbHNlIChpLmUuIG5vcm1hbCB3ZWIgcHVzaCBvciBkZXZlbG9wZXIgZ2VuZXJhdGVkXHJcbiAgICAvLyBub3RpZmljYXRpb24pLlxyXG4gICAgd3JhcHBlZEludGVybmFsUGF5bG9hZC5kYXRhID0gKF9hID0ge30sXHJcbiAgICAgICAgX2FbRkNNX01TR10gPSBpbnRlcm5hbFBheWxvYWQsXHJcbiAgICAgICAgX2EpO1xyXG4gICAgcmV0dXJuIHdyYXBwZWRJbnRlcm5hbFBheWxvYWQ7XHJcbn1cclxuZnVuY3Rpb24gZ2V0TWVzc2FnZVBheWxvYWRJbnRlcm5hbChfYSkge1xyXG4gICAgdmFyIGRhdGEgPSBfYS5kYXRhO1xyXG4gICAgaWYgKCFkYXRhKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiBkYXRhLmpzb24oKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnIpIHtcclxuICAgICAgICAvLyBOb3QgSlNPTiBzbyBub3QgYW4gRkNNIG1lc3NhZ2UuXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEBwYXJhbSB1cmwgVGhlIFVSTCB0byBsb29rIGZvciB3aGVuIGZvY3VzaW5nIGEgY2xpZW50LlxyXG4gKiBAcmV0dXJuIFJldHVybnMgYW4gZXhpc3Rpbmcgd2luZG93IGNsaWVudCBvciBhIG5ld2x5IG9wZW5lZCBXaW5kb3dDbGllbnQuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRXaW5kb3dDbGllbnQodXJsKSB7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGNsaWVudExpc3QsIGNsaWVudExpc3RfMSwgY2xpZW50TGlzdF8xXzEsIGNsaWVudCwgY2xpZW50VXJsO1xyXG4gICAgICAgIHZhciBlXzEsIF9hO1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCBnZXRDbGllbnRMaXN0KCldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIGNsaWVudExpc3QgPSBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjbGllbnRMaXN0XzEgPSBfX3ZhbHVlcyhjbGllbnRMaXN0KSwgY2xpZW50TGlzdF8xXzEgPSBjbGllbnRMaXN0XzEubmV4dCgpOyAhY2xpZW50TGlzdF8xXzEuZG9uZTsgY2xpZW50TGlzdF8xXzEgPSBjbGllbnRMaXN0XzEubmV4dCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGllbnQgPSBjbGllbnRMaXN0XzFfMS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudFVybCA9IG5ldyBVUkwoY2xpZW50LnVybCwgc2VsZi5sb2NhdGlvbi5ocmVmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1cmwuaG9zdCA9PT0gY2xpZW50VXJsLmhvc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgY2xpZW50XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGZpbmFsbHkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNsaWVudExpc3RfMV8xICYmICFjbGllbnRMaXN0XzFfMS5kb25lICYmIChfYSA9IGNsaWVudExpc3RfMS5yZXR1cm4pKSBfYS5jYWxsKGNsaWVudExpc3RfMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgbnVsbF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbi8qKlxyXG4gKiBAcmV0dXJucyBJZiB0aGVyZSBpcyBjdXJyZW50bHkgYSB2aXNpYmxlIFdpbmRvd0NsaWVudCwgdGhpcyBtZXRob2Qgd2lsbCByZXNvbHZlIHRvIHRydWUsXHJcbiAqIG90aGVyd2lzZSBmYWxzZS5cclxuICovXHJcbmZ1bmN0aW9uIGhhc1Zpc2libGVDbGllbnRzKGNsaWVudExpc3QpIHtcclxuICAgIHJldHVybiBjbGllbnRMaXN0LnNvbWUoZnVuY3Rpb24gKGNsaWVudCkge1xyXG4gICAgICAgIHJldHVybiBjbGllbnQudmlzaWJpbGl0eVN0YXRlID09PSAndmlzaWJsZScgJiZcclxuICAgICAgICAgICAgLy8gSWdub3JlIGNocm9tZS1leHRlbnNpb24gY2xpZW50cyBhcyB0aGF0IG1hdGNoZXMgdGhlIGJhY2tncm91bmQgcGFnZXMgb2YgZXh0ZW5zaW9ucywgd2hpY2hcclxuICAgICAgICAgICAgLy8gYXJlIGFsd2F5cyBjb25zaWRlcmVkIHZpc2libGUgZm9yIHNvbWUgcmVhc29uLlxyXG4gICAgICAgICAgICAhY2xpZW50LnVybC5zdGFydHNXaXRoKCdjaHJvbWUtZXh0ZW5zaW9uOi8vJyk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBzZW5kTWVzc2FnZVBheWxvYWRJbnRlcm5hbFRvV2luZG93cyhjbGllbnRMaXN0LCBpbnRlcm5hbFBheWxvYWQpIHtcclxuICAgIHZhciBlXzIsIF9hO1xyXG4gICAgaW50ZXJuYWxQYXlsb2FkLmlzRmlyZWJhc2VNZXNzYWdpbmcgPSB0cnVlO1xyXG4gICAgaW50ZXJuYWxQYXlsb2FkLm1lc3NhZ2VUeXBlID0gTWVzc2FnZVR5cGUuUFVTSF9SRUNFSVZFRDtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgZm9yICh2YXIgY2xpZW50TGlzdF8yID0gX192YWx1ZXMoY2xpZW50TGlzdCksIGNsaWVudExpc3RfMl8xID0gY2xpZW50TGlzdF8yLm5leHQoKTsgIWNsaWVudExpc3RfMl8xLmRvbmU7IGNsaWVudExpc3RfMl8xID0gY2xpZW50TGlzdF8yLm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgY2xpZW50ID0gY2xpZW50TGlzdF8yXzEudmFsdWU7XHJcbiAgICAgICAgICAgIGNsaWVudC5wb3N0TWVzc2FnZShpbnRlcm5hbFBheWxvYWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNhdGNoIChlXzJfMSkgeyBlXzIgPSB7IGVycm9yOiBlXzJfMSB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAoY2xpZW50TGlzdF8yXzEgJiYgIWNsaWVudExpc3RfMl8xLmRvbmUgJiYgKF9hID0gY2xpZW50TGlzdF8yLnJldHVybikpIF9hLmNhbGwoY2xpZW50TGlzdF8yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlXzIpIHRocm93IGVfMi5lcnJvcjsgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGdldENsaWVudExpc3QoKSB7XHJcbiAgICByZXR1cm4gc2VsZi5jbGllbnRzLm1hdGNoQWxsKHtcclxuICAgICAgICB0eXBlOiAnd2luZG93JyxcclxuICAgICAgICBpbmNsdWRlVW5jb250cm9sbGVkOiB0cnVlXHJcbiAgICAgICAgLy8gVFMgZG9lc24ndCBrbm93IHRoYXQgXCJ0eXBlOiAnd2luZG93J1wiIG1lYW5zIGl0J2xsIHJldHVybiBXaW5kb3dDbGllbnRbXVxyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gc2hvd05vdGlmaWNhdGlvbihub3RpZmljYXRpb25QYXlsb2FkSW50ZXJuYWwpIHtcclxuICAgIHZhciBfYTtcclxuICAgIC8vIE5vdGU6IEZpcmVmb3ggZG9lcyBub3Qgc3VwcG9ydCB0aGUgbWF4QWN0aW9ucyBwcm9wZXJ0eS5cclxuICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9ub3RpZmljYXRpb24vbWF4QWN0aW9uc1xyXG4gICAgdmFyIGFjdGlvbnMgPSBub3RpZmljYXRpb25QYXlsb2FkSW50ZXJuYWwuYWN0aW9ucztcclxuICAgIHZhciBtYXhBY3Rpb25zID0gTm90aWZpY2F0aW9uLm1heEFjdGlvbnM7XHJcbiAgICBpZiAoYWN0aW9ucyAmJiBtYXhBY3Rpb25zICYmIGFjdGlvbnMubGVuZ3RoID4gbWF4QWN0aW9ucykge1xyXG4gICAgICAgIGNvbnNvbGUud2FybihcIlRoaXMgYnJvd3NlciBvbmx5IHN1cHBvcnRzIFwiICsgbWF4QWN0aW9ucyArIFwiIGFjdGlvbnMuIFRoZSByZW1haW5pbmcgYWN0aW9ucyB3aWxsIG5vdCBiZSBkaXNwbGF5ZWQuXCIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHNlbGYucmVnaXN0cmF0aW9uLnNob3dOb3RpZmljYXRpb24oKF9hID0gXHJcbiAgICAvKiB0aXRsZT0gKi8gbm90aWZpY2F0aW9uUGF5bG9hZEludGVybmFsLnRpdGxlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJywgbm90aWZpY2F0aW9uUGF5bG9hZEludGVybmFsKTtcclxufVxyXG5mdW5jdGlvbiBnZXRMaW5rKHBheWxvYWQpIHtcclxuICAgIHZhciBfYSwgX2IsIF9jO1xyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNhbWVsY2FzZVxyXG4gICAgdmFyIGxpbmsgPSAoX2IgPSAoX2EgPSBwYXlsb2FkLmZjbU9wdGlvbnMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5saW5rKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAoX2MgPSBwYXlsb2FkLm5vdGlmaWNhdGlvbikgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLmNsaWNrX2FjdGlvbjtcclxuICAgIGlmIChsaW5rKSB7XHJcbiAgICAgICAgcmV0dXJuIGxpbms7XHJcbiAgICB9XHJcbiAgICBpZiAoaXNDb25zb2xlTWVzc2FnZShwYXlsb2FkLmRhdGEpKSB7XHJcbiAgICAgICAgLy8gTm90aWZpY2F0aW9uIGNyZWF0ZWQgaW4gdGhlIEZpcmViYXNlIENvbnNvbGUuIFJlZGlyZWN0IHRvIG9yaWdpbi5cclxuICAgICAgICByZXR1cm4gc2VsZi5sb2NhdGlvbi5vcmlnaW47XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgV2luZG93Q29udHJvbGxlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFdpbmRvd0NvbnRyb2xsZXIoZmlyZWJhc2VEZXBlbmRlbmNpZXMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuZmlyZWJhc2VEZXBlbmRlbmNpZXMgPSBmaXJlYmFzZURlcGVuZGVuY2llcztcclxuICAgICAgICB0aGlzLnZhcGlkS2V5ID0gbnVsbDtcclxuICAgICAgICB0aGlzLm9uTWVzc2FnZUNhbGxiYWNrID0gbnVsbDtcclxuICAgICAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLm1lc3NhZ2VFdmVudExpc3RlbmVyKGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFdpbmRvd0NvbnRyb2xsZXIucHJvdG90eXBlLCBcImFwcFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZpcmViYXNlRGVwZW5kZW5jaWVzLmFwcDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBXaW5kb3dDb250cm9sbGVyLnByb3RvdHlwZS5tZXNzYWdlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGludGVybmFsUGF5bG9hZCwgZGF0YVBheWxvYWQ7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVybmFsUGF5bG9hZCA9IGV2ZW50LmRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaW50ZXJuYWxQYXlsb2FkLmlzRmlyZWJhc2VNZXNzYWdpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBvbk1lc3NhZ2VDYWxsYmFjayBpcyBlaXRoZXIgYSBmdW5jdGlvbiBvciBvYnNlcnZlci9zdWJzY3JpYmVyLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBpbiB0aGUgbW9kdWxhcml6YXRpb24gcmVsZWFzZSwgaGF2ZSBvbk1lc3NhZ2UgaGFuZGxlIHR5cGUgTWVzc2FnZVBheWxvYWQgYXMgc3VwcG9zZWQgdG9cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGxlZ2FjeSBwYXlsb2FkIHdoZXJlIHNvbWUgZmllbGRzIGFyZSBpbiBzbmFrZSBjYXNlcy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub25NZXNzYWdlQ2FsbGJhY2sgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludGVybmFsUGF5bG9hZC5tZXNzYWdlVHlwZSA9PT0gTWVzc2FnZVR5cGUuUFVTSF9SRUNFSVZFRCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9uTWVzc2FnZUNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbk1lc3NhZ2VDYWxsYmFjayhzdHJpcEludGVybmFsRmllbGRzKE9iamVjdC5hc3NpZ24oe30sIGludGVybmFsUGF5bG9hZCkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25NZXNzYWdlQ2FsbGJhY2submV4dChPYmplY3QuYXNzaWduKHt9LCBpbnRlcm5hbFBheWxvYWQpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhUGF5bG9hZCA9IGludGVybmFsUGF5bG9hZC5kYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShpc0NvbnNvbGVNZXNzYWdlKGRhdGFQYXlsb2FkKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVBheWxvYWRbQ09OU09MRV9DQU1QQUlHTl9BTkFMWVRJQ1NfRU5BQkxFRF0gPT09ICcxJykpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmxvZ0V2ZW50KGludGVybmFsUGF5bG9hZC5tZXNzYWdlVHlwZSwgZGF0YVBheWxvYWQpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBXaW5kb3dDb250cm9sbGVyLnByb3RvdHlwZS5nZXRWYXBpZEtleSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy52YXBpZEtleTtcclxuICAgIH07XHJcbiAgICBXaW5kb3dDb250cm9sbGVyLnByb3RvdHlwZS5nZXRTd1JlZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zd1JlZ2lzdHJhdGlvbjtcclxuICAgIH07XHJcbiAgICBXaW5kb3dDb250cm9sbGVyLnByb3RvdHlwZS5nZXRUb2tlbiA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShOb3RpZmljYXRpb24ucGVybWlzc2lvbiA9PT0gJ2RlZmF1bHQnKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIE5vdGlmaWNhdGlvbi5yZXF1ZXN0UGVybWlzc2lvbigpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE5vdGlmaWNhdGlvbi5wZXJtaXNzaW9uICE9PSAnZ3JhbnRlZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwicGVybWlzc2lvbi1ibG9ja2VkXCIgLyogUEVSTUlTU0lPTl9CTE9DS0VEICovKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnVwZGF0ZVZhcGlkS2V5KG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy52YXBpZEtleSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnVwZGF0ZVN3UmVnKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5zZXJ2aWNlV29ya2VyUmVnaXN0cmF0aW9uKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBnZXRUb2tlbih0aGlzLmZpcmViYXNlRGVwZW5kZW5jaWVzLCB0aGlzLnN3UmVnaXN0cmF0aW9uLCB0aGlzLnZhcGlkS2V5KV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFdpbmRvd0NvbnRyb2xsZXIucHJvdG90eXBlLnVwZGF0ZVZhcGlkS2V5ID0gZnVuY3Rpb24gKHZhcGlkS2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoISF2YXBpZEtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFwaWRLZXkgPSB2YXBpZEtleTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCF0aGlzLnZhcGlkS2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YXBpZEtleSA9IERFRkFVTFRfVkFQSURfS0VZO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBXaW5kb3dDb250cm9sbGVyLnByb3RvdHlwZS51cGRhdGVTd1JlZyA9IGZ1bmN0aW9uIChzd1JlZ2lzdHJhdGlvbikge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoIXN3UmVnaXN0cmF0aW9uICYmICF0aGlzLnN3UmVnaXN0cmF0aW9uKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucmVnaXN0ZXJEZWZhdWx0U3coKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMjtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc3dSZWdpc3RyYXRpb24gJiYgISF0aGlzLnN3UmVnaXN0cmF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoc3dSZWdpc3RyYXRpb24gaW5zdGFuY2VvZiBTZXJ2aWNlV29ya2VyUmVnaXN0cmF0aW9uKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpbnZhbGlkLXN3LXJlZ2lzdHJhdGlvblwiIC8qIElOVkFMSURfU1dfUkVHSVNUUkFUSU9OICovKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN3UmVnaXN0cmF0aW9uID0gc3dSZWdpc3RyYXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgV2luZG93Q29udHJvbGxlci5wcm90b3R5cGUucmVnaXN0ZXJEZWZhdWx0U3cgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgX2EsIGVfMTtcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2IudHJ5cy5wdXNoKFswLCAyLCAsIDNdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWdpc3RlcihERUZBVUxUX1NXX1BBVEgsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZTogREVGQVVMVF9TV19TQ09QRVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc3dSZWdpc3RyYXRpb24gPSBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSB0aW1pbmcgd2hlbiBicm93c2VyIHVwZGF0ZXMgc3cgd2hlbiBzdyBoYXMgYW4gdXBkYXRlIGlzIHVucmVsaWFibGUgYnkgbXkgZXhwZXJpbWVudC4gSXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGVhZHMgdG8gdmVyc2lvbiBjb25mbGljdCB3aGVuIHRoZSBTREsgdXBncmFkZXMgdG8gYSBuZXdlciB2ZXJzaW9uIGluIHRoZSBtYWluIHBhZ2UsIGJ1dCBzd1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpcyBzdHVjayB3aXRoIHRoZSBvbGQgdmVyc2lvbi4gRm9yIGV4YW1wbGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1qcy1zZGsvaXNzdWVzLzI1OTAgVGhlIGZvbGxvd2luZyBsaW5lIHJlbGlhYmx5IHVwZGF0ZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3cgaWYgdGhlcmUgd2FzIGFuIHVwZGF0ZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zd1JlZ2lzdHJhdGlvbi51cGRhdGUoKS5jYXRjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBpdCBpcyBub24gYmxvY2tpbmcgYW5kIHdlIGRvbid0IGNhcmUgaWYgaXQgZmFpbGVkICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVfMSA9IF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJmYWlsZWQtc2VydmljZS13b3JrZXItcmVnaXN0cmF0aW9uXCIgLyogRkFJTEVEX0RFRkFVTFRfUkVHSVNUUkFUSU9OICovLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicm93c2VyRXJyb3JNZXNzYWdlOiBlXzEubWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgV2luZG93Q29udHJvbGxlci5wcm90b3R5cGUuZGVsZXRlVG9rZW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnN3UmVnaXN0cmF0aW9uKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5yZWdpc3RlckRlZmF1bHRTdygpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGRlbGV0ZVRva2VuKHRoaXMuZmlyZWJhc2VEZXBlbmRlbmNpZXMsIHRoaXMuc3dSZWdpc3RyYXRpb24pXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXF1ZXN0IHBlcm1pc3Npb24gaWYgaXQgaXMgbm90IGN1cnJlbnRseSBncmFudGVkLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4gUmVzb2x2ZXMgaWYgdGhlIHBlcm1pc3Npb24gd2FzIGdyYW50ZWQsIHJlamVjdHMgb3RoZXJ3aXNlLlxyXG4gICAgICpcclxuICAgICAqIEBkZXByZWNhdGVkIFVzZSBOb3RpZmljYXRpb24ucmVxdWVzdFBlcm1pc3Npb24oKSBpbnN0ZWFkLlxyXG4gICAgICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL05vdGlmaWNhdGlvbi9yZXF1ZXN0UGVybWlzc2lvblxyXG4gICAgICovXHJcbiAgICBXaW5kb3dDb250cm9sbGVyLnByb3RvdHlwZS5yZXF1ZXN0UGVybWlzc2lvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBwZXJtaXNzaW9uUmVzdWx0O1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoTm90aWZpY2F0aW9uLnBlcm1pc3Npb24gPT09ICdncmFudGVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIE5vdGlmaWNhdGlvbi5yZXF1ZXN0UGVybWlzc2lvbigpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcm1pc3Npb25SZXN1bHQgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwZXJtaXNzaW9uUmVzdWx0ID09PSAnZ3JhbnRlZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChwZXJtaXNzaW9uUmVzdWx0ID09PSAnZGVuaWVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJwZXJtaXNzaW9uLWJsb2NrZWRcIiAvKiBQRVJNSVNTSU9OX0JMT0NLRUQgKi8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJwZXJtaXNzaW9uLWRlZmF1bHRcIiAvKiBQRVJNSVNTSU9OX0RFRkFVTFQgKi8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQGRlcHJlY2F0ZWQuIFVzZSBnZXRUb2tlbihvcHRpb25zPzoge3ZhcGlkS2V5Pzogc3RyaW5nOyBzZXJ2aWNlV29ya2VyUmVnaXN0cmF0aW9uPzpcclxuICAgICAqIFNlcnZpY2VXb3JrZXJSZWdpc3RyYXRpb247fSk6IFByb21pc2U8c3RyaW5nPiBpbnN0ZWFkLlxyXG4gICAgICovXHJcbiAgICBXaW5kb3dDb250cm9sbGVyLnByb3RvdHlwZS51c2VQdWJsaWNWYXBpZEtleSA9IGZ1bmN0aW9uICh2YXBpZEtleSkge1xyXG4gICAgICAgIGlmICh0aGlzLnZhcGlkS2V5ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwidXNlLXZhcGlkLWtleS1hZnRlci1nZXQtdG9rZW5cIiAvKiBVU0VfVkFQSURfS0VZX0FGVEVSX0dFVF9UT0tFTiAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlb2YgdmFwaWRLZXkgIT09ICdzdHJpbmcnIHx8IHZhcGlkS2V5Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImludmFsaWQtdmFwaWQta2V5XCIgLyogSU5WQUxJRF9WQVBJRF9LRVkgKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnZhcGlkS2V5ID0gdmFwaWRLZXk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVwcmVjYXRlZC4gVXNlIGdldFRva2VuKG9wdGlvbnM/OiB7dmFwaWRLZXk/OiBzdHJpbmc7IHNlcnZpY2VXb3JrZXJSZWdpc3RyYXRpb24/OlxyXG4gICAgICogU2VydmljZVdvcmtlclJlZ2lzdHJhdGlvbjt9KTogUHJvbWlzZTxzdHJpbmc+IGluc3RlYWQuXHJcbiAgICAgKi9cclxuICAgIFdpbmRvd0NvbnRyb2xsZXIucHJvdG90eXBlLnVzZVNlcnZpY2VXb3JrZXIgPSBmdW5jdGlvbiAoc3dSZWdpc3RyYXRpb24pIHtcclxuICAgICAgICBpZiAoIShzd1JlZ2lzdHJhdGlvbiBpbnN0YW5jZW9mIFNlcnZpY2VXb3JrZXJSZWdpc3RyYXRpb24pKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaW52YWxpZC1zdy1yZWdpc3RyYXRpb25cIiAvKiBJTlZBTElEX1NXX1JFR0lTVFJBVElPTiAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnN3UmVnaXN0cmF0aW9uKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwidXNlLXN3LWFmdGVyLWdldC10b2tlblwiIC8qIFVTRV9TV19BRlRFUl9HRVRfVE9LRU4gKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnN3UmVnaXN0cmF0aW9uID0gc3dSZWdpc3RyYXRpb247XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gbmV4dE9yT2JzZXJ2ZXIgQW4gb2JzZXJ2ZXIgb2JqZWN0IG9yIGEgZnVuY3Rpb24gdHJpZ2dlcmVkIG9uIG1lc3NhZ2UuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiBUaGUgdW5zdWJzY3JpYmUgZnVuY3Rpb24gZm9yIHRoZSBvYnNlcnZlci5cclxuICAgICAqL1xyXG4gICAgV2luZG93Q29udHJvbGxlci5wcm90b3R5cGUub25NZXNzYWdlID0gZnVuY3Rpb24gKG5leHRPck9ic2VydmVyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLm9uTWVzc2FnZUNhbGxiYWNrID0gbmV4dE9yT2JzZXJ2ZXI7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMub25NZXNzYWdlQ2FsbGJhY2sgPSBudWxsO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgV2luZG93Q29udHJvbGxlci5wcm90b3R5cGUuc2V0QmFja2dyb3VuZE1lc3NhZ2VIYW5kbGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwib25seS1hdmFpbGFibGUtaW4tc3dcIiAvKiBBVkFJTEFCTEVfSU5fU1cgKi8pO1xyXG4gICAgfTtcclxuICAgIFdpbmRvd0NvbnRyb2xsZXIucHJvdG90eXBlLm9uQmFja2dyb3VuZE1lc3NhZ2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJvbmx5LWF2YWlsYWJsZS1pbi1zd1wiIC8qIEFWQUlMQUJMRV9JTl9TVyAqLyk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVwcmVjYXRlZCBOby1vcC4gSXQgd2FzIGluaXRpYWxseSBkZXNpZ25lZCB3aXRoIHRva2VuIHJvdGF0aW9uIHJlcXVlc3RzIGZyb20gc2VydmVyIGluIG1pbmQuXHJcbiAgICAgKiBIb3dldmVyLCB0aGUgcGxhbiB0byBpbXBsZW1lbnQgc3VjaCBmZWF0dXJlIHdhcyBhYmFuZG9uZWQuXHJcbiAgICAgKi9cclxuICAgIFdpbmRvd0NvbnRyb2xsZXIucHJvdG90eXBlLm9uVG9rZW5SZWZyZXNoID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7IH07XHJcbiAgICB9O1xyXG4gICAgV2luZG93Q29udHJvbGxlci5wcm90b3R5cGUubG9nRXZlbnQgPSBmdW5jdGlvbiAobWVzc2FnZVR5cGUsIGRhdGEpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBldmVudFR5cGUsIGFuYWx5dGljcztcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRUeXBlID0gZ2V0RXZlbnRUeXBlKG1lc3NhZ2VUeXBlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5maXJlYmFzZURlcGVuZGVuY2llcy5hbmFseXRpY3NQcm92aWRlci5nZXQoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmFseXRpY3MgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuYWx5dGljcy5sb2dFdmVudChldmVudFR5cGUsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIGNhbWVsY2FzZSAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZV9pZDogZGF0YVtDT05TT0xFX0NBTVBBSUdOX0lEXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VfbmFtZTogZGF0YVtDT05TT0xFX0NBTVBBSUdOX05BTUVdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZV90aW1lOiBkYXRhW0NPTlNPTEVfQ0FNUEFJR05fVElNRV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlX2RldmljZV90aW1lOiBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxMDAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogZXNsaW50LWVuYWJsZSBjYW1lbGNhc2UgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFdpbmRvd0NvbnRyb2xsZXI7XHJcbn0oKSk7XHJcbmZ1bmN0aW9uIGdldEV2ZW50VHlwZShtZXNzYWdlVHlwZSkge1xyXG4gICAgc3dpdGNoIChtZXNzYWdlVHlwZSkge1xyXG4gICAgICAgIGNhc2UgTWVzc2FnZVR5cGUuTk9USUZJQ0FUSU9OX0NMSUNLRUQ6XHJcbiAgICAgICAgICAgIHJldHVybiAnbm90aWZpY2F0aW9uX29wZW4nO1xyXG4gICAgICAgIGNhc2UgTWVzc2FnZVR5cGUuUFVTSF9SRUNFSVZFRDpcclxuICAgICAgICAgICAgcmV0dXJuICdub3RpZmljYXRpb25fZm9yZWdyb3VuZCc7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gc3RyaXBJbnRlcm5hbEZpZWxkcyhpbnRlcm5hbFBheWxvYWQpIHtcclxuICAgIGRlbGV0ZSBpbnRlcm5hbFBheWxvYWQubWVzc2FnZVR5cGU7XHJcbiAgICBkZWxldGUgaW50ZXJuYWxQYXlsb2FkLmlzRmlyZWJhc2VNZXNzYWdpbmc7XHJcbiAgICByZXR1cm4gaW50ZXJuYWxQYXlsb2FkO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGV4dHJhY3RBcHBDb25maWcoYXBwKSB7XHJcbiAgICB2YXIgZV8xLCBfYTtcclxuICAgIGlmICghYXBwIHx8ICFhcHAub3B0aW9ucykge1xyXG4gICAgICAgIHRocm93IGdldE1pc3NpbmdWYWx1ZUVycm9yKCdBcHAgQ29uZmlndXJhdGlvbiBPYmplY3QnKTtcclxuICAgIH1cclxuICAgIGlmICghYXBwLm5hbWUpIHtcclxuICAgICAgICB0aHJvdyBnZXRNaXNzaW5nVmFsdWVFcnJvcignQXBwIE5hbWUnKTtcclxuICAgIH1cclxuICAgIC8vIFJlcXVpcmVkIGFwcCBjb25maWcga2V5c1xyXG4gICAgdmFyIGNvbmZpZ0tleXMgPSBbXHJcbiAgICAgICAgJ3Byb2plY3RJZCcsXHJcbiAgICAgICAgJ2FwaUtleScsXHJcbiAgICAgICAgJ2FwcElkJyxcclxuICAgICAgICAnbWVzc2FnaW5nU2VuZGVySWQnXHJcbiAgICBdO1xyXG4gICAgdmFyIG9wdGlvbnMgPSBhcHAub3B0aW9ucztcclxuICAgIHRyeSB7XHJcbiAgICAgICAgZm9yICh2YXIgY29uZmlnS2V5c18xID0gX192YWx1ZXMoY29uZmlnS2V5cyksIGNvbmZpZ0tleXNfMV8xID0gY29uZmlnS2V5c18xLm5leHQoKTsgIWNvbmZpZ0tleXNfMV8xLmRvbmU7IGNvbmZpZ0tleXNfMV8xID0gY29uZmlnS2V5c18xLm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIga2V5TmFtZSA9IGNvbmZpZ0tleXNfMV8xLnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAoIW9wdGlvbnNba2V5TmFtZV0pIHtcclxuICAgICAgICAgICAgICAgIHRocm93IGdldE1pc3NpbmdWYWx1ZUVycm9yKGtleU5hbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChjb25maWdLZXlzXzFfMSAmJiAhY29uZmlnS2V5c18xXzEuZG9uZSAmJiAoX2EgPSBjb25maWdLZXlzXzEucmV0dXJuKSkgX2EuY2FsbChjb25maWdLZXlzXzEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGFwcE5hbWU6IGFwcC5uYW1lLFxyXG4gICAgICAgIHByb2plY3RJZDogb3B0aW9ucy5wcm9qZWN0SWQsXHJcbiAgICAgICAgYXBpS2V5OiBvcHRpb25zLmFwaUtleSxcclxuICAgICAgICBhcHBJZDogb3B0aW9ucy5hcHBJZCxcclxuICAgICAgICBzZW5kZXJJZDogb3B0aW9ucy5tZXNzYWdpbmdTZW5kZXJJZFxyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiBnZXRNaXNzaW5nVmFsdWVFcnJvcih2YWx1ZU5hbWUpIHtcclxuICAgIHJldHVybiBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm1pc3NpbmctYXBwLWNvbmZpZy12YWx1ZXNcIiAvKiBNSVNTSU5HX0FQUF9DT05GSUdfVkFMVUVTICovLCB7XHJcbiAgICAgICAgdmFsdWVOYW1lOiB2YWx1ZU5hbWVcclxuICAgIH0pO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBNRVNTQUdJTkdfTkFNRSA9ICdtZXNzYWdpbmcnO1xyXG5mdW5jdGlvbiBmYWN0b3J5TWV0aG9kKGNvbnRhaW5lcikge1xyXG4gICAgLy8gRGVwZW5kZW5jaWVzLlxyXG4gICAgdmFyIGFwcCA9IGNvbnRhaW5lci5nZXRQcm92aWRlcignYXBwJykuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICB2YXIgYXBwQ29uZmlnID0gZXh0cmFjdEFwcENvbmZpZyhhcHApO1xyXG4gICAgdmFyIGluc3RhbGxhdGlvbnMgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoJ2luc3RhbGxhdGlvbnMnKS5nZXRJbW1lZGlhdGUoKTtcclxuICAgIHZhciBhbmFseXRpY3NQcm92aWRlciA9IGNvbnRhaW5lci5nZXRQcm92aWRlcignYW5hbHl0aWNzLWludGVybmFsJyk7XHJcbiAgICB2YXIgZmlyZWJhc2VEZXBlbmRlbmNpZXMgPSB7XHJcbiAgICAgICAgYXBwOiBhcHAsXHJcbiAgICAgICAgYXBwQ29uZmlnOiBhcHBDb25maWcsXHJcbiAgICAgICAgaW5zdGFsbGF0aW9uczogaW5zdGFsbGF0aW9ucyxcclxuICAgICAgICBhbmFseXRpY3NQcm92aWRlcjogYW5hbHl0aWNzUHJvdmlkZXJcclxuICAgIH07XHJcbiAgICBpZiAoIWlzU3VwcG9ydGVkKCkpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcInVuc3VwcG9ydGVkLWJyb3dzZXJcIiAvKiBVTlNVUFBPUlRFRF9CUk9XU0VSICovKTtcclxuICAgIH1cclxuICAgIGlmIChzZWxmICYmICdTZXJ2aWNlV29ya2VyR2xvYmFsU2NvcGUnIGluIHNlbGYpIHtcclxuICAgICAgICAvLyBSdW5uaW5nIGluIFNlcnZpY2VXb3JrZXIgY29udGV4dFxyXG4gICAgICAgIHJldHVybiBuZXcgU3dDb250cm9sbGVyKGZpcmViYXNlRGVwZW5kZW5jaWVzKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIC8vIEFzc3VtZSB3ZSBhcmUgaW4gdGhlIHdpbmRvdyBjb250ZXh0LlxyXG4gICAgICAgIHJldHVybiBuZXcgV2luZG93Q29udHJvbGxlcihmaXJlYmFzZURlcGVuZGVuY2llcyk7XHJcbiAgICB9XHJcbn1cclxudmFyIE5BTUVTUEFDRV9FWFBPUlRTID0ge1xyXG4gICAgaXNTdXBwb3J0ZWQ6IGlzU3VwcG9ydGVkXHJcbn07XHJcbmZpcmViYXNlLklOVEVSTkFMLnJlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoTUVTU0FHSU5HX05BTUUsIGZhY3RvcnlNZXRob2QsIFwiUFVCTElDXCIgLyogUFVCTElDICovKS5zZXRTZXJ2aWNlUHJvcHMoTkFNRVNQQUNFX0VYUE9SVFMpKTtcclxuZnVuY3Rpb24gaXNTdXBwb3J0ZWQoKSB7XHJcbiAgICBpZiAoc2VsZiAmJiAnU2VydmljZVdvcmtlckdsb2JhbFNjb3BlJyBpbiBzZWxmKSB7XHJcbiAgICAgICAgLy8gUnVubmluZyBpbiBTZXJ2aWNlV29ya2VyIGNvbnRleHRcclxuICAgICAgICByZXR1cm4gaXNTV0NvbnRyb2xsZXJTdXBwb3J0ZWQoKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIC8vIEFzc3VtZSB3ZSBhcmUgaW4gdGhlIHdpbmRvdyBjb250ZXh0LlxyXG4gICAgICAgIHJldHVybiBpc1dpbmRvd0NvbnRyb2xsZXJTdXBwb3J0ZWQoKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogQ2hlY2tzIHRvIHNlZSBpZiB0aGUgcmVxdWlyZWQgQVBJcyBleGlzdC5cclxuICovXHJcbmZ1bmN0aW9uIGlzV2luZG93Q29udHJvbGxlclN1cHBvcnRlZCgpIHtcclxuICAgIHJldHVybiAoJ2luZGV4ZWREQicgaW4gd2luZG93ICYmXHJcbiAgICAgICAgaW5kZXhlZERCICE9PSBudWxsICYmXHJcbiAgICAgICAgbmF2aWdhdG9yLmNvb2tpZUVuYWJsZWQgJiZcclxuICAgICAgICAnc2VydmljZVdvcmtlcicgaW4gbmF2aWdhdG9yICYmXHJcbiAgICAgICAgJ1B1c2hNYW5hZ2VyJyBpbiB3aW5kb3cgJiZcclxuICAgICAgICAnTm90aWZpY2F0aW9uJyBpbiB3aW5kb3cgJiZcclxuICAgICAgICAnZmV0Y2gnIGluIHdpbmRvdyAmJlxyXG4gICAgICAgIFNlcnZpY2VXb3JrZXJSZWdpc3RyYXRpb24ucHJvdG90eXBlLmhhc093blByb3BlcnR5KCdzaG93Tm90aWZpY2F0aW9uJykgJiZcclxuICAgICAgICBQdXNoU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSgnZ2V0S2V5JykpO1xyXG59XHJcbi8qKlxyXG4gKiBDaGVja3MgdG8gc2VlIGlmIHRoZSByZXF1aXJlZCBBUElzIGV4aXN0IHdpdGhpbiBTVyBDb250ZXh0LlxyXG4gKi9cclxuZnVuY3Rpb24gaXNTV0NvbnRyb2xsZXJTdXBwb3J0ZWQoKSB7XHJcbiAgICByZXR1cm4gKCdpbmRleGVkREInIGluIHNlbGYgJiZcclxuICAgICAgICBpbmRleGVkREIgIT09IG51bGwgJiZcclxuICAgICAgICAnUHVzaE1hbmFnZXInIGluIHNlbGYgJiZcclxuICAgICAgICAnTm90aWZpY2F0aW9uJyBpbiBzZWxmICYmXHJcbiAgICAgICAgU2VydmljZVdvcmtlclJlZ2lzdHJhdGlvbi5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkoJ3Nob3dOb3RpZmljYXRpb24nKSAmJlxyXG4gICAgICAgIFB1c2hTdWJzY3JpcHRpb24ucHJvdG90eXBlLmhhc093blByb3BlcnR5KCdnZXRLZXknKSk7XHJcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbS5qcy5tYXBcbiIsImltcG9ydCBmaXJlYmFzZSBmcm9tICdmaXJlYmFzZS9hcHAnO1xuaW1wb3J0ICdmaXJlYmFzZS9tZXNzYWdpbmcnO1xuXG5cbmNvbnN0IGZpcmViYXNlQ29uZmlnID0ge1xuICAgIGFwaUtleTogXCJBSXphU3lDeGVsYllfSlB6Y1dGbHlSTDh2YWprZmpySW4wZWZVWGdcIixcbiAgICBhdXRoRG9tYWluOiBcImJyb2tlcnMyNC1mNTBmNi5maXJlYmFzZWFwcC5jb21cIixcbiAgICBkYXRhYmFzZVVSTDogXCJodHRwczovL2Jyb2tlcnMyNC1mNTBmNi5maXJlYmFzZWlvLmNvbVwiLFxuICAgIHByb2plY3RJZDogXCJicm9rZXJzMjQtZjUwZjZcIixcbiAgICBzdG9yYWdlQnVja2V0OiBcImJyb2tlcnMyNC1mNTBmNi5hcHBzcG90LmNvbVwiLFxuICAgIG1lc3NhZ2luZ1NlbmRlcklkOiBcIjc2Nzc1MDY1Mzk2OVwiLFxuICAgIGFwcElkOiBcIjE6NzY3NzUwNjUzOTY5OndlYjpkMWZlNmJhMzU5NWI3NTBiZTUwOWIwXCJcbn07XG5cbmZpcmViYXNlLmluaXRpYWxpemVBcHAoZmlyZWJhc2VDb25maWcpO1xuXG5jb25zdCBtZXNzYWdpbmcgPSBmaXJlYmFzZS5tZXNzYWdpbmcoKTtcblxuLy8g0LjRgdC/0L7Qu9GM0LfRg9C10LwgbG9jYWxTdG9yYWdlINC00LvRjyDQvtGC0LzQtdGC0LrQuCDRgtC+0LPQvixcbi8vINGH0YLQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70Ywg0YPQttC1INC/0L7QtNC/0LjRgdCw0LvRgdGPINC90LAg0YPQstC10LTQvtC80LvQtdC90LjRj1xuZnVuY3Rpb24gaXNUb2tlblNlbnRUb1NlcnZlcihjdXJyZW50VG9rZW46IHN0cmluZykge1xuICAgIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2VudEZpcmViYXNlTWVzc2FnaW5nVG9rZW4nKSA9PT0gY3VycmVudFRva2VuO1xufVxuXG5mdW5jdGlvbiBzZW5kVG9rZW5Ub1NlcnZlcihjdXJyZW50VG9rZW46IHN0cmluZykge1xuICAgIGlmICghaXNUb2tlblNlbnRUb1NlcnZlcihjdXJyZW50VG9rZW4pKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfQntGC0L/RgNCw0LLQutCwINGC0L7QutC10L3QsCDQvdCwINGB0LXRgNCy0LXRgC4uLicpO1xuXG4gICAgICAgIC8vIHZhciB1cmwgPSAnJzsgLy8g0LDQtNGA0LXRgSDRgdC60YDQuNC/0YLQsCDQvdCwINGB0LXRgNCy0LXRgNC1INC60L7RgtC+0YDRi9C5INGB0L7RhdGA0LDQvdGP0LXRgiBJRCDRg9GB0YLRgNC+0LnRgdGC0LLQsFxuICAgICAgICAvLyAkLnBvc3QodXJsLCB7XG4gICAgICAgIC8vICAgICB0b2tlbjogY3VycmVudFRva2VuXG4gICAgICAgIC8vIH0pO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKGBTRU5EIFRPIFNFUlZFUjogJHtjdXJyZW50VG9rZW59YCk7XG5cbiAgICAgICAgc2V0VG9rZW5TZW50VG9TZXJ2ZXIoY3VycmVudFRva2VuKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZygn0KLQvtC60LXQvSDRg9C20LUg0L7RgtC/0YDQsNCy0LvQtdC9INC90LAg0YHQtdGA0LLQtdGALicpO1xuICAgIH1cbn1cblxuXG5mdW5jdGlvbiBzZXRUb2tlblNlbnRUb1NlcnZlcihjdXJyZW50VG9rZW46IHN0cmluZykge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFxuICAgICAgICAnc2VudEZpcmViYXNlTWVzc2FnaW5nVG9rZW4nLFxuICAgICAgICBjdXJyZW50VG9rZW4gPyBjdXJyZW50VG9rZW4gOiAnJ1xuICAgICk7XG59XG5cblxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1YnNjcmliZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIG1lc3NhZ2luZy5nZXRUb2tlbigpLnRoZW4oKGN1cnJlbnRUb2tlbikgPT4ge1xuICAgICAgICBpZiAoY3VycmVudFRva2VuKSB7XG4gICAgICAgICAgICBzZW5kVG9rZW5Ub1NlcnZlcihjdXJyZW50VG9rZW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gU2hvdyBwZXJtaXNzaW9uIHJlcXVlc3QuXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnTm8gcmVnaXN0cmF0aW9uIHRva2VuIGF2YWlsYWJsZS4gUmVxdWVzdCBwZXJtaXNzaW9uIHRvIGdlbmVyYXRlIG9uZS4nKTtcbiAgICAgICAgICAgIC8vIFNob3cgcGVybWlzc2lvbiBVSS5cbiAgICAgICAgICAgIHNldFRva2VuU2VudFRvU2VydmVyKG51bGwpO1xuICAgICAgICB9XG4gICAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgcmV0cmlldmluZyB0b2tlbi4gJywgZXJyKTtcbiAgICAgICAgc2V0VG9rZW5TZW50VG9TZXJ2ZXIobnVsbCk7XG4gICAgfSk7XG5cbn0pO1xuXG5cbm1lc3NhZ2luZy5vbk1lc3NhZ2UoKHBheWxvYWQpID0+IHtcbiAgICBjb25zb2xlLmxvZygnTWVzc2FnZSByZWNlaXZlZC4gJywgcGF5bG9hZCk7XG4gICAgaWYgKCFkb2N1bWVudC5oaWRkZW4pIHtcbiAgICAgICAgbmV3IE5vdGlmaWNhdGlvbihwYXlsb2FkLm5vdGlmaWNhdGlvbi50aXRsZSwge1xuICAgICAgICAgICAgYm9keTogcGF5bG9hZC5ub3RpZmljYXRpb24uYm9keSxcbiAgICAgICAgfSk7XG4gICAgfVxufSk7XG4iXSwic291cmNlUm9vdCI6IiJ9